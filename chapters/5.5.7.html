<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- Global site tag (gtag.js) - Google Analytics - START -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156801664-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-156801664-1');
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics - END -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="5.5.7  Interfacing Compiled Code to the Evaluator" />
    <title>
      5.5.7  Interfacing Compiled Code to the Evaluator
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; JavaScript Adaptation</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder= "search web edition";
	               searchBox.title= "search web edition";
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://source-academy.github.io/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

            
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html">  Foreword</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./prefaces.html">  Prefaces</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./acknowledgements.html">  Acknowledgments from Second Edition of SICP, 1996</a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-4">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1  Building Abstractions with Functions</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-4" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-5">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1  The Elements of Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-5" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./1.1.1.html"> 1.1.1  Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./1.1.2.html"> 1.1.2  Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-8">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="false" aria-controls="sidebar-collapse-8">
                <a href="./1.1.3.html"> 1.1.3  Evaluating Operator Combinations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-9">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                <a href="./1.1.4.html"> 1.1.4  Compound Functions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.5.html"> 1.1.5  The Substitution Model for Function Application</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.6.html"> 1.1.6  Conditional Expressions and Predicates</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.7.html"> 1.1.7  Example: Square Roots by Newton s Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.8.html"> 1.1.8  Functions as Black-Box Abstractions</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-14">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2  Functions and the Processes They Generate</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-14" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.2.1.html"> 1.2.1  Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.2.2.html"> 1.2.2  Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.2.3.html"> 1.2.3  Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-18">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="false" aria-controls="sidebar-collapse-18">
                <a href="./1.2.4.html"> 1.2.4  Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.5.html"> 1.2.5  Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.6.html"> 1.2.6  Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-21">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3  Formulating Abstractions with Higher-Order Functions</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-21" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.3.1.html"> 1.3.1  Functions as Arguments</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.3.2.html"> 1.3.2  Constructing Functions using Lambda Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.3.3.html"> 1.3.3  Functions as General Methods</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-25">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                <a href="./1.3.4.html"> 1.3.4  Functions as Returned Values</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-26">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2  Building Abstractions with Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-26" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-27">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1  Introduction to Data Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-27" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./2.1.1.html"> 2.1.1  Example: Arithmetic Operations for Rational Numbers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./2.1.2.html"> 2.1.2  Abstraction Barriers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-30">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="false" aria-controls="sidebar-collapse-30">
                <a href="./2.1.3.html"> 2.1.3  What Is Meant by Data?</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-31">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                <a href="./2.1.4.html"> 2.1.4  Extended Exercise: Interval Arithmetic</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-32">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2  Hierarchical Data and the Closure Property</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-32" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.2.1.html"> 2.2.1  Representing Sequences</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.2.2.html"> 2.2.2  Hierarchical Structures</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.2.3.html"> 2.2.3  Sequences as Conventional Interfaces</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-36">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                <a href="./2.2.4.html"> 2.2.4  Example: A Picture Language</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-37">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3  Symbolic Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-37" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.3.1.html"> 2.3.1  Strings</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.3.2.html"> 2.3.2  Example: Symbolic Differentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.3.3.html"> 2.3.3  Example: Representing Sets</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-41">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                <a href="./2.3.4.html"> 2.3.4  Example: Huffman Encoding Trees</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-42">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4  Multiple Representations for Abstract Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-42" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.4.1.html"> 2.4.1  Representations for Complex Numbers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.4.2.html"> 2.4.2  Tagged data</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.4.3.html"> 2.4.3  Data-Directed Programming and Additivity</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5  Systems with Generic Operations</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-46" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.5.1.html"> 2.5.1  Generic Arithmetic Operations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.5.2.html"> 2.5.2  Combining Data of Different Types</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.5.3.html"> 2.5.3  Example: Symbolic Algebra</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3  Modularity, Objects, and State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-50" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-51">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1  Assignment and Local State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-51" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./3.1.1.html"> 3.1.1  Local State Variables</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./3.1.2.html"> 3.1.2  The Benefits of Introducing Assignment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-54">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="false" aria-controls="sidebar-collapse-54">
                <a href="./3.1.3.html"> 3.1.3  The Costs of Introducing Assignment</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2  The Environment Model of Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-55" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.2.1.html"> 3.2.1  The Rules for Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.2.2.html"> 3.2.2  Applying Simple Functions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.2.3.html"> 3.2.3  Frames as the Repository of Local State</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-59">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                <a href="./3.2.4.html"> 3.2.4  Internal Declarations</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-60">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3  Modeling with Mutable Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-60" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.3.1.html"> 3.3.1  Mutable List Structure</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.3.2.html"> 3.3.2  Representing Queues</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.3.3.html"> 3.3.3  Representing Tables</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-64">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="false" aria-controls="sidebar-collapse-64">
                <a href="./3.3.4.html"> 3.3.4  A Simulator for Digital Circuits</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.5.html"> 3.3.5  Propagation of Constraints</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-66">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4  Concurrency: Time Is of the Essence</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-66" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.4.1.html"> 3.4.1  The Nature of Time in Concurrent Systems</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.4.2.html"> 3.4.2  Mechanisms for Controlling Concurrency</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-69">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5  Streams</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-69" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-70">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="false" aria-controls="sidebar-collapse-70">
                <a href="./3.5.1.html"> 3.5.1  Streams Are Delayed Lists</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.5.2.html"> 3.5.2  Infinite Streams</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.5.3.html"> 3.5.3  Exploiting the Stream Paradigm</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-73">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="false" aria-controls="sidebar-collapse-73">
                <a href="./3.5.4.html"> 3.5.4  Streams and Delayed Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.5.html"> 3.5.5  Modularity of Functional Programs and Modularity of Objects</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-75">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4  Metalinguistic Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-75" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-76">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1  The Metacircular Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-76" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./4.1.1.html"> 4.1.1  The Core of the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./4.1.2.html"> 4.1.2  Representing Statements and Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-79">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="false" aria-controls="sidebar-collapse-79">
                <a href="./4.1.3.html"> 4.1.3  Evaluator Data Structures</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-80">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="false" aria-controls="sidebar-collapse-80">
                <a href="./4.1.4.html"> 4.1.4  Running the Evaluator as a Program</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.5.html"> 4.1.5  Data as Programs</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.6.html"> 4.1.6  Internal Declarations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.7.html"> 4.1.7  Separating Syntactic Analysis from Execution</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-84">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2  Lazy Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-84" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.2.1.html"> 4.2.1  Normal Order and Applicative Order</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.2.2.html"> 4.2.2  An Interpreter with Lazy Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.2.3.html"> 4.2.3  Streams as Lazy Lists</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3  Nondeterministic Computing</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.3.1.html"> 4.3.1  Amb and Search</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.3.2.html"> 4.3.2  Examples of Nondeterministic Programs</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.3.3.html"> 4.3.3  Implementing the amb Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4  Logic Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.4.1.html"> 4.4.1  Deductive Information Retrieval</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.4.2.html"> 4.4.2  How the Query System Works</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.4.3.html"> 4.4.3  Is Logic Programming Mathematical Logic?</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-96">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="false" aria-controls="sidebar-collapse-96">
                <a href="./4.4.4.html"> 4.4.4  Implementing the Query System</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-97">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5  Computing with Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-97" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-98">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1  Designing Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-98" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./5.1.1.html"> 5.1.1  A Language for Describing Register Machines</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./5.1.2.html"> 5.1.2  Abstraction in Machine Design</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-101">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="false" aria-controls="sidebar-collapse-101">
                <a href="./5.1.3.html"> 5.1.3  Subroutines</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-102">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="false" aria-controls="sidebar-collapse-102">
                <a href="./5.1.4.html"> 5.1.4  Using a Stack to Implement Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.5.html"> 5.1.5  Instruction Summary</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-104">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2  A Register-Machine Simulator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-104" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.2.1.html"> 5.2.1  The Machine Model</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.2.2.html"> 5.2.2  The Assembler</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.2.3.html"> 5.2.3  Generating Execution Functions for Instructions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-108">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="false" aria-controls="sidebar-collapse-108">
                <a href="./5.2.4.html"> 5.2.4  Monitoring Machine Performance</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-109">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3  Storage Allocation and Garbage Collection</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-109" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.3.1.html"> 5.3.1  Memory as Vectors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.3.2.html"> 5.3.2  Maintaining the Illusion of Infinite Memory</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-112">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4  The Explicit-Control Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-112" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-113">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="false" aria-controls="sidebar-collapse-113">
                <a href="./5.4.1.html"> 5.4.1  The Core of the Explicit-Control Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.4.2.html"> 5.4.2  Sequence Evaluation and Tail Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.4.3.html"> 5.4.3  Conditionals, Assignments, and Declarations and Blocks</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-116">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="false" aria-controls="sidebar-collapse-116">
                <a href="./5.4.4.html"> 5.4.4  Running the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-117">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5  Compilation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-117" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.5.1.html"> 5.5.1  Structure of the Compiler</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.5.2.html"> 5.5.2  Compiling Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.5.3.html"> 5.5.3  Compiling Combinations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-121">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="false" aria-controls="sidebar-collapse-121">
                <a href="./5.5.4.html"> 5.5.4  Combining Instruction Sequences</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.5.html"> 5.5.5  An Example of Compiled Code</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.6.html"> 5.5.6  Lexical Addressing</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.7.html"> 5.5.7  Interfacing Compiled Code to the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./references.html">  References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./making-of.html">  Making of the JavaScript Adaptation</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    5.5.7  Interfacing Compiled Code to the Evaluator
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'><SECTION>
    

  
  
  
  
  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    We have not yet explained how to load compiled code into the evaluator
    machine or how to run it.  We will assume that the explicit-control-evaluator
    machine has been defined as in
    section&nbsp;<REF NAME="sec:running-evaluator"><a class="superscript" id="5.5.7-sec-link-5.4.4" href="./5.4.4.html">5.4.4</a></REF>, with the additional
    operations specified in footnote&nbsp;<REF NAME="foot:compiler-ops"><a class="superscript" id="5.5.7-foot-link-1" href="./5.5.2.html#footnote-1">1</a></REF>.
    We will implement a
    
      
      function
    
    
    
      
      <kbd>compile_and_go</kbd>
      
    
    that compiles a Scheme expression, loads the
    resulting object code into the evaluator machine,
    and causes the machine to run the code in the
    evaluator global environment, print the result, and
    enter the evaluator's driver loop.  We will also modify the evaluator
    so that interpreted expressions can call compiled
    
      
      functions
    
    as well as interpreted ones.  We can then put a compiled
    
      
      function
    
    into the machine and use the
    evaluator to call it:
    <div class='snippet' id='javascript_123_1_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChsGMB7AWwAcBLAGwFMB9AQwDsATGgcwIAptQfQS6ATgGcqXXuNAAiAGYBXBngAuZAg1DS6SggLJ0KHBgEpQAb24SLoAVUWyBatQF5noAIyhzlrwH43nrxYAXKBqAFTqmorauvpqALRuhgDc-hIAvpKGybhJuaAAotBx+QBueqBlFLJUgdgEANY5eYXFlaBkDCSyirUcGlo65SiG2LlJBUWl5ZXVta4ATAAMQA')">compile_and_go(
    parse(
        "function factorial(n) {
             return n === 1 
                 ? 1
                 : n * factorial(n - 1);
         }"));

;;; EC-Eval value:
ok

;;; EC-Eval input:
(factorial 5)
;;; EC-Eval value:
120
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    To allow the evaluator to handle compiled
    
      
      functions
    
    (for example,
    to evaluate the call to <kbd>factorial</kbd> above),
    we need to change the code at
    
      
      <kbd>apply_dispatch</kbd>
      
    
    (section&nbsp;<REF NAME="sec:procedure-application"><a class="superscript" id="5.5.7-sec-link-5.4.1" href="./5.4.1.html">5.4.1</a></REF>) so that it
    recognizes compiled
    
      
      functions
    
    (as distinct from compound or primitive
    
      
      functions)
    
    and transfers control directly to the entry point of the
    compiled code:<a class='superscript' id='footnote-link-1' href='#footnote-1'>[1]</a>
    
    
    <div class='snippet' id='javascript_123_2_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChsCIBDAByIBsBPAfQBMBLAZyIIBcBjACzwBptQ-RmAU3rMAFAHsiovEQBOtALa1mtAG6DKAMwCuAO1YrxuvAEouoWYIDm0ncZNne-AEayC+9qNIFng0tLlFZTUNYjJyU0d+AWExSWlWcQUicT1qLT0DWiNTc0sbPDtInmjXdw4vHz8EpJS0yjCKYqc+IREJKTxE5NpSQXS7LJyzC2tbPWbStw9K338u2t7+hpImhxL+K3FKZnFZ6rw9AGtdcQB3XQz9Q0vmciJBZoWevvTGiI2+SxFxSxrdFS6bSPKL8Aj0ei0Ky6aSqAikbigUgMOKdbpEJYDTI3SiCAGyCIjfLjezrFqgLY7PbEvBwhHrIA')">"apply_dispatch",
    test(op("primitive_function"), reg("fun")),
    branch(label("primitive_apply")),
    test(op("compound_function"), reg("fun")),
    branch(label("compound_apply")),
    test(op("compiled_function"), reg("fun")),
    branch(label("compiled_apply")),
    go_to(label("unknown_function_type")),
"compiled_apply",
    restore("continue"),
    assign("val", list(op("compiled_function_entry"), reg("fun"))),
    go_to(reg("val")),
</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    Note the restore of $\texttt{continue}$ at
    
      
      
	<kbd>compiled_apply</kbd>.
      
    
    Recall that the evaluator was arranged so that at
    
      
      <kbd>apply_dispatch</kbd>,
      
    
    the continuation would be at the top of the stack.  The compiled code entry
    point, on the other hand, expects the continuation to be in
    $\texttt{continue}$, so
    $\texttt{continue}$ must be
    restored before the compiled code is executed.
  </p></div>

  <div class='permalink'>
<a name='p4' class='permalink'></a><p>
    To enable us to run some compiled code when we start the evaluator
    machine, we add a <kbd>branch</kbd> instruction at
    the beginning of the evaluator machine, which causes the machine to
    go to a new entry point if the <kbd>flag</kbd> register 
    is set.<a class='superscript' id='footnote-link-2' href='#footnote-2'>[2]</a>
    <kbd class='snippet'>branch(label("external_entry")), // branches if flag is set
"read_eval_print_loop",
perform(op("initialize_stack")),
$\langle\ldots\rangle$</kbd>
  </p></div>

  <div class='permalink'>
<a name='p5' class='permalink'></a><p>
    
      
      <kbd>External_entry</kbd>
      
    
    assumes that the machine is started with <kbd>val</kbd>
    containing the location of an instruction sequence that puts a result into
    <kbd>val</kbd> and ends with
    
      
      <kbd>go_to(reg("continue"))</kbd>.
      
    
    Starting at this entry point jumps to the location designated
    by <kbd>val</kbd>, but first assigns
    $\texttt{continue}$ so that execution will return to
    
      
      <kbd>print_result</kbd>,
      
    
    which prints the value in <kbd>val</kbd> and then goes to
    the beginning of the evaluator's read-eval-print loop.<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>
    <div class='snippet' id='javascript_123_3_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChsCIBTADwBcCAnAOwEMAbAfQMpPIE88AabUUABwoBmAe3IBbABRDe4vAEtKskrLqyAXgXoBnEtQDGAazwBKI1x7VNm2QHNKMpgDdOoKTOsES9a7SEAjOoyUDrLkQpSiTCTGptygFla2MrphSpQArgTOtNS+BLQyvOTynuQEmmm0USZmoNZC9CRC4qXWMg500RxAA')">"external_entry",
  perform(op("initialize_stack")),
  assign("env", op("get_global_environment")),
  assign("continue", label("print_result")),
  go_to(reg("val")),
</pre></div></div>
    
  </p></div>

  <div class='permalink'>
<a name='p6' class='permalink'></a><p>
    Now we can use the following
    
      
      function
    
    to compile a
    
      
      function
    
    definition, execute the compiled code, and run the read-eval-print loop so
    we can try the
    
      
      function.
    
    Because we want the compiled code to return to the location in
    $\texttt{continue}$ with its result in
    <kbd>val</kbd>, we compile the expression with a
    target of <kbd>val</kbd> and a linkage of
    
      
      
	<kbd>"return"</kbd>.
      
    
    In order to transform the
    object code produced by the compiler into executable instructions for the
    evaluator register machine, we use the
    
      
      function
    
    <kbd>assemble</kbd> from the
    register-machine simulator
    (section&nbsp;<REF NAME="sec:assembler"><a class="superscript" id="5.5.7-sec-link-5.2.2" href="./5.2.2.html">5.2.2</a></REF>).  We then initialize
    the <kbd>val</kbd> register to point to the list of
    instructions, set the
    <kbd>flag</kbd> so that the evaluator will go to
    
      
      <kbd>external_entry</kbd>,
      
    
    and start the evaluator.
    
    <div class='snippet' id='javascript_123_4_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
function compile_and_go(expression) {
    const instructions =
              assemble(statements(
                           compile(expression, "val", "return")),
              eceval);
    the_global_environment = setup_environment();
    set_register_contents(eceval, "val", instructions);
    set_register_contents(eceval, "flag", true);
    return start(eceval);
}</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p7' class='permalink'></a><p>
    
    If we have set up stack monitoring, as at the end of
    section&nbsp;<REF NAME="sec:running-evaluator"><a class="superscript" id="5.5.7-sec-link-5.4.4" href="./5.4.4.html">5.4.4</a></REF>, we can examine the
    stack usage of compiled code:
    <div class='snippet' id='javascript_123_5_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKgAsaAjGgBMuYuWp1QVegH16AUwA2BGfIBuAQ0VEN1EgHMAFPQqsKASlABvbKDugm8ikSYkpskkVYAjeU2OmFnYAPsG29hH20nIUTFQGAWaWoKHhkRHR3jQ0ivIaJIlBqemR0Z6KioXJIWElGbKkACbyBPHyjVUA3NgAvqKklLRu0RQa+vrtMorSFIUANKAUABbyMqP6ljYRjs6u7jIADhpU-iZJoABkF6ArGh1nQQC8z4sra2Pdfdhig5JlGqx5FVrGkHE4XMNZOsJo0pjN5qAAEQkAHyRHmT7fAYSNz0ACePhyMhoKhRgOBW3sOwhNzyHVGVEqD3MGN6-XEQ32Gno9Co+hIgJIs2ZIKp4L2IzGMLhJgRiO5vP5goo6MxPxxoAVfIF8iFcgJWSZgU2aWpe1u9OOlQthgZRqSLNZfXVnK1St1FBkmm0QJFlLBuzcNrttqtVRZmKxHL+sjIdBM+U9zTIig0TF0QwppvFkPe40m01lDwWiLjDFGeuTqfTONVbJdkjLCcr8hTaYzdH1hPtQX9ZqDdNDjMMwbDzMdauxnKbFaTrerHZIXq0RF9xtFdn7tLuQ8qIfHTqjv1zmjiGm8uRkVfbOKzYsD+2hBfhxaRp6o58v15rQzrzqnkjvp+qzfouXaGnem45tulrDqOw4HoeDZuEBF4gfON5DMuPqQQGNLwXuY7GhGbJHhq0Spj4jQaKoAAeByODymZ+tmD6SvmsKFsKgQlpR3jUXRDHyExdB-mRnJ8QJRzpoCFB+PQuFbqwGgHMYBpEiSMhkvICwEeGSEAW4kk0VkjR4op0F6fuxGHuJMYyP2MS6PIyoWWxUJSs+RY8UijkJnJypicheGuIJjG8nQbn4YO1kOpGwXRGWjRUDiWhhcJEUFCx940ux0pcQioJ1BEpZ0MlqWKOlIkkEFhmgElYWHI49zrn20FcQ5LQIvwBnRm4DXyPRTAyE2UV7B1jgEAiQi9ce9VlY1WjcecbUPhNXWvgAzLZCWyAoACOq7kGuK2sblHkcTKy0UCWB1HWQaKzRqykANarHduoPYU9Amjl43woiH3HYiCwPD9k59aAQMPU5AUegpfr2Gd5oxURcX1nVrRMCYsMuR632-VBD42mDT2coxnr+XjQoI4EP0biFbixRQ4MY5D0QuQcFB4nI8iHZ9J0s4TjP7OUPas-+7OyKmONU65pMM1uZREBUu4EztdWZIoNBkC9uEi3lXnXSWF46y9tWQ69qym7rY1GQDNvm6DxoQ3NjsyKZ5nZX9A47szJFfLtMgqQc0xkIuduPp5nEvj58oHKHVDh7WZOSMhVWZZHenjq7GppvotOnT7MFq-7Ad2W4JA0MHTAF4YNAHPTq3nVpKuVA3EsV4QJw4-n9eN8LW42h3qduBTNd1yPivQSGI+RvgyGMAQLDsFAcCIMgfCCJt7JzSMTCroYtHCyLtGgM8jyLAf8jxXVVsyMhhjSaicnYwsnsLLqagn1uBWlawBwaBNAfoZEGRVip2GfrJeS78aBmU-iQb+udOSJTYIA4Bj8CA-2gobGOsoCAljjAAoBJBYTIQtnNdOUCnDyUMFghmIt1pTQIaAHqyC06GQ9nA8y9D-SMJmJ1ZhCwZrsLcOnL+Jw6CuV4aCX+AjJp0IWNtW+lsNBvU6oGbCh8yxySFNgtaANHLelXCDeaQoPSj32EYlcQJjHyH0S3J8eDZh2JLNYn0FCNTuNXCNOguiXE2IcSjP2YY7Hly7p9bWvIDCqEQZInUQpDBfyCUzMMyTRHd2xp6ZeqIkmIJSSXdJbM5qRJoAoD2PCZI6VAMk6wERZHQSOCcOhVSEFILZDOV4qxObc1iWoeJypz6gDFt0Lu98cnknxN2egCw7FNwaQ+Jppx1KKBmaAOZliJnvRWQpLZmx6nbEsoOPZGStlaOEi01E+ykaHIfCGE5pFgqDV0bCCRLAEnCh2bMrQazvDcm6fkhhv9dT6GWGpaZlgL6gFyAYMF3ofrgMiAAflAEsww4yqngsNGs+F5h37-L6eYRFEQABc0KQVgqmdiywAAeclsKliGFxcS5FNSmAsH8IiAAKtkUAykSB4k1LXLw8MoZEATtMdoZLESgAANSgBZRAuwJg4gGCoAQL2OzLDytMTK+ViqlUqviPodV5lcVEqVXYMlfgOWGG5bygg8gADuQr9AippmKiVVApVIjlQqy1xUjVqo1VinI9MdUlj9QaiBQaTUhvNSoua2saAvXFeBIkdjQ2KDaSfJ5iCpjZFUrUvhERgr0HDllL56yfknzqErDwbcs0IoDekFFX8C0N0MNGpVpTon6D6QM-GySLUttJVDFZ58Xgky1d2uoKKbTMtHekMl5b8hqypWGvFixQk1tZHUPodR1WgDyWoSdl9ljdIAb0t5UiLEMLqDamgyzuwlgAKokCyE0YZqI6z7pqas+Q96SidK2UMrGOMtknr3Uqrcq6ChnI3asy5gI8WzogWcuZyH7HQfSAe+weGiY0nbcmot+TE15yYvydNlVM2Ie+dmmpgK+F5rUB20j38gN2DLRWpt9H5mWvra3VWiHm2jrbfmkjXal0RF7cagd7zXLDrQ6AFdE6oXTohcpuwKKFCegXT8+jI6l0rp4-uLVCwQwJuJT0f1JQj0nrPV01QV6eY3o+bWkoj7n2GjfR+khjRv2AlAAAWmC5qSjHzf0lBs0oBQnHIggaqWBnu2TMVFIE9BODWHqO7Kqah6TJQMM2Ny1cnDkQCOgAq1uYjhaoPzzAIvZgbAODr24FvNAPBd7kVkAxKgrAUpUDUKsTBpBB44IuvleEYgSy9f69QIbnjOSzYG0NmQfXQ7U1GLeMQY3iao2HDt2ynTlvzeG4ZRgl8CqIr-haUx9gLQBvy+kP+do7t2DtI9uY12AZLLe6i44TBPvfdlIiLif2uJA5KH-ZWFRTEw8UBAp7kQ-7JXoKHDQeJTGo-R4K4qSOIh-y829rzlr8f2D-spZYwdvD0BBpTpY1PGB1DJ3YP+sq-v2CPgsPEkKAB8oAz7ytxyz6FANgsc7sFz0APPz787PmF4XX2ocAwAFQS+PbRbnfOBegBV9LuwIu-7AHV1LmXjw5egDAIr4HsxEQAFITea+l9rs+dv9egENwDC+HPTcu8czzpXz2AYAEJng+6d2bi3ofL4B5t3amljutey513Suwsflcg5pY8CXvvk9nyz2nz3IPeeJ+d3n0A-PC+B+RwDXn2eFiRFz+bnXdeq9x8RMH9XOuIjN7sMH+wx9EWsmO3EObg2zt9Ry+fYlylVIWgWCd8fIC+qsxH31lbE-jzEm8AAK1bCzafdRZ90NIMnv+i+Fu6X25UQ7IvIgX83ziVm2A19j9WzORMF3Reyj-k0FobRGhTE-9WgSB2g78CsM9bdIASAQCUpMcG9oDYDuZwCICa8Qd6cZBYBIA3sMCsCUDUDycAYMCABRP7Eg-Agg7-W3AAOQ0GoPV1oOoKM0oJKGH3jAoFRVHw318XLETCn0eBnxUjoWTxtCwQXy4NOx4ObCFm6Ff24I-z1DmUPxKGPwIBEOvzoRZHEPX0kIUJkK61dAlR5gf2X2PBPxIAWHziugKRDkUB5niBkD-yYDsLkx3w0E0HLTiC5ik1HRMPW1yGVAjh22rwDSsK4gxEiEeTql0zTTc1cgKWeV1FeTiQU3xjQxDiSKfgkKX3ThEwWC03v2yPf3YL4JEwoPsAyNISyJ0JyM4RoF333zWQKIiBML0POR+hCKVQvWcy5lcxSNvT0UjE6W6P0G1j+UqjiI9CGRiIOHkwGNmFZC7gmE9EcBNRMD8HRQ0DICWDaAWFWK0iuSBWgmUm2LaDtWWM6jWNfnREMH2O0g1khjdCXDuNySeLW3LAPmPAKT0jePiBVSIC+MsTeLsUEkMF+I+IBJxH2QWWihCWHBDHBP+MBIeKTWyFTVmNmyzQWAbj8EXH43sE6W9CGQVB1ixNABxJ-HjDKy3CJKhWAIAOJTbXZSfTJMRHfReiridTcApMXCkDcAVBcjQhJXRGJTJT0m9HCWCmTXRKmHPCUEMFTF8FWQWEVKUAOJQwYUJK0GJJ5FJNVMqm0hVLlNWWpOglpJeHpNAMaEZLZVtX1PVOqTZNIX-ytOhWNL5PCwUB8FyGFOYLHUsy0BROejUVWBMMGiLXogWBOJ2NAKNKVPxLsHs1QV4L1HDKSXohZHi06TICGTaPDPOXTIODK1uRpEMG1zIG6AiBiwAykDUMMAomNNBPDMzJLQJPYL5JMC-2lLTX1IVONLWXtPzN7ObOLOLjLOTz+JZkrPw3-TiyTNkFWJmD8CbIzI8zsE6UB0vguMXPWP8GjN2LBCuOXPzNWMLJIjrWgnHObwuJ0XhluIiNBGrLi1bLsC80LN8w5JoC5JqSGgyk5G5gOEA3iE9MFJ9KizsD6EDjvhDOJEAspKXDTPDKjK2JjOqX1LWR5KfxPk6QbiGW7IxNH37lxJxEElgrPOxLgrxLK06RUhYDIC-2P0A2b3vjDPoiSWQtONjLdPjPKIgUwqwnzJ5NIQUhHOnMIz2CvP51sPsKXCcJcJiTcI8LIC8NmGaLsAbmQtUgOGT1Ui3Vop1h+iDNdAi1uPkCPOGkNKhiASYAegKT-ieNMR3NfgdNBmstsvI05HviePrPLA4tQrjNiwouIqGDWQODIGwvbNGFricCGW3LMqXL3JQoPLeJePJEnPPLbPLGrR9EEh1MVCXBBLTPSrErMRMGyp8TEGUPSGiH4s7DTMKozJtPvlqoQrYoaoOD8oPPQqCvgtE2XT5RgtYtUnas6q4vQtNIfEkvi10x4P8QUiiuWPowqtIDLNHLsDuE0GOkODICfnCs6Fswgo8skA2vyBhjCt2pPhmtvJpl2oszDBvL8TvLConAVSgtUXUTkllEnNGrQv7J6rxIWAIFTH0AX3Cs1PbKSgG0kHPWEk9EhtvGKtBHnNguCrqrYvhqGBbOJWzLKihqXEqsvmasopIrTIxroE6JYPSH3LGr+vJOJpCrWpFimpfKXSusepuqBrGAWDJvxpWoyoIJOq2vOuev2rUsqxKqfMAxZrfO+qRAACE7hFhYaOzYhISUF+SeRQL5BfSJbikNRPrhQ+Z7p7EjiDEQcDbTFoZ7EMkDaeDypMxbbJzPioTTbYTYI9xYb3ikSoSjLJB75vB0xyBGVZbqbfr4zAbgbQaIqsrmgyrL4A7TqGdY7ZhEaMg6yGylTQTk6sa6hOlJyuy0SezjS+zw7uK1Shzi7s7GatxmaxbEy6yHrzEObgac7KblUnBZqnqyAFh87GbR1Jb4sIDBazqdqRa67KsxaegJbZypbiUZbfL5bFaE6g6Vbnb1aQLvTtbwKJ7JY3ZA7tiS6lA7KHZ96lhTF9TLFl7tirxYbDAr6Gcna1a6BviND76vbVbASjqx4zLDB7jXb-oQdVjTF7iMlognLjy2Lmz-7cwnErp3zfIzLFtJBwHhoTyf6oG+Eh4NDRK9bpwSjEkwloGqC7U9DTEwlQHYx8HPREKMyiHcE4GkKkRSHLE8z6ICyMGYTgl3azzLFey-7MH2oAZ9TgGrkKHZTM6aGiy6GJsjZ4HQdjSkGjJGyK6lSzyiG9IcG3q5p759Bq4KAaAfKTAfqArlTUUwa+FOlk7Yq9Hq5k7DGLASrkbBy2Kq6sz2z868LC7Zjezuqy6Ji2Heyq6SqSyJLtc2am6WZbqVbWYqyZ7azj0wH4rdys7YbW70gNyzLYqO6UHNjOLqkUHSLTygniUa6wmO7rrImwqFhG65rTKNgysB7pbmT-BZbEQFaAtdG1gaBV6n7hgNavShTt7IKDDJBOn9HD7FBj6QcxmaBz7jTLEZmb7ZRFnH6vj1GNCVmITP6ojIZAFVIExdYCkDm9ZEQ9nFHUUiB6BGVjmlqTaBGHxjm7UDhLmz7zAmVAkv6Br1F6B3CgQQ6kquKbmzHo6yrVismViknX5cn-KoZRhdZ37LiHT7H+ambtcWalVnmrmAgtiXpqnyn2bInViUXR1h7QzR69qtMp7cG-aYKKYn0-mF7Q7nYcWo7wasqwWtzsnIWNimXYWcWEXUqGWTAUXSnk90WY18WImFJViF9O1jniWW1SXtqLrRbpMqWtGNQfmhs6mpnbctW0Q9izLLE6XHAdWiG-4TWDXDzLFjmBWzKkXbXVmXb7m3b104WXp3617n7fbuTVJ+HOH7YQcG4RGUMxGWqVypGXWJQesAc1Grgo5LoCobRmySxg3LFw3BLVIM3aGo3fZuHh56a0aizy5gps3ZihLGgFIy2ClZ5C3WqizPmWK-ACAn1WB7HjG-GMK63QrzHQQaK5pL44KW2mBWBg4zDU6oh07ZAy2wTAS3GsqtiSKCavnVgZ3F2hhjHx6CDfGWqYmShRXm8rADrUD13OwxAyz9qlXha9rj21Xp7YtZ6H1mn23F6Ash3W2em95+mtahnqW3B32R3Z3nWA3iHTnm3W3TFT2SBLEAPR2oPkX1m4TKh0qHyNXPKYLBpWwiAl3DIX3fHeWt3ioqnCBI6+XdYKKEyRYbR0rHN5QItEQmqYLvL-m8mTGu2e2-T7AxTBwaOoVEQLbGOPrb6WOYWd3G4I6ubgXRSS5eOXhER76GO50V2PZT6X3eXfHOaQapO6huOdxZPL5EQZnFOSgUUdGbG1OAWw7ArtOShdOOh9OkR9XjPW1lP9WLPWOyPcWbP+rqPyxIU5PLXnPWV75LX3OYWgXnrpPfPhXaPYOguIhTPBrwPAOROuraaO4o7pP56jGkR2TOS+nvb-y8RAKPSBTN6dadntGYKnWHbnkCk0U5JaIbphk25LEavOxGuU6-PEP7O-PQGtmSbaIsOSKGJSSaPc3t1hxEbd7NWO72vWrhusJRudrZblvLqO6QxVu6LUORm3BxVqI5J36FJ862OfqQWOCwrwXLiEroWDzTmyBt6QNgarucneXERNPHv2zjmhlQ67VjnPusqO4fvLO7Vd2AeyqZrvVtLL5IeBuBKhuyBsOlu6KSrOl755BoflPMPEecO+oSqlIhCqBk9IeMf6yKbKD0fVJ5u1hnl6zeLKDurCOlUmWmeIEqnWfipNPye26IgbmOe6gR56fe7G2YLByhQmBzJ7TLLe6iG0UpfUQe7yxO4Ikmv0xKBxHYtbRnlDWHpx9c06oVhFA4L7GBz+zoTc72zQCmv36hlgw6vgni5ohY1f7nl37OOXPHBdftWTv-tml74xfYhzIrfPRZbe62OWRo0yVPf5Bx8n5Y3755uXfrf0rFfOyt1xrdaQmmZnlHNLT2gUhghRZG1Ov3fQAUVo-Y+xYFgxZS-rVVfF2NekMQwS+r8je-AfWN60JDAdEWAKhlzOuzuQRqt6-1f0Lu+-Fe-chhoB+66Tfw+xXCP9vnIju5-O2zuHeIClYleN-+6O-75HmT5cgODvvL4RlQRgpMXGVj46liUT-ff-And5XVX93oJERGg6A0RM-7AL-O01z4n6yG0wmd1mk2KhvlEQxBFzJ5zJSwAAA8rAG3qxMH2g9TKmVX0aY8SYwAnfrz3dZDJrIOLPusXDQE78KsFWBKCQAGxaAqAAALyBB-87+Z-C8g+Df4f9EQX-LjHVGxy6AD6gIHkGMDuYlNjiGUPgbFxebxcTOFzK5pHz5RCCJgsXYNtGhRR7MyyUgngT81kF8d4gFA6YDQLEEudNB1ASgTQOUGWprUz7J0p+W-KOB+YZVYCsc2FJRkZB1tR8iB04EUBtiIvdRDk39YE4YqFTL-IiBVykAni7QNXCVWCiuDuBjgv-kpEcG0dliug1lH4JUGxC+OumBIS5zsRiszEc1IZHYn2oVYIEpg21KoL4H5FKC5g-LmCGsEcFgKIXblkwAq5VkXB0gI4G4KWCfMSSO1N6HiB15PpK2BSeHKZTjBMB+hBqFFHn2tJKprUh0LQIYG6FX4dwNoT3n0MMql9WUSw1sCsLWFjpOhcw+QD0Mm6VBlhIwwyp8xqZ3kUGBSHJoZycDnNwmtTFBrcyuH1C-utwt5uQ0q7Bl1EoBJ1DIF+7nczGwPTwS8Pu7g8OCmnIEasGuEfdqKX3HAYTRgoH8SqR-JzNTytpDIGB5OGKt0SB6XZ4Q0OcgQYO0HvR3WpiDnlNUeaIh9BH4YkeiBRYoiCmowNCHhXxE-YHuUdFUgDA+4Sd6moyUtHVC0Daxk4UIl4d4Lsx1ldhllRkcBH86XwJhf-Q5OZXeDMjB2sbAqJZTqHmVf6pWbnjz2lFoRGajTaNG+UsqIgAAsirGoChxBUzQEAvnxQbSpDRAgpgQU0FE6xnIgBNgYQDqj4Vruu5bURqRZpakEcl8SUQr0PIJVlRuQaumaW1J0lnSdoyYUqiZK2pTReXL8t-XMq+kpB4pQMg03P51Rse2HWgfOxsFK8rufglVsSmRpiwTeIAxgTSGYGgFWB1mOJuK3XLtlluQyankWJG50URwPHJXhGFvYlBluF7EcekGH7DdaBxA5wfyMhgRDGUJQiYNEMEG8D1BcnBMEwBVAKDj0aLKGJK1qbEduiaIo2gLAIEZYHwvYmcRPRMHSD1xTFOTpOUFGetemvMfmMDF3EHQshJ4uHp2HREw8+Y+Q5IQ+No5ujhRfo64ruPAnL8UGIEtQY+IM5xVzK6Q+wCil9FwS7xy4xCUiGfEVAUavVVCdpjpoXZ+cR7HEY3GJIJxMiFE9jhEQKG2d7xCE2jv9y-Hut4JwgvjmD13G0SpBb5bCR+UqFWDVwZYgank0aH4ZmhaOLge0M+Hod1Ev3AptpHY7c0J+OQKfjTya4AjQ6kIrSM6j+Eg8ysw7VQChTqaRjtIyeNDL93lAVB3Rh3FBjcSUlXIyhGWJUcpLKzWS8JlUMHm8znighPJvBfCaeI-EPQRSSqMEprU3rj9xe6k-vtrzEmoURWxxSzp8y3GzBQ6BSayWlJuILMuWSoysbyycmBiQO5wm6shJu6FT6hDpEttETymRiCplnQ1m5PDGEM+E9wu8uVP9GVTmpKGJ4fj1f7v9mxnzIhAcEZCCw7q0VZrtMBIAvQ+BAwvaEoBUDqAVwGYBIMyBtIjSxpvMZQKoGMSrSjAr4Bak4E5EzS5p0nf4JMmNAbS0EW07SAiCOlTT4gs0lcedMoYpk5wbYeClUGukAItpbRUCLeEOn5xjpouU6S9J077BUIX4DCF9PWlKdNpl4KGehE+kRwgZk0k6c9PsSvTg4EWeWFdPhk3TLwTxPGWYAmmLVQZmM2vvsB5ppRwy4UZiPjPEEIzVgNM-xkJGqj3TgZj0sGVjIhkNkqINEOmX+UihwymZhM1YMZAzgMzSZ26dGRTLOl8yFpIUwWKXxRTMz3xxtYwGeK2pyw7yzIMmSDOmmUy8AeuRiVrDNjfSCZv0y8I7E5lyyjZCss2QuRzC4wSZFgH6aNMvB+Qtsm2O2eTIdkrjdcwAbGbYSTiozGZLndWaHOTjSzmuD0jGY7P6pvlXwFQjMXyzhhChFgxXQDKFnmjWzHoHg1YMFM1mgF2gayVgHAnVTeo1kusmmLqxd5lyoylc1oMJGZYZz9CaHSQD0hkqFd-x2sr6JlOq5-ilwVtBUvCHT7jzORsoSUnVHVkBygQ884+jzNo79gEhiXdRMXIFg+FLUf8HRPEBMRbpZ0VfWdAVBmZ1MSGfifeY9EdDSd55tHYPqhLbQuZXxW+UedsLJQJ9h5Gsrecpir4Tjiof85TKfPM4+Mnpc0icHJK7mkIZATqFKAznnljyeZqfD+iRStomgtw7MvwP0gSC7zL5ngR6LqOKibzjohCi3vnLhA8zEFlMjvurIUA7Tlp2gfafA3jnyzA5E3JIjArgUULMZ28neWAomCkKIgn83uSPP7lAhmix8iAgVAen08Cc8Ibyiwr0I8MIFnc-qOLKRaMMWFi8ohhwtgVU4EFaGeeYIvsDCKUFWEUec0UJyIJ0QxioPLKBkW2K0CswBRVzJck89CCsoTtKDi8bUZzkNi-nsBiobkVDydqL+HSMdD5iu4Uc3GfjDRn+z+F-AiIJ0kQx5VtQyoajF0D7btkQScYZoFVSVTMyIp+VdJbRmNAlhvQuqB+RNRpDRLilHoJqMJCwXGosSaGHJXAmqRaKElTUu1BUpnmQxalaS+pZgqYDYKjA3aOjOVRZntKDZ3MzGYa00QSkdF0CvRfAoSW8KlURitDMMtGXrKW0VitQP4ogJtLmgjioRUPJEXfzjouy6TPst1S9LTlkBUMJNNkWPLYO1ytul4reKIY-FLy0dEosQy-KW0p5REPcoCVQQjAiIMJVoQ54uK5Z7iCJTQvUX-SYZ4cmWZ0p5kAiUll8ZFSjNQUrJMlSS7JTYl8R5KBCLaQpTioXAkVSlSQcpVoEqXPJt6W4AZe6D1DbLmldGVpcStyUdLXFrC6pEovlGIryFSMm+ritjkzKE5bCrJVlSRm5C0wH4NCGKqpXmL8VzIVHkSpyo8r8lECQpaKoBlYQaVFgOlYoAZVNcmV0EFlR8gaUKARlzSpGY4uOW8r7ZXS0qrOEMBCrIwKI+0nGFICvwhkAABlGTBQfhjfVuD4A2KH9Gyvq8xJuT8a+I-VfgP1PwH6lrRo1JCV+IXMb4BjElxcCyfKljSmoXevwqXl4F8D+A+lc0dWazKlkiyfI6KymQwhRGeh76uk3svx2vgqdE629FESoFbUIj1E7aggD8mtin0e1MVDQAQGcpJQ21xdeUFOuXJJRx1HBJsNrM9B3yyVGyhJffMZVl9NQC64aDOrJTzzkRMVWYtquxXizopryIaA0pai0q3w9KksFUtPUrqSVTFPOZ7KBADRb1o0fWYR0UXxg113Cuaa+s1DvrcyV6n9QxGDiKBrogK9IA2tA24As+nBRpXaoSDdpblhCPBQfMcXnrpl6RaidAuIUPQFIWmUxV61EXKz3lW6kHKCu3aTyxa0i2+l4uiDDqAMNikJSCvpXQqee99CZnQi7VB0Il+G9sH30qikaLkWmSorCCk3zVhN2xbmu+peWyaX5qCsRbskU1LBLCKm+npOunVlRK1GoWhWIq1n7RJV-K+abKVlg+z5YfMVWZ+rGl0IUsrs2JQ5ss2LzpO7KzDXwpBxhKcNQoK+YcoKVXrwMlMOze5v2hboWFyIRlRQVM00bx4tcyJgdBi18rF5e-GCszLIS4cPQEvHNOawBg5bTCtYBBIHxzSfNUE+c3LX1CyI6xrNsDAqMtxw01bStv4J0AqiiXizatW+fLeZDIBNQGtPXNWINrW7Cqv1vWkmogm75Dbe2qGqyGGDG3bdjNeDchZLKFkczNFGWhJYfxipiBYkgfWdao0hXi9McZWFEQZuXLGRjt8pedc5WMiqhj23qgEPxBogbro0G6uTg-L3VXbhoN249QktTU0g1N8m95e62JBLgpNtGxjLCBWUgaJgMO1nK9oEibLLUlGt8RYr2UAwoVbiujbMAcUnz5FJlFhUzwKheL74JW8hAho2XF0Dt-WrdMCqhUIrCFc8lHSZG4TwN6dZ2vjXUD+2ykBZE2raZLM9jwNluh2iXntvBGtsfkdgS7OzsODthoE2MM8sDr2Cg6v5VtcjUfnOVmK+5NGz7TjusUzY6KuqfOKaooK3LLd8IcXf1oeXeVTtByqebMC8VU7OEuO-+e4u41iBwl9ukyo7vPrwgvFiRaBZMSFBcawVCWIJcO2UgmkHlm-H+vKFrgW68dXuxUaEusWibsa6i0eSLs50ptH1pqtxDmHCXDT1F0ciONtpdUYq2WZVA7Reqc25BzCfW38ltozIlgfdz6+Lc-w7ELthUyoShrHR1XFRj8+cZPIUvzgmqzVKoX5fnBEqrk1d-7RiE0pwVG6ndTDXDQQs92FF0NOyv+J3o31Bb8FEegrDOGdoTwCo+cd1CzHfUdE666s9OOHFVhIaVxq2xsOwXP3m75FtcW-QCMcCsYrCPKr-P-vkhAhAD7S5-GnQSaADKg4B2OvWOLgY7X5Zm6NIAr8225zdIWiBJfv92YHnd0U6QnajFjhKUWRoi3llR5VdMZAFxGWJ6DH2brLUGui5VrqR0lANhABn-UAd+VIGNNBuhngDAY2MaQcmBmncQwd14HiGXisHIfLT0FZgVvShFTv0Ey1iQw-+ieL-u2HETKD+jagx3VoMTwpBPmsZUuit2nLtD1cGg9yDoO1wzD7Sqg3FV7i1x5qYYNQ3AeEgQKmhqi+aM0HsNctHDdcNw5Rxxo+HjJwfCeEMiMPvL7Kyek-WwcHCBG78PB8xSgfQM9Kn1SIEQ6nseVJ7RiWB4qDgfyp2oJD5O1SKcwByxHZDkQeQ7xu6U5GLdihkDoMIRKcGIDEfAmSEafR6Tre+cbzcvow1GBTDYtSg6Edd6T6hjdhnQw4esN1xmj-aLg2-rUXkLH9gop5fEpr0WNOxRRUdYnVu2VBTmWx7TWCMb2TB+1yndtSVoU6wiF2B6kaIKN2NFGbjT+i3XyJQErqetCOj9V9oM4-aUU-Op4ypn5UlUQOTBvXdRuNra6VCuuqjZcq+iG6QcPu63dPMEUsaf8Qe0oyYWp21GETvO0dAJt7ImF76om-+c-Ak3qbkjysiExAhBPQmWDymC46fVsNLHSAwcCVKsZBklbMtgi6k5js02sGWiBx++qct0VcKDFqBNHRASSP67NZW7ffaQDN0xHRDrOeEITspoFHtQbJm6JHpKNFGjCTUGoqtkxOR6qjiehE7UZEM4meefxwUQiqOztkXxqxLsmvt1QH6eNRejIzEcC16AD5wa2eeooO22ENTUq3NfXWPQPTaOFSy4NcDvnR4EGgYdEPFgJ4bzNdKR-HXalNPRp7TZlGZHCdUpLoHde84-fgdAUYqLTjB-3RUvwOu73j4iM7RUcqPe65TjoU5WfOqP1HSDcTezGGZjOumZU8baMwFxL1-8QMzJrcAOollzqDtq8xYg2L2CSmwTP81I+90bNcn8JDp5E-CGUz5nN9gen-HTpHM5gmzm58s+ke1P-xJt7WuqrWZkP1nwVaZxs6WaVQtnE9Ch05ZOZzCnLYV8S2UK2d93KYz5xZ6he2aQGdmuZ4Z+lZGf5UrzBzCZ5KUmeYMpnsDXIuU56eC0UFMzBcdc7KCPOFGezlZ0o27snz9a6zlR4FdidkVPmIVChoCzWRAuTTQA3ZiM32e3V8cpz8WN8rFrkRILZZyxYZDQA4JElc5zMoZm2OGZdwUGHgeQO0HaDGBa0gmZ3vTBRRiwATJMDvuJb+HNzvU9wWS+NhiCqoDplgRS23GUsaFThkC3EJFpuqUcDYe0WIByoMvEN6YdnUuGOBUW7dhkklytpBI2IHQmp1m2sYCAjX+AZWEY3chJakv3AHNCxvlBpeEheXTgfMXy9IyEyVAAr5aupk1ISqyAK5yUFuRFei1RXuTyBik+Zv4Cgw+YM0IhnOZhPiLsdOMUgJmDUulzmgeVnqPHo6g5XHUjgK5Y1Y8vSWDoM0ePYqMyvqWcrmlkq4edqueh6rkUNS9larl9W+YrVuurNZit5WZovFWTdi3bkIxFrW6FLTtf2jrWO+HUaa1lFKtQwKrE3QYfQB6g2l6AIgRWclfRSCkNiJMVqxdbaPiCTr5AyKPuHev3WqZaKN6xPLqs-WCgf1va+tc+btX1UnVreTddBiXXGjMB4wLdaU5ixsZ-ll6-4GBuI3PrLnGGwQDhtXKIbeN7zbG1xtUErwsNvwFvNJsfWO+kRtcweP2jnX+rJ8GsY2gdMIHxK-JYjXJuTPFWDobN8qw0zbHZ6sq4Wy4rb0HDc2d+9mJq87K1H9XAarmolpGewAABIIRTFaVs3dhbqtrJJcR5vGnFkfRnZcplUNZnZFVVrHVIoESnWx5+CNW0a0GuuThrTVha6zYfOTXqbRN2m91fqFZXVr41t2yYamwu36mbtzawVDc5S2iWipiIJtf2uh2jTxDULvHaNZZ7Waot4geLcvE0hIjVtguHtcWtlXDrTozw25Yh2dhodPl0AJ7HfGDy4LoJ6q+8p6vhXzNd+Fa6Na9t35k7Fl1LR5vTmbYFIjdtLVFZJO5BJNgt8EyVfLtI3UNtthC04scJg3WDHd5q6nfduhW9Jnd9m3fm+uZho0Pd+ay1YoKn3cr5m9a9z02vRoU7wtigg-dFtRW0pqgB6N6HHJtS6pyTSsa2AYUd7gapiDjQoGqV7A0pSSD+4GU+aXNlyvWRJPUT3yUAObU7XxMQgwS4dEH++E29jlTCS8NzlqM8-5gvM1RBFVCJXTQhV1YPkHZDzhKLuofGro0iIGlMzKYDBYv4Jeai3OVQcEWzCDDnBy0Lwfx4ctwWZCJw-vY1kWauDjHPXAaLIPdaXhqOdAt0aFl6Zz9WvTUOHkXZZ0ZXLvindZ6FLNtmUKfcXrjM+3PMUDyZiVRmoFM-7ljkx5+ywrWOf7hmqVpA4AdIhuRV8VcGA-MtphZg-9iUkMXL3KODGoIaSAoHeVLnIYw6ygE+hpG-1rkxUAADrdotwbgKFPwCXSpPpMKKLJ5QRyfGZhkuuQgIu3iezC3AYWNhPYEKc3nosdIzoEAA')">compile_and_go(
    parse(
        "function factorial(n) {           \
             return n === 1                \
                 ? 1                       \
                 : n * factorial(n - 1);   \
                                          }"));
</pre><pre class='prettyprintoutput'>
(total-pushes = 0 maximum-depth = 0)
EC-evaluate value:
"ok"

EC-evaluate input:</pre></div></div>
    <div class='snippet' id='javascript_123_6_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChsDMBDAYwBcB7AJwEsCAbAChQEoBuIA')">factorial(5);
</pre><pre class='prettyprintoutput'>
(total-pushes = 31 maximum-depth = 14)
EC-evaluate value:
120</pre></div></div>
  </p></div>

  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    
    Compare this example with the evaluation of
    
      
      <kbd>factorial(5)</kbd>
      
    
    using the interpreted version of the same
    
      
      function,
    
    shown at the end of section&nbsp;<REF NAME="sec:running-evaluator"><a class="superscript" id="5.5.7-sec-link-5.4.4" href="./5.4.4.html">5.4.4</a></REF>.
    The interpreted version required 144 pushes and a maximum stack depth of 28.
    This illustrates the optimization that results from our compilation strategy.
  </p></div>

  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
    
    Interpretation and compilation
  </h2></div>

  
  
  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    With the programs in this section, we can now experiment with the
    alternative execution strategies of interpretation and
    compilation.<a class='superscript' id='footnote-link-4' href='#footnote-4'>[4]</a>
    An interpreter raises the machine to the level of the user program; a
    compiler lowers the user program to the level of the machine language.
    We can regard the Scheme language (or any programming language) as a
    coherent family of abstractions erected on the machine language.
    Interpreters are good for interactive program development and debugging
    because the steps of
    program execution are organized in terms of these abstractions, and
    are therefore more intelligible to the programmer.  Compiled code can
    execute faster, because the steps of program execution are organized
    in terms of the machine language, and the compiler is free to make
    optimizations that cut across the higher-level
    abstractions.<a class='superscript' id='footnote-link-5' href='#footnote-5'>[5]</a>
  </p></div>

  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    
    Compilers for popular languages, such as C and C++,
    put hardly any error-checking operations into
    running code, so as to make things run as fast as possible.  As a
    result, it falls to programmers to explicitly provide error checking.
    Unfortunately, people often neglect to do this, even in
    critical applications where speed is not a constraint.  Their programs
    lead fast and dangerous lives.  For example, the notorious 
    
    <QUOTE>Worm</QUOTE>
    that paralyzed the Internet in 1988 exploited the 
    
    UNIX$^{\textrm{TM}}$
    operating system's failure to check whether the input buffer has
    
    overflowed in the finger daemon. (See <CITATION>Spafford 1989</CITATION>.)
  </p></div>

  <div class='permalink'>
<a name='p11' class='permalink'></a><p>
    The alternatives of interpretation and compilation also lead to
    
    different strategies for porting languages to new computers. Suppose
    that we wish to implement
    
      
      JavaScript
    
    for a new machine.  One strategy is
    to begin with the explicit-control evaluator of
    section&nbsp;<REF NAME="sec:eceval"><a class="superscript" id="5.5.7-sec-link-5.4" href="./5.4.html">5.4</a></REF>
    and translate its instructions to instructions for the
    new machine.  A different strategy is to begin with the compiler and
    change the code generators so that they generate code for the new
    machine.  The second strategy allows us to run any
    
    JavaScript
    
    program on the new machine by first compiling it with the compiler running
    on our
    original JavaScript system, and linking it with a compiled version of the run-time
    library.<a class='superscript' id='footnote-link-6' href='#footnote-6'>[6]</a>  Better yet, we can compile the compiler itself, and run
    this on the new machine to compile other
    JavaScript programs.<a class='superscript' id='footnote-link-7' href='#footnote-7'>[7]</a>  Or we can compile one of the interpreters of
    section&nbsp;<REF NAME="sec:mc-eval"><a class="superscript" id="5.5.7-sec-link-4.1" href="./4.1.html">4.1</a></REF> to produce an interpreter that
    runs on the new machine.
  </p></div>

  
    <div class="permalink">
    <a name="ex_5.45" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.45">Exercise 5.45 </a></b> 
  
    
    
    
    By comparing the stack operations used by compiled code to the stack
    operations used by the evaluator for the same computation, we can
    determine the extent to which the compiler optimizes use of the stack,
    both in speed (reducing the total number of stack operations) and in
    space (reducing the maximum stack depth).  Comparing this optimized
    stack use to the performance of a special-purpose machine for the same
    computation gives some indication of the quality of the compiler.

    <OL type="a">
      <LI>
	Exercise&nbsp;<REF NAME="ex:rec-fact"><a class="superscript" id="5.5.7-ex-link-5.27" href="./5.4.4.html#ex_5.27">5.27</a></REF> asked you to determine, as a
	function of $n$, the number of pushes and
	the maximum stack depth needed by the evaluator to compute
	$n!$ using the recursive factorial
	
	  
	  function
	
	given above.  Exercise&nbsp;<REF NAME="ex:measure-fact"><a class="superscript" id="5.5.7-ex-link-5.14" href="./5.2.4.html#ex_5.14">5.14</a></REF> asked you
	to do the same measurements for the special-purpose factorial machine
	shown in figure&nbsp;<REF NAME="fig:fact-machine"><a class="superscript" id="5.5.7-fig-link-5.11" href="./5.1.4.html#fig_5.11">5.11</a></REF>. Now perform the
	same analysis using the compiled <kbd>factorial</kbd>
	
	  
	  function.
	
	<p></p>
	Take the ratio of the number of pushes in the compiled version to the
	number of pushes in the interpreted version, and do the same for the
	maximum stack depth.  Since the number of operations and the stack
	depth used to compute $n!$ are linear in
	$n$, these ratios should
	approach constants as $n$ becomes large.
	What are these constants? Similarly, find the ratios of the stack usage
	in the special-purpose machine to the usage in the interpreted version.
	<p></p>
	Compare the ratios for special-purpose versus interpreted code to the
	ratios for compiled versus interpreted code.  You should find that the
	special-purpose machine does much better than the compiled code, since
	the hand-tailored controller code should be much better than what is
	produced by our rudimentary general-purpose compiler.
      </LI>
      <LI>
	Can you suggest improvements to the compiler that would help it
	generate code that would come closer in performance to the
	hand-tailored version?
      </LI>
    </OL>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_123_1_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_123_1_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>



  
    <div class="permalink">
    <a name="ex_5.46" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.46">Exercise 5.46 </a></b> 
  
    
    
    Carry out an analysis like the one in
    exercise&nbsp;<REF NAME="ex:measure-factorial-ratio"><a class="superscript" id="5.5.7-ex-link-5.45" href="./5.5.7.html#ex_5.45">5.45</a></REF> to determine the
    effectiveness of compiling the tree-recursive Fibonacci
    
      
      function
    
    <div class='snippet' id='javascript_123_7_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChsDMBXAOwGMAXASwHsjQ8KAjACiIEpQBvbUH0AJwCmZAn1q0APKABMobr3kB+UETnyeALjqMWoALSgAjOwDUW5rX1TWAbmwBfIA')">function fib(n) {
    return n < 2 
        ? n
        : fib(n - 1) + fib(n - 2);
}
</pre></div></div>
    compared to the effectiveness of using the special-purpose Fibonacci machine
    of figure&nbsp;<REF NAME="fig:fib-machine"><a class="superscript" id="5.5.7-fig-link-5.12" href="./5.1.4.html#fig_5.12">5.12</a></REF>.  (For measurement of the
    interpreted performance, see exercise&nbsp;<REF NAME="ex:rec-fib"><a class="superscript" id="5.5.7-ex-link-5.28" href="./5.4.4.html#ex_5.28">5.28</a></REF>.)
    For Fibonacci, the time resource used is not linear in
    $n$; hence the ratios of stack operations will not
    approach a limiting value that is independent of
    $n$.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_123_2_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_123_2_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_5.47" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.47">Exercise 5.47 </a></b> 
  
    This section described how to modify the explicit-control evaluator so
    that interpreted code can call compiled
    
      
    functions.
    Show how to modify the compiler so that compiled
    
      
      functions
    
    can call not only primitive
    
      
      functions
    
    and compiled
    
      
      functions,
    
    but interpreted
    
      
      functions
    
    as well.  This requires modifying
    
      
      <kbd>compile_function_call</kbd>
      
    
    to handle the case of compound (interpreted)
    
      
      functions.
    
    Be sure to handle all the same <kbd>target</kbd> and
    <kbd>linkage</kbd> combinations
    as in
    
      
      <kbd>compile_fun_appl</kbd>.
      
    
    To do the actual
    
      
      function
    
    application,
    the code needs to jump to the evaluator's
    
      
      
	<kbd>compound_apply</kbd>
      
    
    entry point. This label cannot be directly referenced in object code
    (since the assembler requires that all labels referenced by the
    code it is assembling be defined there), so we will add a register
    called <kbd>compapp</kbd> to the evaluator machine to
    hold this entry point, and add an instruction to initialize it:
    <kbd class='snippet'>  assign("compapp", label("compound_apply")),
  branch(label("external_entry")),     // branches if flag is set
"read_eval_print_loop"
  $\ldots$</kbd>
    To test your code, start by defining a
    
      
      function
    
    <kbd>f</kbd> that calls a
    
      
    function
    <kbd>g</kbd>.  Use
    
      
      <kbd>compile_and_go</kbd>
      
    
    to compile the definition of <kbd>f</kbd> and start the
    evaluator.  Now, typing at the evaluator, define
    <kbd>g</kbd> and try to call
    <kbd>f</kbd>.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_123_3_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_123_3_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_5.48" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.48">Exercise 5.48 </a></b> 
  
    
    The
    
      
      <kbd>compile_and_go</kbd>
      
    
    interface implemented in this section is
    awkward, since the compiler can be called only once (when the
    evaluator machine is started).  Augment the compiler-interpreter
    interface by providing a
    
      
      <kbd>compile_and_run</kbd>
      
    
    primitive that can be called from within the explicit-control evaluator
    as follows:
    <div class='snippet' id='javascript_123_8_div'><div class='pre-prettyprint'><pre class='prettyprintoutput'>
EC-evaluate input:</pre></div></div>
    <div class='snippet' id='javascript_123_9_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
compile_and_run(
    parse(
        "function factorial(n) {          \
             return n === 1               \
                 ? 1                      \
                 : n * factorial(n - 1);  \
         }                                "));</pre><pre class='prettyprintoutput'>
EC-evaluate value:
ok

EC-evaluate input:</pre></div></div>
    <div class='snippet' id='javascript_123_10_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChsDMBDAYwBcB7AJwEsCAbAChQEog')">factorial(5)
</pre><pre class='prettyprintoutput'>
EC-Eval value:
120</pre></div></div>
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_123_4_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_123_4_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_5.49" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.49">Exercise 5.49 </a></b> 
  
    As an alternative to using the explicit-control evaluator's
    read-eval-print loop, design a register machine that performs a
    read-compile-execute-print loop.  That is, the machine should run a
    loop that reads an expression, compiles it, assembles and
    executes the resulting code, and prints the result.  This is easy to
    run in our simulated setup, since we can arrange to call the
    
      
      functions
    
    <kbd>compile</kbd> and
    <kbd>assemble</kbd> as <QUOTE>register-machine
    operations.</QUOTE>
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_123_5_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_123_5_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_5.50" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.50">Exercise 5.50 </a></b> 
  
    
    Use the compiler to compile the metacircular evaluator of
    section&nbsp;<REF NAME="sec:mc-eval"><a class="superscript" id="5.5.7-sec-link-4.1" href="./4.1.html">4.1</a></REF> and run this program using the
    register-machine simulator.  (To compile more than one definition at a time,
    you can package the definitions in a
    
      
      sequence.)
    
    The resulting interpreter will run very slowly because of the multiple
    levels of interpretation, but getting all the details to work is an
    instructive exercise.
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_123_6_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_123_6_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_5.51" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.51">Exercise 5.51 </a></b> 
  
    
    Develop a rudimentary implementation of
    
      
      JavaScript
    
    in C (or some other low-level language of your choice) by translating the
    explicit-control evaluator of section&nbsp;<REF NAME="sec:eceval"><a class="superscript" id="5.5.7-sec-link-5.4" href="./5.4.html">5.4</a></REF>
    into C.  In order to run this code you will need to also
    provide appropriate storage-allocation routines and other run-time
    support.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_123_7_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_123_7_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>


  
    <div class="permalink">
    <a name="ex_5.52" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_5.52">Exercise 5.52 </a></b> 
  
    
    
    
    As a counterpoint to exercise&nbsp;<REF NAME="ex:interp-in-C"><a class="superscript" id="5.5.7-ex-link-5.51" href="./5.5.7.html#ex_5.51">5.51</a></REF>, modify
    the compiler so that it compiles 
    
      
      JavaScript functions
    
    into sequences of C instructions.  Compile the metacircular evaluator of
    section&nbsp;<REF NAME="sec:mc-eval"><a class="superscript" id="5.5.7-sec-link-4.1" href="./4.1.html">4.1</a></REF> to produce a
    
      
      JavaScript
      
    interpreter written in C.
    
  
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_123_8_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_123_8_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>

  
  
  
<hr>

    <div class='footnote'>
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1'>[1] </a>
    <FOOTNOTE>
    Of course, compiled
    
      
      functions
    
    as well as interpreted
    
      
      functions
    
    are compound (nonprimitive).  For compatibility with the terminology used
    in the explicit-control evaluator, in this section we will use
    <QUOTE>compound</QUOTE> to mean interpreted (as opposed to
    compiled).
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2'>[2] </a>
    <FOOTNOTE>
    Now that the evaluator machine starts
    with a <kbd>branch</kbd>, we must always initialize the
    <kbd>flag</kbd> register before starting the evaluator
    machine.  To start the machine at its ordinary read-eval-print loop, we
    could use
    
    <div class='snippet' id='javascript_123_11_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChsDMBXAOwGMAXASwHsjQBnMgQwCcyB9AUxI4DdGAbABQBKUAG9soKfQ7tmHAOYUGHZmxI0yHImTqCuvAQBpQAIjz9GC0ybwC6HYQG5J0+WQLNaDFmX3c+fmdsAF8gA')">function start_eceval() {
    the_global_environment = setup_environment();
    set_register_contents(eceval, "flag", false);
    return start(eceval);
}
</pre></div></div>
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3'>[3] </a>
    <FOOTNOTE>
    Since
    a compiled
    
      
      function
    
    is an object that the system may try to print, we also modify the system
    print operation
    
      
      <kbd>user_print</kbd>
    
    (from section&nbsp;<REF NAME="sec:running-eval"><a class="superscript" id="5.5.7-sec-link-4.1.4" href="./4.1.4.html">4.1.4</a></REF>) so that it will not
    attempt to print the components of a compiled
    
      
      function:
      
      
      <div class='snippet' id='javascript_123_12_div'><div class='pre-prettyprint'><pre class='prettyprint eval' title='Evaluate Javascript program'onclick="window.open('http://source-academy.github.io/playground#chap=5&prgrm=PTAEGUEkGEAVQFLlAVgHToOwChsDMBXAOwGMAXASwHsjQCBnAUwCcB9AB2YqLIAoqARgCtG5AJSgA3tlCzQFPKF4V6rElQC27KsQAmrQqUo1+w0WTETpcm6F0r2AGwCGAT16OVfGbd8AidS0dIn1DcmoiPwAaH18bMOMiDmdmZw1GMhZ6UxFxGLjbBIjWASpdd0Fci3yCuT8AHkD2CkcWAFpGIgA3AD4-SwBuWNAAX1BGRyZ5RWVVJpbGUOJwk0rzSylhm3t6JzdeBvnW3Taimj6xIZsxianrOJ29irNxK7kR7BGgA')">function user_print(object) {
    if (is_compound_function(object)) {
        display(list(
            "compound_function",
            function_parameters(object),
            function_body(object),
            "<compiler-env>"));
    } else if (is_compiled_function(object)) {
        display("<compiled-function>");
    } else {
        display(object);
    }
}
</pre></div></div>
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-4' href='#footnote-link-4'>[4] </a>
    <FOOTNOTE>
    We can do even better by extending the compiler
    to allow compiled code to call interpreted
    
      
      functions.
    
    See exercise&nbsp;<REF NAME="ex:compiled-call-interpreted"><a class="superscript" id="5.5.7-ex-link-5.47" href="./5.5.7.html#ex_5.47">5.47</a></REF>.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-5' href='#footnote-link-5'>[5] </a>
    <FOOTNOTE>
    Independent of the strategy of execution, we
    
    incur significant overhead if we insist that errors encountered in
    execution of a user program be detected and signaled, rather than being
    allowed to kill the system or produce wrong answers.  For example, an
    out-of-bounds array reference can be detected by checking the validity
    of the reference before performing it.  The overhead of checking,
    however, can be many times the cost of the array reference itself, and
    a programmer should weigh speed against safety in determining whether
    such a check is desirable.  A good compiler should be able to produce
    code with such checks, should avoid redundant checks, and should allow
    programmers to control the extent and type of error checking in the
    compiled code.
  
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-6' href='#footnote-link-6'>[6] </a>
    <FOOTNOTE>
    Of course, with either the interpretation or the
    compilation strategy we must also implement for the new machine storage
    allocation, input and output, and all the various operations that we took
    as <QUOTE>primitive</QUOTE> in our discussion of
    the evaluator and compiler.  One strategy for minimizing work here is
    to write as many of these operations as possible in
    
      
      JavaScript
    
    and then compile them for the new machine.  Ultimately, everything reduces
    to a small kernel (such as garbage collection and the mechanism for
    applying actual machine primitives) that is hand-coded for the new
    machine.
    </FOOTNOTE></div>

    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-7' href='#footnote-link-7'>[7] </a>
    <FOOTNOTE>
    
    This strategy leads to amusing tests of correctness of
    the compiler, such as checking
    whether the compilation of a program on the new machine, using the
    compiled compiler, is identical with the
    compilation of the program on the original
    
      
      JavaScript
    
    system.  Tracking down the source of differences is fun but often
    frustrating, because the results are extremely sensitive to minuscule
    details.
    </FOOTNOTE></div>

    
</SUBSECTION></div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./5.5.6.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='125' href='./references.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      5.5.7  Interfacing Compiled Code to the Evaluator
    </div>
    <script> var chapter_id = 124; </script>
    <script> var chapter_path = "chapters/5.5.7.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>
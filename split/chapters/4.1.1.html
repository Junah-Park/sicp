<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="description" content="4.1.1  The Core of the Evaluator" />
    <title>
      4.1.1  The Core of the Evaluator
    </title>
    
  <meta name="csrf-param" content="authenticity_token" />
  <meta name="csrf-token" content="EMTEijVc2kiiKUH4nYH0lQG3pLPfMowQ/Stg//t6DCo0e5pWMQwamnTvIdmVZqY/MqSx2IYYE+2bpNV6UNSMwQ==" />

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display?swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../assets/stylesheet.css" />

   <link rel="shortcut icon" type="image/x-icon" href="../assets/favicon.ico" />

<!--    <link rel="shortcut icon" type="image/png" href="../images/lambda.png" /> -->

    <!-- for support of progressive web app, see github README, DISABLED!
    <link rel="manifest" href="../static/manifest.json">
    -->

    <script src="https://code.jquery.com/jquery-3.2.1.min.js" 
		     	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	          crossorigin="anonymous">
    </script> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script> -->
    <script type="text/javascript" 
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script>
   <!--  <script type="text/javascript" 
      src="../MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full">
    </script> -->
  
    <script src="../assets/application.js"></script>
  
    <!-- Rendering inline LaTeX -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true,
          jax: ["input/TeX","output/HTML-CSS"]
        }
      });
    </script>
    <!--<script src="/mathjax/MathJax.js?config=TeX-AMS_HTML-full.js" type="text/javascript"></script>-->
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js" type="text/javascript"></script>
    <![endif]-->
  </head>
  <body>

    
    <!-- support for progressive web app, see README, DISABLED
    <script>
      if ('serviceWorker' in navigator && !navigator.serviceWorker.controller) {
          navigator.serviceWorker.register("../sw.js").then(function(reg) {
              console.log("Service worker has been registered for scope: " + reg.scope);
          });
      }
    </script>
    -->

     <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top justify-content-between">
       <button id="btn" class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#nav-sidebar" aria-controls="nav-sidebar" aria-expanded="false" aria-label="Toggle navigation" title="navigation">
         <span class="navbar-toggler-icon"></span>
       </button>
       <span class="navbar-brand-short"><a title="Go back to front page" href="../index.html" class="gray">SICP &mdash; Scheme/JS</a></span>
       <span class="navbar-brand-long" ><a title="Go back to front page" href="../index.html" class="gray">Structure and Interpretation of Computer Programs &mdash; Comparison Edition</a></span>

       <!-- edit the search engine by visiting: 
	    https://cse.google.com/cse/setup/basic?cx=015760785273492757659:nc_tznrzlsg 
	       -->
       <form class="form-inline ml-auto" id="xxx">
         <div id="search-box">
	         <script>
	           (function() {
	               var cx = "015760785273492757659:nc_tznrzlsg";
	               var gcse = document.createElement("script");
	               gcse.type = "text/javascript";
	               gcse.async = true;
	               gcse.src = "https://cse.google.com/cse.js?cx=" + cx;
	               var s = document.getElementsByTagName("script")[0];
	               s.parentNode.insertBefore(gcse, s);
	           })();
	           window.onload = function()
	           { 
	               var searchBox =  document.getElementById("gsc-i-id1");
	               searchBox.placeholder="search web edition";
	               searchBox.title="search web edition"; 
	           }
	         </script>
	         <gcse:search></gcse:search>
         </div>
       </form>
       <span class="navbar-brand-short">
         &nbsp;
         &nbsp;
         <a href="https://sicp.comp.nus.edu.sg/source/" title="Go to the Source language(s) definition(s)" class="gray">S</a>
       </span>
       <span class="navbar-brand-long">
         &nbsp;
         &nbsp;
         <a href="https://sicp.comp.nus.edu.sg/source/" title="Go to the Source language(s) definition(s)" class="gray">Source</a>
       </span>
     </nav>
     
     <div class="container scroll">

            
        <div class="collapse" id="nav-sidebar" role="tablist" aria-multiselectable="true">
        <!-- insert a dummy entry, to give one extra line of space -->
        <a class="navbar-brand" href="index.html">&nbsp;</a>
    
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-1">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-1" aria-expanded="false" aria-controls="sidebar-collapse-1">
                <a href="./foreword.html">  Foreword</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-2">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-2" aria-expanded="false" aria-controls="sidebar-collapse-2">
                <a href="./prefaces.html">  Prefaces</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-3">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-3" aria-expanded="false" aria-controls="sidebar-collapse-3">
                <a href="./acknowledgements.html">  Acknowledgments from Second Edition of SICP, 1996</a>
              </span>
            </h5>
          </div>
        </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-4">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-4" aria-expanded="true" aria-controls="sidebar-collapse-4">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.html">1  Building Abstractions with <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span></a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-4" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-5">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-5" aria-expanded="true" aria-controls="sidebar-collapse-5">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.1.html">1.1  The Elements of Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-5" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-6">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-6" aria-expanded="false" aria-controls="sidebar-collapse-6">
                <a href="./1.1.1.html"> 1.1.1  Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-7">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-7" aria-expanded="false" aria-controls="sidebar-collapse-7">
                <a href="./1.1.2.html"> 1.1.2  Naming and the Environment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-8">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-8" aria-expanded="false" aria-controls="sidebar-collapse-8">
                <a href="./1.1.3.html"> 1.1.3  Evaluating <span style="color:teal"> Combinations </span> <span style="color:blue"> Operator Combinations </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-9">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-9" aria-expanded="false" aria-controls="sidebar-collapse-9">
                <a href="./1.1.4.html"> 1.1.4  Compound <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-10">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-10" aria-expanded="false" aria-controls="sidebar-collapse-10">
                <a href="./1.1.5.html"> 1.1.5  The Substitution Model for <span style="color:teal"> Procedure </span> <span style="color:blue"> Function </span> Application</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-11">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-11" aria-expanded="false" aria-controls="sidebar-collapse-11">
                <a href="./1.1.6.html"> 1.1.6  Conditional Expressions and Predicates</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-12">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-12" aria-expanded="false" aria-controls="sidebar-collapse-12">
                <a href="./1.1.7.html"> 1.1.7  Example: Square Roots by Newton s Method</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-13">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-13" aria-expanded="false" aria-controls="sidebar-collapse-13">
                <a href="./1.1.8.html"> 1.1.8  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> as Black-Box Abstractions</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-14">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-14" aria-expanded="true" aria-controls="sidebar-collapse-14">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.2.html">1.2  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> and the Processes They Generate</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-14" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-15">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-15" aria-expanded="false" aria-controls="sidebar-collapse-15">
                <a href="./1.2.1.html"> 1.2.1  Linear Recursion and Iteration</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-16">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-16" aria-expanded="false" aria-controls="sidebar-collapse-16">
                <a href="./1.2.2.html"> 1.2.2  Tree Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-17">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-17" aria-expanded="false" aria-controls="sidebar-collapse-17">
                <a href="./1.2.3.html"> 1.2.3  Orders of Growth</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-18">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-18" aria-expanded="false" aria-controls="sidebar-collapse-18">
                <a href="./1.2.4.html"> 1.2.4  Exponentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-19">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-19" aria-expanded="false" aria-controls="sidebar-collapse-19">
                <a href="./1.2.5.html"> 1.2.5  Greatest Common Divisors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-20">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-20" aria-expanded="false" aria-controls="sidebar-collapse-20">
                <a href="./1.2.6.html"> 1.2.6  Example: Testing for Primality</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-21">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-21" aria-expanded="true" aria-controls="sidebar-collapse-21">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./1.3.html">1.3  Formulating Abstractions with Higher-Order <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span></a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-21" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-22">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-22" aria-expanded="false" aria-controls="sidebar-collapse-22">
                <a href="./1.3.1.html"> 1.3.1  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> as Arguments</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-23">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-23" aria-expanded="false" aria-controls="sidebar-collapse-23">
                <a href="./1.3.2.html"> 1.3.2  <span style="color:teal"> Constructing Procedures using Lambda </span> <span style="color:blue"> Constructing Functions using Lambda Expressions </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-24">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-24" aria-expanded="false" aria-controls="sidebar-collapse-24">
                <a href="./1.3.3.html"> 1.3.3  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> as General Methods</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-25">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-25" aria-expanded="false" aria-controls="sidebar-collapse-25">
                <a href="./1.3.4.html"> 1.3.4  <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> as Returned Values</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-26">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-26" aria-expanded="true" aria-controls="sidebar-collapse-26">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.html">2  Building Abstractions with Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-26" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-27">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-27" aria-expanded="true" aria-controls="sidebar-collapse-27">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.1.html">2.1  Introduction to Data Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-27" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-28">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-28" aria-expanded="false" aria-controls="sidebar-collapse-28">
                <a href="./2.1.1.html"> 2.1.1  Example: Arithmetic Operations for Rational Numbers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-29">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-29" aria-expanded="false" aria-controls="sidebar-collapse-29">
                <a href="./2.1.2.html"> 2.1.2  Abstraction Barriers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-30">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-30" aria-expanded="false" aria-controls="sidebar-collapse-30">
                <a href="./2.1.3.html"> 2.1.3  What Is Meant by Data?</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-31">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-31" aria-expanded="false" aria-controls="sidebar-collapse-31">
                <a href="./2.1.4.html"> 2.1.4  Extended Exercise: Interval Arithmetic</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-32">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-32" aria-expanded="true" aria-controls="sidebar-collapse-32">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.2.html">2.2  Hierarchical Data and the Closure Property</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-32" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-33">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-33" aria-expanded="false" aria-controls="sidebar-collapse-33">
                <a href="./2.2.1.html"> 2.2.1  Representing Sequences</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-34">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-34" aria-expanded="false" aria-controls="sidebar-collapse-34">
                <a href="./2.2.2.html"> 2.2.2  Hierarchical Structures</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-35">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-35" aria-expanded="false" aria-controls="sidebar-collapse-35">
                <a href="./2.2.3.html"> 2.2.3  Sequences as Conventional Interfaces</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-36">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-36" aria-expanded="false" aria-controls="sidebar-collapse-36">
                <a href="./2.2.4.html"> 2.2.4  Example: A Picture Language</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-37">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-37" aria-expanded="true" aria-controls="sidebar-collapse-37">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.3.html">2.3  Symbolic Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-37" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-38">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-38" aria-expanded="false" aria-controls="sidebar-collapse-38">
                <a href="./2.3.1.html"> 2.3.1  <span style="color:teal"> Quotation </span> <span style="color:blue"> Strings </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-39">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-39" aria-expanded="false" aria-controls="sidebar-collapse-39">
                <a href="./2.3.2.html"> 2.3.2  Example: Symbolic Differentiation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-40">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-40" aria-expanded="false" aria-controls="sidebar-collapse-40">
                <a href="./2.3.3.html"> 2.3.3  Example: Representing Sets</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-41">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-41" aria-expanded="false" aria-controls="sidebar-collapse-41">
                <a href="./2.3.4.html"> 2.3.4  Example: Huffman Encoding Trees</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-42">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-42" aria-expanded="true" aria-controls="sidebar-collapse-42">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.4.html">2.4  Multiple Representations for Abstract Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-42" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-43">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-43" aria-expanded="false" aria-controls="sidebar-collapse-43">
                <a href="./2.4.1.html"> 2.4.1  Representations for Complex Numbers</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-44">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-44" aria-expanded="false" aria-controls="sidebar-collapse-44">
                <a href="./2.4.2.html"> 2.4.2  Tagged data</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-45">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-45" aria-expanded="false" aria-controls="sidebar-collapse-45">
                <a href="./2.4.3.html"> 2.4.3  Data-Directed Programming and Additivity</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-46">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-46" aria-expanded="true" aria-controls="sidebar-collapse-46">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./2.5.html">2.5  Systems with Generic Operations</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-46" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-47">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-47" aria-expanded="false" aria-controls="sidebar-collapse-47">
                <a href="./2.5.1.html"> 2.5.1  Generic Arithmetic Operations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-48">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-48" aria-expanded="false" aria-controls="sidebar-collapse-48">
                <a href="./2.5.2.html"> 2.5.2  Combining Data of Different Types</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-49">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-49" aria-expanded="false" aria-controls="sidebar-collapse-49">
                <a href="./2.5.3.html"> 2.5.3  Example: Symbolic Algebra</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-50">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-50" aria-expanded="true" aria-controls="sidebar-collapse-50">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.html">3  Modularity, Objects, and State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-50" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-51">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-51" aria-expanded="true" aria-controls="sidebar-collapse-51">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.1.html">3.1  Assignment and Local State</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-51" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-52">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-52" aria-expanded="false" aria-controls="sidebar-collapse-52">
                <a href="./3.1.1.html"> 3.1.1  Local State Variables</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-53">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-53" aria-expanded="false" aria-controls="sidebar-collapse-53">
                <a href="./3.1.2.html"> 3.1.2  The Benefits of Introducing Assignment</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-54">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-54" aria-expanded="false" aria-controls="sidebar-collapse-54">
                <a href="./3.1.3.html"> 3.1.3  The Costs of Introducing Assignment</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-55">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-55" aria-expanded="true" aria-controls="sidebar-collapse-55">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.2.html">3.2  The Environment Model of Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-55" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-56">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-56" aria-expanded="false" aria-controls="sidebar-collapse-56">
                <a href="./3.2.1.html"> 3.2.1  The Rules for Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-57">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-57" aria-expanded="false" aria-controls="sidebar-collapse-57">
                <a href="./3.2.2.html"> 3.2.2  Applying Simple <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-58">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-58" aria-expanded="false" aria-controls="sidebar-collapse-58">
                <a href="./3.2.3.html"> 3.2.3  Frames as the Repository of Local State</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-59">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-59" aria-expanded="false" aria-controls="sidebar-collapse-59">
                <a href="./3.2.4.html"> 3.2.4  Internal <span style="color:teal"> Definitions </span> <span style="color:blue"> Declarations </span></a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-60">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-60" aria-expanded="true" aria-controls="sidebar-collapse-60">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.3.html">3.3  Modeling with Mutable Data</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-60" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-61">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-61" aria-expanded="false" aria-controls="sidebar-collapse-61">
                <a href="./3.3.1.html"> 3.3.1  Mutable List Structure</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-62">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-62" aria-expanded="false" aria-controls="sidebar-collapse-62">
                <a href="./3.3.2.html"> 3.3.2  Representing Queues</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-63">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-63" aria-expanded="false" aria-controls="sidebar-collapse-63">
                <a href="./3.3.3.html"> 3.3.3  Representing Tables</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-64">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-64" aria-expanded="false" aria-controls="sidebar-collapse-64">
                <a href="./3.3.4.html"> 3.3.4  A Simulator for Digital Circuits</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-65">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-65" aria-expanded="false" aria-controls="sidebar-collapse-65">
                <a href="./3.3.5.html"> 3.3.5  Propagation of Constraints</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-66">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-66" aria-expanded="true" aria-controls="sidebar-collapse-66">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.4.html">3.4  Concurrency: Time Is of the Essence</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-66" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-67">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-67" aria-expanded="false" aria-controls="sidebar-collapse-67">
                <a href="./3.4.1.html"> 3.4.1  The Nature of Time in Concurrent Systems</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-68">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-68" aria-expanded="false" aria-controls="sidebar-collapse-68">
                <a href="./3.4.2.html"> 3.4.2  Mechanisms for Controlling Concurrency</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-69">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-69" aria-expanded="true" aria-controls="sidebar-collapse-69">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./3.5.html">3.5  Streams</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-69" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-70">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-70" aria-expanded="false" aria-controls="sidebar-collapse-70">
                <a href="./3.5.1.html"> 3.5.1  Streams Are Delayed Lists</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-71">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-71" aria-expanded="false" aria-controls="sidebar-collapse-71">
                <a href="./3.5.2.html"> 3.5.2  Infinite Streams</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-72">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-72" aria-expanded="false" aria-controls="sidebar-collapse-72">
                <a href="./3.5.3.html"> 3.5.3  Exploiting the Stream Paradigm</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-73">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-73" aria-expanded="false" aria-controls="sidebar-collapse-73">
                <a href="./3.5.4.html"> 3.5.4  Streams and Delayed Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-74">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-74" aria-expanded="false" aria-controls="sidebar-collapse-74">
                <a href="./3.5.5.html"> 3.5.5  Modularity of Functional Programs and Modularity of Objects</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-75">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-75" aria-expanded="true" aria-controls="sidebar-collapse-75">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.html">4  Metalinguistic Abstraction</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-75" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-76">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-76" aria-expanded="true" aria-controls="sidebar-collapse-76">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.1.html">4.1  The Metacircular Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-76" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-77">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-77" aria-expanded="false" aria-controls="sidebar-collapse-77">
                <a href="./4.1.1.html"> 4.1.1  The Core of the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-78">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-78" aria-expanded="false" aria-controls="sidebar-collapse-78">
                <a href="./4.1.2.html"> 4.1.2  Representing <span style="color:teal"> Expressions </span> <span style="color:blue"> Statements and Expressions </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-79">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-79" aria-expanded="false" aria-controls="sidebar-collapse-79">
                <a href="./4.1.3.html"> 4.1.3  Evaluator Data Structures</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-80">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-80" aria-expanded="false" aria-controls="sidebar-collapse-80">
                <a href="./4.1.4.html"> 4.1.4  Running the Evaluator as a Program</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-81">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-81" aria-expanded="false" aria-controls="sidebar-collapse-81">
                <a href="./4.1.5.html"> 4.1.5  Data as Programs</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-82">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-82" aria-expanded="false" aria-controls="sidebar-collapse-82">
                <a href="./4.1.6.html"> 4.1.6  Internal <span style="color:teal"> Definitions </span> <span style="color:blue"> Declarations </span></a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-83">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-83" aria-expanded="false" aria-controls="sidebar-collapse-83">
                <a href="./4.1.7.html"> 4.1.7  Separating Syntactic Analysis from Execution</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-84">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-84" aria-expanded="true" aria-controls="sidebar-collapse-84">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.2.html">4.2  <span style="color:teal"> Variations on a Scheme: </span> Lazy Evaluation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-84" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-85">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-85" aria-expanded="false" aria-controls="sidebar-collapse-85">
                <a href="./4.2.1.html"> 4.2.1  Normal Order and Applicative Order</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-86">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-86" aria-expanded="false" aria-controls="sidebar-collapse-86">
                <a href="./4.2.2.html"> 4.2.2  An Interpreter with Lazy Evaluation</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-87">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-87" aria-expanded="false" aria-controls="sidebar-collapse-87">
                <a href="./4.2.3.html"> 4.2.3  Streams as Lazy Lists</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-88">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-88" aria-expanded="true" aria-controls="sidebar-collapse-88">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.3.html">4.3  <span style="color:teal"> Variations on a Scheme: </span> Nondeterministic Computing</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-88" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-89">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-89" aria-expanded="false" aria-controls="sidebar-collapse-89">
                <a href="./4.3.1.html"> 4.3.1  Amb and Search</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-90">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-90" aria-expanded="false" aria-controls="sidebar-collapse-90">
                <a href="./4.3.2.html"> 4.3.2  Examples of Nondeterministic Programs</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-91">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-91" aria-expanded="false" aria-controls="sidebar-collapse-91">
                <a href="./4.3.3.html"> 4.3.3  Implementing the <span style="color:teal"> Amb </span> <span style="color:blue"> amb </span> Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-92">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-92" aria-expanded="true" aria-controls="sidebar-collapse-92">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./4.4.html">4.4  Logic Programming</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-92" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-93">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-93" aria-expanded="false" aria-controls="sidebar-collapse-93">
                <a href="./4.4.1.html"> 4.4.1  Deductive Information Retrieval</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-94">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-94" aria-expanded="false" aria-controls="sidebar-collapse-94">
                <a href="./4.4.2.html"> 4.4.2  How the Query System Works</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-95">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-95" aria-expanded="false" aria-controls="sidebar-collapse-95">
                <a href="./4.4.3.html"> 4.4.3  Is Logic Programming Mathematical Logic?</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-96">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-96" aria-expanded="false" aria-controls="sidebar-collapse-96">
                <a href="./4.4.4.html"> 4.4.4  Implementing the Query System</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-97">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-97" aria-expanded="true" aria-controls="sidebar-collapse-97">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.html">5  Computing with Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-97" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-98">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-98" aria-expanded="true" aria-controls="sidebar-collapse-98">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.1.html">5.1  Designing Register Machines</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-98" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-99">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-99" aria-expanded="false" aria-controls="sidebar-collapse-99">
                <a href="./5.1.1.html"> 5.1.1  A Language for Describing Register Machines</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-100">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-100" aria-expanded="false" aria-controls="sidebar-collapse-100">
                <a href="./5.1.2.html"> 5.1.2  Abstraction in Machine Design</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-101">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-101" aria-expanded="false" aria-controls="sidebar-collapse-101">
                <a href="./5.1.3.html"> 5.1.3  Subroutines</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-102">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-102" aria-expanded="false" aria-controls="sidebar-collapse-102">
                <a href="./5.1.4.html"> 5.1.4  Using a Stack to Implement Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-103">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-103" aria-expanded="false" aria-controls="sidebar-collapse-103">
                <a href="./5.1.5.html"> 5.1.5  Instruction Summary</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-104">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-104" aria-expanded="true" aria-controls="sidebar-collapse-104">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.2.html">5.2  A Register-Machine Simulator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-104" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-105">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-105" aria-expanded="false" aria-controls="sidebar-collapse-105">
                <a href="./5.2.1.html"> 5.2.1  The Machine Model</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-106">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-106" aria-expanded="false" aria-controls="sidebar-collapse-106">
                <a href="./5.2.2.html"> 5.2.2  The Assembler</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-107">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-107" aria-expanded="false" aria-controls="sidebar-collapse-107">
                <a href="./5.2.3.html"> 5.2.3  Generating Execution <span style="color:teal"> Procedures </span> <span style="color:blue"> Functions </span> for Instructions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-108">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-108" aria-expanded="false" aria-controls="sidebar-collapse-108">
                <a href="./5.2.4.html"> 5.2.4  Monitoring Machine Performance</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-109">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-109" aria-expanded="true" aria-controls="sidebar-collapse-109">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.3.html">5.3  Storage Allocation and Garbage Collection</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-109" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-110">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-110" aria-expanded="false" aria-controls="sidebar-collapse-110">
                <a href="./5.3.1.html"> 5.3.1  Memory as Vectors</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-111">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-111" aria-expanded="false" aria-controls="sidebar-collapse-111">
                <a href="./5.3.2.html"> 5.3.2  Maintaining the Illusion of Infinite Memory</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-112">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-112" aria-expanded="true" aria-controls="sidebar-collapse-112">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.4.html">5.4  The Explicit-Control Evaluator</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-112" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-113">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-113" aria-expanded="false" aria-controls="sidebar-collapse-113">
                <a href="./5.4.1.html"> 5.4.1  The Core of the Explicit-Control Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-114">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-114" aria-expanded="false" aria-controls="sidebar-collapse-114">
                <a href="./5.4.2.html"> 5.4.2  Sequence Evaluation and Tail Recursion</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-115">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-115" aria-expanded="false" aria-controls="sidebar-collapse-115">
                <a href="./5.4.3.html"> 5.4.3  Conditionals, Assignments, and Definitions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-116">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-116" aria-expanded="false" aria-controls="sidebar-collapse-116">
                <a href="./5.4.4.html"> 5.4.4  Running the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
            <div class="card card-inverse">
              <div class="card-header" role="tab" id="sidebar-117">
                <h5 class="mb-0">
                  <a class="sidebar-show collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#10148;   <!-- ➤ (because this one is rendered blue on mobile: ▶  -->
                  </a>
                  <a class="sidebar-hide collapsed" data-toggle="collapse" href="#sidebar-collapse-117" aria-expanded="true" aria-controls="sidebar-collapse-117">
                  &#x25BC;    <!-- ▼ (because the corresponding one is not rendered) -->
                  </a>
                  <a href="./5.5.html">5.5  Compilation</a>
                </h5>
              </div>
    
              <div id="sidebar-collapse-117" class="collapse" role="tabpanel" aria-labelledby="headingOne">
                <div class="card-block">
            
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-118">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-118" aria-expanded="false" aria-controls="sidebar-collapse-118">
                <a href="./5.5.1.html"> 5.5.1  Structure of the Compiler</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-119">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-119" aria-expanded="false" aria-controls="sidebar-collapse-119">
                <a href="./5.5.2.html"> 5.5.2  Compiling Expressions</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-120">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-120" aria-expanded="false" aria-controls="sidebar-collapse-120">
                <a href="./5.5.3.html"> 5.5.3  Compiling Combinations</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-121">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-121" aria-expanded="false" aria-controls="sidebar-collapse-121">
                <a href="./5.5.4.html"> 5.5.4  Combining Instruction Sequences</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-122">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-122" aria-expanded="false" aria-controls="sidebar-collapse-122">
                <a href="./5.5.5.html"> 5.5.5  An Example of Compiled Code</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-123">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-123" aria-expanded="false" aria-controls="sidebar-collapse-123">
                <a href="./5.5.6.html"> 5.5.6  Lexical Addressing</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-124">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-124" aria-expanded="false" aria-controls="sidebar-collapse-124">
                <a href="./5.5.7.html"> 5.5.7  Interfacing Compiled Code to the Evaluator</a>
              </span>
            </h5>
          </div>
        </div>
        
                </div>
              </div>
            </div>
        
                </div>
              </div>
            </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-125">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-125" aria-expanded="false" aria-controls="sidebar-collapse-125">
                <a href="./references.html">  References</a>
              </span>
            </h5>
          </div>
        </div>
        
        <div class="card card-inverse">
          <div class="card-header" role="tab" id="sidebar-126">
            <h5 class="mb-0">
              <span class="collapsed" data-toggle="collapse" href="#sidebar-collapse-126" aria-expanded="false" aria-controls="sidebar-collapse-126">
                <a href="./making-of.html">  Making of the JavaScript Adaptation</a>
              </span>
            </h5>
          </div>
        </div>
        </div>
<div id='permalink-msg'>
<div class='screen'>
  <div class='alert alert-success'>
    <strong>Permalink copied!</strong>
  </div>
</div>
</div>
<div class='chapter-content'>

      <div class='chapter-title'>
        <div class='permalink'>
        <a name='top' class='permalink'> 
    4.1.1  The Core of the Evaluator
        </a>
        </div>
      </div>
      <div class='chapter-text'>
        <div class='SECTION'><SECTION>
    

  <div class='permalink'>
<a name='p1' class='permalink'></a><p>
    

    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">
	

	
    <FIGURE>
      <img id="fig_4.1" src="../img_original/ch4-Z-G-1.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./4.1.1.html#fig_4.1">Figure 4.1 </a></b>
	    The
	    <kbd>eval</kbd>–<kbd>apply</kbd> 
	    cycle exposes the essence of a computer language.
	  </div>
    </FIGURE>
  
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
	
	
    <FIGURE>
      <img id="fig_4.2" src="../img_original/ch4-Z-G-1.svg">
      <div class="chapter-text-CAPTION">
      <b><a class="caption" href="./4.1.1.html#fig_4.2">Figure 4.2 </a></b>
	    The
	    <kbd>evaluate</kbd>–<kbd>apply</kbd> 
	    cycle exposes the essence of a computer language.
	  </div>
    </FIGURE>
  
      </span></td></tr></table>
    The evaluation process can be described as the interplay between two
    
      <span style="color:teal">procedures:</span>
      <span style="color:blue">functions:</span>
    
    
      <span style="color:teal"><kbd>eval</kbd></span>
      <span style="color:blue"><kbd>evaluate</kbd>
      </span>
    
    and <kbd>apply</kbd>.
  </p></div>
  
  
      <div class='permalink'>
        <a name='h1' class='permalink'></a><h2>
    
    
      <span style="color:teal">Eval</span>
      <span style="color:blue">The function 
      evaluate</span>
    
  </h2></div>

  <div class='permalink'>
<a name='p2' class='permalink'></a><p>
    <span style="color:grey">
      In JavaScript's strict mode—our preferred way to run JavaScript
      programs—the name <kbd>eval</kbd> cannot
      be declared in user programs. It is reserved for a related but quite
      different pre-declared function. We opt for the complete word
      <kbd>evaluate</kbd> as a replacement.
    </span>
  </p></div>
  <div class='permalink'>
<a name='p3' class='permalink'></a><p>
    
      <span style="color:teal"><kbd>Eval</kbd></span>
      <span style="color:blue">The function <kbd>evaluate</kbd>
      </span>
    
    takes as arguments
    <span style="color:blue">a statement or</span> an
    expression<span style="color:blue"><a class='superscript' id='footnote-link-1' href='#footnote-1'style="color:blue">[1]</a> 
    </span> and an environment. It  classifies the 
    
      <span style="color:teal">expression</span>
      <span style="color:blue">statement/expression</span>
     
    and directs its evaluation.  
    
      <span style="color:teal"><kbd>Eval</kbd></span>
      <span style="color:blue">The function <kbd>evaluate</kbd>
      </span>
    
    is structured as a case analysis of the syntactic type of the
    
      <span style="color:teal">expression</span>
      <span style="color:blue">statement/expression</span>
     
    to be evaluated.  In order to keep the
    <span style="color:teal">procedure</span>
    <span style="color:blue">function</span>
    general, we express
    the determination of the type of 
    <span style="color:teal">an expression</span>
    <span style="color:blue">a statement/expression</span>
    abstractly, making no
    commitment to any particular 
    
    representation for the various types of
    <span style="color:teal">expressions.</span>
    <span style="color:blue">statements/expressions.</span>
    Each type of 
    <span style="color:teal">expression</span>
    <span style="color:blue">statement/expression</span>
    has a predicate that tests for
    it and an abstract means for selecting its parts.  This 
    
    
    <EM>abstract syntax</EM> makes it easy to see how we can change the syntax of
    the language by using the same evaluator, but with a different collection of
    syntax
    <span style="color:teal">procedures.</span>
    <span style="color:blue">functions.</span>
  </p></div>

  <SUBSUBSUBSECTION>
Primitive expressions

    <UL>
      <LI>
	
	
	For self-evaluating expressions, such as numbers,
	
	  <span style="color:teal"><kbd>eval</kbd></span>
	  <span style="color:blue"><kbd>evaluate</kbd></span>
	
	returns the expression itself.
      </LI>
      <LI>
	
	  <span style="color:teal"><kbd>Eval</kbd></span>
	  <span style="color:blue">The function
	  <kbd>evaluate</kbd></span>
	
	must look up
	
	  <span style="color:teal">variables</span>
	  <span style="color:blue">names</span>
	
	in the environment to find their values.
      </LI>
    </UL>
  
</SUBSUBSUBSECTION>


  <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">
      
      <SUBSUBSUBSECTION>
Special forms
	
	<div class='permalink'>
<a name='p4' class='permalink'></a><p>
          <UL>
	    <LI>
	      For quoted expressions, 
	      <kbd>eval</kbd>
	      returns the expression that was
	      quoted.
	    </LI>
	    <LI>
	      An assignment to (or a definition of) a variable
	      must recursively call      
	      <kbd>eval</kbd>
	      to compute the new value to be associated with the variable.
	      The environment must be modified to change (or create) the
	      binding of the variable.
	    </LI>
	    <LI>
	      An if expression requires special processing of its parts, so as to
	      evaluate the consequent if the predicate is true, and otherwise to
	      evaluate the alternative.
	    </LI>
	    <LI>
	      A <kbd>lambda</kbd> expression
	      must be transformed into an applicable
	      procedure by packaging together the parameters and body
	      specified by the
	      <kbd>lambda</kbd>
	      expression with the environment of the evaluation.
	    </LI>
	    <LI>
	      A <kbd>begin</kbd> expression
	      requires evaluating its sequence of
	      expressions in the order in which they appear.
	    </LI>
	    <LI>
	      A case analysis (<kbd>cond</kbd>) is transformed
	      into a nest of <kbd>if</kbd>
	      expressions and then evaluated.
	    </LI>
          </UL>
	</p></div>
      
</SUBSUBSUBSECTION>

    </span>    </td>
          <td></td>
          <td><span style="color:blue">
      <SUBSUBSUBSECTION>
Language constructs
	<div class='permalink'>
<a name='p5' class='permalink'></a><p>
          <UL>
	    <LI>
	      An assignment to (or a declaration of) a name must recursively call
	      <kbd>evaluate</kbd> to compute the new
	      value to be associated with the name.  The environment must be
	      modified to change the binding of the name.
	    </LI>
	    <LI>
	      A conditional expression requires special processing of its parts,
	      so as to evaluate the consequent if the predicate is true, and
	      otherwise to evaluate the alternative.
	    </LI>
	    <LI>
	      A lambda expression must be transformed into an applicable
	      function by packaging together the parameters and body specified
	      by the lambda expression with the environment of the evaluation.
	    </LI>
	    <LI>
	      A sequence of statements requires evaluating its component
	      statements in the order in which they appear.
	    </LI>
	    <LI>
	      A block requires evaluating its body, while ensuring that
	      declarations within the block remain local to the block.
	    </LI>
	    <LI>
	      When <kbd>evaluate</kbd> encounters a
	      <kbd>return</kbd> statement, the
	      <kbd>return</kbd> expression is
	      evaluated and marked as a return value. 
	    </LI>
          </UL>
	</p></div>
      
</SUBSUBSUBSECTION>

    </span></td></tr></table>

  <SUBSUBSUBSECTION>
Combinations

    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">
	<div class='permalink'>
<a name='p6' class='permalink'></a><p>
          <UL>
	    <LI>
	      For a procedure application, <kbd>eval</kbd>
	      must recursively evaluate the operator part and the operands of
	      the combination.  The resulting procedure
	      and arguments are passed to <kbd>apply</kbd>,
	      which handles the actual procedure application.
	    </LI>
          </UL>
	</p></div>
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
	<div class='permalink'>
<a name='p7' class='permalink'></a><p>
          <UL>
	    <LI>
	      An operator combination is treated as a function application.
	      The operator symbol is the name of the function being applied, and
	      the operands are the arguments. Thus 
	      <kbd>evaluate</kbd> does not need any
	      rules for operators.
	    </LI>
	    <LI>
	      For a function application,
	      <kbd>evaluate</kbd> must recursively
	      evaluate the function expression and the arguments of the
	      application.  The resulting function and arguments are passed to
	      <kbd>apply</kbd>, which handles the actual
	      function application.
	    </LI>
          </UL>
	</p></div>
      </span></td></tr></table>
  
</SUBSUBSUBSECTION>

  
  <div class='permalink'>
<a name='p8' class='permalink'></a><p>
    
    Here is the definition of
    <span style="color:teal"><kbd>eval</kbd>:</span>
    <span style="color:blue"><kbd>evaluate</kbd>:</span>
    
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_76_1_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (eval exp env)
  (cond ((self-evaluating? exp) exp)
        ((variable? exp) (lookup-variable-value exp env))
        ((quoted? exp) (text-of-quotation exp))
        ((assignment? exp) (eval-assignment exp env))
        ((definition? exp) (eval-definition exp env))
        ((if? exp) (eval-if exp env))
        ((lambda? exp)
         (make-procedure (lambda-parameters exp)
                         (lambda-body exp)
                         env))
        ((begin? exp) 
         (eval-sequence (begin-actions exp) env))
        ((cond? exp) (eval (cond->if exp) env))
        ((application? exp)
         (apply (eval (operator exp) env)
                (list-of-values (operands exp) env)))
        (else
         (error "Unknown expression type - - EVAL" exp))))
</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_76_1_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKqY7bHlqdUAEMADmIA2ATwAUAgDSimAc3oBKUAG9soPVQKhZVegH0xTKqyrUAbgFNTAyrRLzS6zTr0-QTexRETCSiEjLmltZ2js5CborKauoA3Lp6AL6g9pL09qAGRiamZGxiNKQAJk6kLnTuJJ7aab4lDBSgAEY0FdKgALyENXGmXT31Kc0+rfTtkjRkIjn9oPQLJKblFKYV9mSSIkwicfSyo9ITvnrT7fTSrF1LA+Ji9iQV9bXrYgcirAH2TBOAnUSjmCxyF0u11ApBE9HoVBUJHsFUYA1Y4lkpn6AD4YSQ4QikSjQfNFhpUpdQNDbIsiPY0aEXm9ZAc1EpYfDEcjUZCWnQZn4GURJO0BvZaZIiEd7KdutIFJMqcqqfYAB4UV5VV62KgsEh-EgUWS3e40HJKSX0+iKlV2lWxVymHV6uiG43AzyUy7+QLBfJmX1BdZW2X+egiijqJUqgD8Qr9IbpjlamqNsnDkej9p8AC58TsCFQed7QJlsrkmqqmCwmPUlAAiACqJAA1iQaAB3EKO4QUaQvfIhZ4yBt89LYCf8IauLKS4p0Co2VyLZ1qiwMhF1GasChKHVeSZB-1FChMemyCV0mWyVra9dMCIok0UXcgrIkWyeGOXeNXqU3nea4WAuDAvm++6ftm9r5v+0qarei7AY+izGjuUaQV+qRTr2IT-qYuQAI70uQsroTaH5flWPgFMYZj2KwYj9gR9jEa8ZBka+FAaIeKrHiElT2EWJaTOWOR5LRRT7DMBEUDK7rgdxjTeDm-FzteCFFoCWwzPJrxoVxGgKAepZllk4nUVS0JaTJ6GmKGyw-pccE3jZOlyZqCnkSCJlOZJgYBMG9nJvIeq2VxwVSvYylOb4alubJu6RfSpm+GJlYqfaan4URJEcbIsXKuG7l6UaJzecZUGpT4E5pZOuDQpyRI8sssiaH0eIkCKkipNOgizqsIjrJs2y7PshzHIpvE0YYdEsWxpFTdNVkCjchnLLl7GOLpnn6eVXF8j6gUnvRjHMZti3eYVejxl1kiSNdoD5s8WommsGxEFsOx7D8k0JTtDH6YpPG2jmdqDcNn2jT9E2uCcGKtttrF5bKj1g6pDIlbtZXA54XqieZGU-mpRTXENX1jb9rhTWjoDxpIJjGmTRrQ+NRxOqaDxLbT+ZFLSlgiB0kiON9bNxDT6M+PTjOyPzVCC8LrNU3QBF3Fz6HfpLej5ndPWifVfWfOpkgjGCraKZhy3UqtnTyssQvzK2IzylNpnQmC5Ibe9I2i8rYFnIdjUElyxKossGJiFiuL4oS3IkqAHsQqZ2VWjeZyg5L6pptqn6ugaQOJxRTVx6ilsTDhM7CPh-EW5RVtqQjjj8clqNay5CHN+qG5ctuB0Z1rqpQeXuC4cbpix0iXlcZblnW20oAOeKqcIRP+cs6GU2W6Zq+q2aJsb6v7q7+rfcL8mW9HsdIShthI+V3h85ywrIuU7Dve7jPmWiCH6yc+aLeywOPLIWL8YbsxVn-SQm8nLt1lE-EBSs35JiipvOu-dfC+UyHoQ2cQx7MwpmA8W6FP6TB3pAgB+DEHgN-mrc00CVSwMQm0cmVDhgbw1pbdBPhMG4HwLhRgBAWDsCgHARAyB0BYAAEx336sIIouRJAEGdMvYsKgpqzxJmYLq9wATqNAAAH30ddeRZ5VF6MMcYswXRzT2CGuoixOYii61dgbUep4RAqBUCiUwDMZi1woAAC0cHJFQ9cr4BnMCIPU6iABkMTQBBJEO8DW-Q+gDECcEjxt8cGzicb8Tib4NHhPcZ47xviDIf1AA2Akfwxy31HuQmgSiakFKjEUxMCTbHvDklQKBGth45LkWYQ+QMUmZU0aYEJXiqjlNrg2EZRo6n1VHgsnStC+kHUsmpRJ3SolQJ2bIHpGy3x43qffb+zUj7sM2eM8JByjmHL2UtAZbizCUN9kg9RtyOklOmT4mWxCqnvNftQpZE5R7AsIRzdZXzmjbK6Y83psh7lPP6fjcF5zIViydNcwp3zgydKSYiqBDy0VnNkSEPmQDn6sOpmMuFxSzBTLKQC6eVT4GKw+aC4eo8OWgOxRAmF9KfDwqJQ8lFSK0U8vOXy2lKtcVtPxf6CVJLUUHXRbwsAAAxSAAANAAsgAUXzP4KQIgOJVNwqNYSy46ANlAJ2GwASqn7HuBUEQDY8BgBEAQTUTBQCBJMAGCMElGABKGhUYWFRcxeoSRQCgYh6C5hACoJ1RAOhoBKKwYA9ByhMA4gAWnNUkhi0hgAACt6AFvoPsEgKhgAmBDfQYAAA2AAzCgQZlKzCuo6O62FIrGWTI8X82ZgKGxWsLMWW1JAwVdoTr8PtIhImHD+H6-aeKGUdIjiadZGxmn5KUCq555Kja9vdc7MYwq9Cit2Ui0l6qXnnKKDXa9CYCW-JZX48dzcAbujnaPTuD5Nx0puVuglx7+nZNeaBJccRVxd3DFuNwb6JnMpmayyptM9ANjvDOhDwGe6zulRSue94QIbmSWBwdHTymmH8AQWuGASNGyAoh0CG7FXgf9HRhjtdJEsdwWxh849RQDpveE3jQla5tqfaR+RyMtriffSdYdpSMPfrZQ2C6HEAPnMbvNFGuMtmSZltpxTpEGxKG8qe3BOntoeUBjjMZPhuMhEg+q2zs5-qOanruDQJmOkHJs8s85xVZKlW4sZpVIQH3+cE7k06TFpCGaU95QLH6tHdVxl5oZPi4RYycxUpSGXVPOLi0pOTRsigOzIObN9Knu1qdHZhvcVTautj06RgzHXlNqVmQ2DrVmVgHVyyEDrl65ANdvcSpa0Hn3DLCFQBYRDqMSZ+UykdX7iuNhHMt7lY3BgUuQiB9+XGaMQYRRVjVKzVCceWjNh512bvnI7OPO7sgaCJoe0O5xX2KShdIwlNkn3vulfcwi-7CXhDhbZCcKH4OA1PKh9kvh98BFCI4KI7gEi0BtpkdVpl55ZRqjCR0tUqT0nE-m91kQiNqgUtkN8Vd-xARKHTnXdpBKBtZrKJUBnnwrPYdAMz-J672fygvhi+TbzSjlDeAL8WBAyeZea9t+QjZefy6qLhLrRsrWi7XQCIEKueOM3o9JggShmOHatWceQpuQhScY1b0AAnbf32dLnfUClldc7NzJPjrvZM06NgZ5uG9Uz6UdwnMzEfkzDaj0aaHTX48oNDDHz9GnjShkbGn+kevcH55THQNMOfkwx+PRnqruD2JzARHWr3uofdAwPP72LTyeGjwSoI-Jl4oLt8Je8Lv5y680FyCMOQve-if18JfDp3xonT-sFL7A0IMnOjOill0LejTLF1r1UeBnl+7r3hRUMAWv5qUX3WSB5-kwA+l-rlnx9zRAhZ14OfcU7kIuXyn5g+SLc7++Sn+rm3+HSDyf+oeteGoWoTeecXk6y9+FonQcIjgbeV+kmrwKggSp+DwAWaSAwwsdauBkoGg108YN+sgx+LOeBb+lo5I74HQaBTe0Edo+YxBOBASdBEIoAAAPAnNgaQYwWjH+DWDQHWA2AACo0A0CgAYgkC9BshEDuiMARhLYoj5j2oADUoAwulwMwlgdaBgU2SBmguhw2OhehA8BhpixhBAcgZBmsYMsE4hkhMhchBA9gnYiQKhe0KwRAGh0aVSoAuh+hvghhqiJhPBAWFhjYoR1hNhPgkR9hjhjBNes4cwNArYgRr++8IUkCJCvgo8OoPishkcGBTkDSawMRDBvBX8fEv22Wd+bBA8f4n4ZRX2BUSRzk5A9eqi8Bu+xoB4rRWs+YkClOQ+MRoxbRUxTh4ReYKwNRpKZhSgDyThh0dUKotEOokxG+DEyWgxbo0es8DCbhPBjYLYXQlQKw6yWhmxNUhMeQDRyo1kLOywPetBvkYMakEM8gL+d+-xIBXCSRy+QBQJfw+MKotUNU8+BKpRWRFRVUri5yZCe67C6ydRRRPgJRHRiJ-eVELxeg1Rdid+dRl+j0EyziLRwu7RtgnRkcCxH4ew4+AxO+xx6YIxwu4x6ykxwWZh4R8YuQWwByZBdRMxLhSxdiKxZ+746x6R1UGQiRVIOxn4exQSm+hx7Ja852OYAItYFxVSVx2utxe8Q4Fy3I7ouYSy0JTxpxrxNsy+HxYUWwJ+3xGMHSfxYJgJf+IJNhYJF+EJ0UDxGQ+s4B8JeJ5RBJAyaOFKGObAWOXA4ivAna86RQFgVgy4Dgiu1MwIiOWe-yfiCQDYGZUQVADghes4pZWZjgVgUgRW1C4wiOx6no2S0I1Z0QOZAoywsyP4A2Oyw2PgOy6MIIfZZmRyg5egRyI5IJA2N+k5IuUS-qYMo5yoA25SC55SM5Y5fiDYTi3Uw2+5909oq5VIA2S49AZq0gw2F5V5J5s5Zm+pEhk5T5y595O5xoDYGIgS48HQ9AVm35ASv5jAKop5lwA22hC5PgsgaoSg5w0cFOuhvQoAYFvgA2BaUFegMFcF7UeIFOBaoAyFqFPgA2AAVJhUYLBYRbhaABTqRYRXoMRXoANsABRdhdRQhaAGAERQ+buQAKRsVUXwUdS0WgB8UMUoW8WfmEFQXsXCV4WTHnBSWyANgACEaSslQlNFFO6lAwSlH5KlfBglOFnFAheg+la5ZmfBfQmFcl2l-BAw1FylDYOIxlHFIlFOeI5lTFseu5OINlSglwdlnF-l3lzlqlFFolvgIlegqlPgpOP4Ew7ZkQNZXZNCZ+-QTkO6OySgHZ5ZMQ6OSVNseV2ZVqNAHQ5auw3EmVKoO6Ag0cc5KV0Qw2LZHgngfpvgJVBVcZEwa+xVTV+VHGckZUPZMsA2gkwkKIw2E1xYKIPlPRllu5kAJANq-Yg5y1q1FlC1YMA2gFpgsAkAk5e1B18121aFZme1hqC5l1p1Z1zFZmAAciIA9RRU9Q9RKXdYxakMlZmZ2ZQnfjVcqHVdHAcsrrlQNdmfggDj9WWZDatCwhfoDVSMDSJS2e1SLhDSXswmVL1SsmECll1WlfWIkIWbqetgSiOClsWKYIJEwDIAMeWiILSKsJYExN0VrITXWcLO6I2cCB1cqGyKTSkJcCiaRsKbkdqQpDHlnHAZLUDNhi9CyITVamScqT0YTf9asQrRIK9MrZ7uVZVZQBREyXoBrfDevA-rdZcPsVvkcTqQMuvhqSoHMMwSbHLXvgMOLWIHbVLYfqPsvK0tiY1hEgokou3GYhrIVPGCNruIVLzFon3pHfaPTLITkd7eQhiXvPuqYC0qggeHHRElin7BLHaH+POEXZ8oCvnTBBErKlyqtm+FHWPHXSCg3W1tXewREqsiXXGGPN3VXVBAXaTIuPhm7YRshj3cqGXauHhvBmPd3BPQPV+EPT2ouv2knaXfIXTt1Z8LIOesuobqzvdvzQPPvZNvQp9XXCvalpdAdE3TlBZvlPZhFtjFFhwlfTXTVmbJPVSNPSbL1kvR9drBEq+nfcnWPKA5Uh3SqPHePEtitqBo3eA5TZeAHR8MMIhqdihqfAeCfUDZiGyNHIwmyJwokPds4TA1kOceOi2O2F2CELcEaCIBTsWMbPBPYNaQ7TbKwATSwCoKussMzrkCpRgMkNoAGtTqAG2mI+kEsowjwxEDQPw78GsRqQccxO7VGMkEAA')">function evaluate(stmt, env) {
   return is_self_evaluating(stmt)
          ?  stmt
          : is_name(stmt)
          ? lookup_symbol_value(symbol_of_name(stmt), env)
          : is_constant_declaration(stmt)
          ? eval_constant_declaration(stmt, env)
          : is_variable_declaration(stmt)
          ? eval_variable_declaration(stmt, env)
          : is_assignment(stmt)
          ? eval_assignment(stmt, env)
          : is_conditional_expression(stmt)
          ? eval_conditional_expression(stmt, env)
          : is_lambda(stmt)
          ? make_function(lambda_parameters(stmt),
                          lambda_body(stmt),
                          env)
          : is_sequence(stmt)
          ? eval_sequence(sequence_statements(stmt), env)
          : is_block(stmt)
          ? eval_block(stmt, env)
          : is_return(stmt)
          ? eval_return(stmt, env)
          : is_application(stmt)
          ? apply(evaluate(function_expression(stmt), env),
                  map(arg => evaluate(arg, env), args(stmt)))
          : error(stmt, "Unknown syntax in evaluate:");
}

</pre></div></div></td></tr></table>
    
  </p></div>

  <div class='permalink'>
<a name='p9' class='permalink'></a><p>
    
    
    For clarity, 
    
      <span style="color:teal"><kbd>eval</kbd></span>
      <span style="color:blue"><kbd>evaluate</kbd></span>
    
    has been implemented as a case analysis using
    <span style="color:teal"><kbd>cond</kbd>.</span>
    <span style="color:blue">conditional expressions.</span>
    The disadvantage of this is that our
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    handles only a few distinguishable types of 
    
      <span style="color:blue">statements and</span>
    
    expressions, and no new ones can be defined without editing the
    definition of 
    
      <span style="color:teal"><kbd>eval</kbd>.</span>
      <span style="color:blue"><kbd>evaluate</kbd>.</span>
    
    In most
    
      <span style="color:teal">Lisp</span>
      <span style="color:blue">interpreter</span>
    
    implementations, dispatching on the type of
    
      <span style="color:teal">an expression</span>
      <span style="color:blue">a statement or expression</span>
    
    is done in a data-directed style.  This allows a user to add new types of    
    
      <span style="color:teal">expressions that <kbd>eval</kbd></span>
      <span style="color:blue">statements and expressions that
      <kbd>evaluate</kbd>
      </span>
    
    can distinguish, without modifying the definition of 
    
      <span style="color:teal"><kbd>eval</kbd></span>
      <span style="color:blue"><kbd>evaluate</kbd></span>
    
    itself. (See exercise <REF NAME="ex:data-directed-eval"><a class="superscript" id="4.1.1-ex-link-4.6" href="./4.1.2.html#ex_4.6">4.6</a></REF>.)
  </p></div>

  
      <div class='permalink'>
        <a name='h2' class='permalink'></a><h2>
    
    Apply
  </h2></div>

  <div class='permalink'>
<a name='p10' class='permalink'></a><p>
    
      <span style="color:teal"><kbd>Apply</kbd></span>
      <span style="color:blue">The function <kbd>apply</kbd>
      </span>
    
    takes two arguments, a
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    and a list of arguments  to which the
    
      <span style="color:teal">procedure</span>
      <span style="color:blue">function</span>
    
    should be applied.  
    
      <span style="color:teal"><kbd>Apply</kbd></span>
      <span style="color:blue">The function <kbd>apply</kbd>
      </span>
    
    classifies
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    into two kinds: It calls 
    
    
      <span style="color:teal">
	<kbd>apply-primitive-procedure</kbd>
      </span>
      <span style="color:blue">
	<kbd>apply_primitive_function</kbd>
      </span>
    
    to apply primitives; it applies compound
    
      <span style="color:teal">procedures</span>
      <span style="color:blue">functions</span>
    
    by sequentially evaluating the 
    
      <span style="color:teal">expressions that make up the body of the procedure.</span>
      <span style="color:blue">statements that make up the body of the function.</span>
    
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">
	The environment for the evaluation of the body of a compound procedure
	is constructed by extending the base environment carried by the
	procedure to include a frame that binds the parameters of the procedure
	to the arguments to which the procedure is to be applied. 
      </span>    </td>
          <td></td>
          <td><span style="color:blue">
	The environment for the evaluation of the body of a compound function
	is constructed by extending the base environment carried by the function
        to include a frame that binds the parameters of the function to the
	arguments to which the function is to be applied, and the body's local
	names to a special value <kbd>unassigned</kbd>.
	Any name declared with <kbd>const</kbd>
	or <kbd>let</kbd> will refer to this value
	until its declaration gets evaluated. To make sure that the value of
	<kbd>unassigned</kbd> is different from any
	other value in the interpreter, we declare it as follows:
	<div class='snippet' id='javascript_76_2_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChsGMB7AOwGcAXUAVyIEMSSBLAcyIFMATUAXlAAoBKbgD5QRSgBtxAbiA')">const unassigned = () => null;

</pre></div></div>
	The purpose of the lambda expression is purely to create a unique
	identity; the function will never be applied and its return value
	(here <kbd>null</kbd>) is irrelevant.
      </span></td></tr></table>
    Here is the definition of <kbd>apply</kbd>:
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_76_3_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (apply procedure arguments)
  (cond ((primitive-procedure? procedure)
         (apply-primitive-procedure procedure arguments))
        ((compound-procedure? procedure)
         (eval-sequence
           (procedure-body procedure)
           (extend-environment
             (procedure-parameters procedure)
             arguments
             (procedure-environment procedure))))
        (else
         (error
          "Unknown procedure type - - APPLY" procedure))))
</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_76_3_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKqY7bHlqdUAFMAbgEMANkQkURACnoVWFADSiSYgJSgA3tlBGmIikSYlQVegH16IqQRvjps6iQDmSlRW2GjAYEA-EbKqv6BgQBcVrYkEqyKYb4RkUYhUjQ0ANZEAA52AJ6sAEY0UjaSMknFZRU0TvGJ3qraGiJafmnRsTZkdMoSJBQ2ACYiZFISTHK0JC0p3QEhLhX9DBRDI+OT07N0C+2dqWkx1pXTVBIlUiJjE1MzQvPJXUugK1UXTFc3dzuPfYvHxHHQnSJnWwSej0KgeEiJYYLN5LT7SGzQ2HwxEUQ6aMHvUCQvp0UZUZ7okQADzyJhhc2R4OCoi+6zJFIq1NpInpB2SoJR3WJU1KowkjMJIVYEmydwElAZIpKYpseT2iXkTHoyLUTMJ7yVKrKo0KOr1+u6HQJ72J9gAjkQOmQkj5BWk0RV7Y7yEkRA6nXdBvIcdrXgLzUTejcaGRshL3h6bNHY3irW6Ib0TGYLPHUSz0VnzMDVOHCcSJHk8lIqGQgbnuiEK1XTas3Ip5c9nDS6bC+a6BbqLWlpXkFNMPKAALwAPnzMjkinHA9A49Dru06Z6IiYLCYeIARABVEjZEg0ADulnohWGEipVksrYXUX32gA3NgAL64DtzOckkh2TmSlux5Xti3UfFdAMQJCwsXoKCYR0FCfeQFDZLtaVVExRh1KDN2ZVDFAwrkmAAtdWlLMs5zbdDSUwsjpFxMMoI-b9+FIBVhFWOw-W9Z0FnoAV9FSKgCFABRzhEVg8goQpeP9H1BI3ESljgyxSHGAgqBIERRg-QJP1EKR7CscTJNsKZlDsTZgw6ZifHoFSYP1dSaIXBRtK1EYg2k+zlLUNMDICIyHFMly0nWZRCCobybNUC5qinUAIyMIjPNi6zfJxAKgr1MSJPOdTEuQrysp8EqRGc1LQDcsqfIqqpHWCtJQpMkRVNc0wi3-L0AwUGrYJ5BqFxDXLOhayJv0Mr9cCiihQFITE4V00ZkoUXQZ1AEgiCkKQPw4wQ-3oWsSBsGgiG2B49meCjfE6owCoshT+JdVpoL1ebQGSRhJ2+viAxs0b7Lu989TcqSZLkl7+p+gjmR2vaapiJsOlwk6hnOy77l2J45m1eqgbspE4baQalgxs6Lqu3GgW1aVZRhpTyaHNThqJvzhjupyNzBwzjPCpkIdseathxwFnnrSVQGrZQ6I2MWARuuYilKcpkXhjNzkkH5rlucXlb7VoWY+GXrFxHXfn1pW8boVW6g1k2YkR-bUm-djf24r5kzjfkoIe0AvuNQpkp9pMaBNZFJq+zJaxM5LKaxmmJfxhRg75gIvqW+l4T037QBHBQbCnWds6xVaNFj6QnMmtz0uDwdWdEKl5EA5wtFiugcqrkyNDLla84FMGPc455-3U1NOgDtyGbuYqmsUFn0uK0iwIZMMTaWNNh5-Ue-x45bsX8v20wDr6F+S9LD4RezKrwvLAmv+3yjv6+cWfqQ8IXgVa+6+CF7YrvI6Xt0SWz1v8a6tsILCQiiuHOZ1rxqwqAvBQYC-gGygR-M0W8moeTQdbSBQI74sTTI3NIeUjJGEOlxR8rIBibGGBgusJ8p6wKfoguod9RaMJtkQjh6sN44NcB5bhydDZnRQSQzoZDIgUNwPgT2DBmBsA4HARAyB0BYAAExAJob0ewjhnC4PcF4V408-6WHODtUo25kRGAAD72NSucZQPxPB2NAI45xtgyjlBEEMOxXj9RWN2p-V4gDqFj3OJsDwHg9I2Flg5EsoAKAAAs7gxI+kNbMljbBqlinYgAZIU0A6SJDo1dFOScf00kZIkB4CJijehNDevdWBwsbAxLiaMBJ5sDwtNfIApp-D6iNASK0rJAQ3JlNwpsKgYT1yNL3sIc4b9j6VIih0rp8TEkHjWcMQZs0mn7J8rUARGyIjTP8bMiQ8yFAzIUHMhZ70NxDOWZYE5xCLlTIsaU65jzbmfyeRrHekS-znFEUwyWZjNm-OifU7pvS5Z+33JC3hzxDnfiaWiwhnYRl2NhTkv55SAV3IecC14vM3nAMsDi2mnZJHfOML88lgLSXPN8K8o57zej4IgfS9eTLapwtsNsnpuyUV8qhXMTFYLhBSvRSrfFMLLksv+cC1ldzKVcqxTyhVuKVaMtaA9K5JLgUUvXKC-AAAxSAAANAAsgAURiCYKsEhnSgH3Io+42kSDkhlaAc85JUlesNBIfceAwASAIJqFJqTrCxHoI6WIpShijFuKMKIUbSkUAoHkegUQQAeBDUQEoaB+isGAPQC6TBnQAFoPXlOkoUYAAAreg9b6BTE8MAawyaeTAAAGwAGYUBytyQkhIypxQqp+US+FsSdl9JRT6rSOkA10FlU08Nqp1SmG3KDE1vzC4jPOmMxIGhNUcqpdymlMtp1GgjqaOdzKiXXvZSCpZ96ioWIJaqhdoqEXLuRSCL1xVsr2W3TyleoFeQQUmcK996q2WUu-XoiFpJN3xE5HB8C-7509UXYiiVYGTaoqwxyBia8t072xfRUi2E9IEbfT1RJNgTAEDxBgOjPKSLdnIixpDbHzYcZEFxv2WjeP3v41hJiQm3Lsc43iEdoKmkuIBkpV9wn4LEZA0kyC+4+o+mg-e2eTMBJw2PUS3ZRnNPOn3BoOG1K9HGedBzMaMKAgAZ6h+tDd69GE0gyTRyiHTUVNUDXALY86QjWJhQbmYXfkWsi9JjDthpKyXkm51pTlrNEbiKE5SLmomWWhHFzmBm8uEoKzYF2n7SbodK0mWOvshU6cnWKpFBmND7h9qZvR5mfYKd+bZ-rTnXQlb-GHYOQmOvEpuVqxZs0J29CbNWWs0KhVbOA+KldYH9zrZrECAbY8fWr3gyN5DZrUPLd1fe1cV3fMobuSlzlaWx5ngxEwDw2oaAFqS4BurRX-tRfu4FzKIxxwKFB4D57JLYdTeELF77v2YcA-y-BYFiOVsKPeYwAgLB2BQDUdwTRaAR26Oa4hZCVJEPzfvNUmpSERBNb-OZxRCg1QzA1IejQDd-btNG30ijMkLpt0UY5k23PxmaiEqAAXcj1MizYHkcXPTOcEHpztpde25YEF65WtXmkbCS4+3+H1Mvedak8tr4X1llMG9ADxpHlgfWza1+YmzonHcaCk67wg7z25iE7jfJEnuhfe4d+JzyGhVNs+EOZ+erhiJ0Fbm01IimRfJ+qI5wOaf7Lm5WbYHPyEF526B113Z39wMWMqqdv8pe7jrHT6glPFf4eLc-uXtTPKnSZFhJ4YPoecqn0jz1YFSueWE0J+MlCrDM9qpJVP+9-eaD2CTKaWfl7BeBEX0S-Je5t8iB-rNL6tTnBQ3klaEf9lkouwOk0jnPOahIPlwvar++eqH6UGc3uoAP8i83cX8P4CYX9oI99slO9PJwCA9j9KowDxkIDvMoCsc2Vj9e9V8W40Zh8WAw9mI-939q5+doQ7gx8v94JbhPA0lf839NpqkZYOgPAaCqgnJUoQgf9n858RkiCTI2gFdSDg9NZIwqDmDUlaC6g8sAAeRg6g8Q1g4Q9IUQHcGgPcfcAAFSyALiGBDnHCIBDG+nyCrCoD0hiH3FAAAGoUom40hXEdIS0CAX1CDdArC89zCrDN5Ag7DPAxJTQFDFDIxtxdwFANCtCCARBzwVwft9CQZDDKxqxTCvVLDrCbCvDEJ7DfCJDyg8tXDetkjPCAhvCHC-Dq4dUqc-xMgch8gP5iE-8YFUgmkrQEkshRxyClhhlTosj-8FCA42Ygd6seCAj3R8Rmj-sBpUjyFyAB97DcCu5-Jt4CiYgRkqk-oHlBiCilCHkFCNjIxKYGtnCNBgV-DJoZolgnorQVj40yCr9Zj8D6ct4VC9wRletjwyhNJvo-8zCM5WoBYOpYElgvpj9koZ8X958dATjug3I9j4CeCYCkCZEJijB4CP84TEguUlhpoQoKDHwtBRjWiJoVtjl4EajJE6iADpB6jAhGjcTKj8SdBeiAgOiAkeCNAej-jISRVgc9oui2CbCVgaSWjxjES19B8PBbjR9OghijAli-9Li1jnDPCQh7ARgtjiDySpApSAgljOiKUDiUk2Vji9QjJ8pzILimcrjL8stxTC8GTyFHiuiXiSA3jAIPikEHw4Fy4cQXxvippfjbTIhASX9gTIdTdQSH4uoiVoSQDYSMCETETkSU9EC0SfTTisTUCcSxA8SwSrUwBFECcidVEuANFeBx1VtzhaQqBWAA0xA5R3lPJSA4ddMgNddut6ySBesKyqzqAayG9hBOzqy7hKyqxKs6wBBGzLAP0xzQUvp+zuzayaV85dkmRbMZk88AgZkhwyZuhbMnk1yjAnlNy4yzY5Z9xD89zQBD9DzlyRdElzzEkrztyRcQk9o89nypBCQty0hbMyR6B3VCg88fy-yPyjzbMgjVC9ywKmALRPzIhbNpQ0kMQSh6BHN4LUlELGAlgYLAhbMLDzyAgFAqQNBChNpZx7wrCQ5QAsKAhbN608KjACKiKSLQB7x61QAKKqKjBbMAAqOiiSQitipi+8LitiowDi483EfcYAXihigSkuZi0AMAdikCkXAAUmkv4uIrkvvBUpEsouUpPKZzwpks0q2kZwYOIv0okoAEJqkjKNLBLQAbK-oLLryTypD1LGKtLQAZCjAXLHy3LJw6LjKHKpC-oBLLKQjpwPLZLTLQBZxfKxLbNpxAqNBIhgqvLkqEqIr9wrLeL5LAgtojArKAg6cmQwYZyfguyqAazTcg8eCpw9RC4ZkNBZzqr5yaEosKrKyBzaqaVzoSg20JgEsGqlhC4BA5LbNWqeyr0XtP4pyxLIgpr2rbowZsAuqqqarRFFy+lbNNJxMdI9I889q-U9IFrESvyRdIASA-VyR-zUqrqbq5IzrzrsKRdUKbBYBIA9z3rPrnqXrOK3q5A0KnVzz3qnU-r-rbMAA5CQKG3imGqGzUmw8q+hC8yqnqyFeqycRqisTyOSh5LXFq9Guc8iBhBLFGjYNG7qkmyFD-Ea7oMa-G2a23fgpa0mrYKLVbdbeSNmzXUgDQccbrDveCbmmwHSGwPapgKQQoGYttCQSQE6H4WSIU1mNmoc24HEUchso894QWxJd8SIQknlZU6om-PAnKYWx8bAtuM2uYpEFmVGQCLnYmtq3qmhUAjQHYqmja5vehMWQYnW7oR23CXmoPGgAaoa+XL2tm2mxMiGgIC-TLaGW2u4iJc-dJGwDwTIEoSkDuc2u-P6E2goFOi2x-HlbmtsgWn7T-AIJ6csl2mqvmkgaqNINyUW0OmlSuqI37b4tqUyOulXMXE3JulugM1G4OYEoPD3BsiEmOGMauBOU6JOaVAYNOZ9FM-PSmrGlcSsNGNs92q3A9G3Mcyueevg2e1G-uXOUYfOQuYuLaK+iuGWM+qLSKVGumv6YOscauvueIeBPODer6OkXaBaP6euZ9QO1makVuHpEu4+Qg1kxMyBpuc7POu23EeaiEjpJvBQYBqQRYC0EIJvACVvPBgh-UGIY6g6-SCIPuv48ESCruo8E8M8S8QPe9OSPIDqHSHe5sQ5LE9iGcmQbak8pavPdK2K8isGCuqsIgeXXZDAP3V5IAA')">function apply(fun, args) {
   if (is_primitive_function(fun)) {
      return apply_primitive_function(fun, args);
   } else if (is_compound_function(fun)) {
      const body = function_body(fun);
      const locals = scan_out_declarations(body);
      const symbols = append(function_parameters(fun), locals);
      const unassigneds = map(_ => unassigned, locals);
      const values = append(args, unassigneds);
      const result = evaluate(body,
                       extend_environment(symbols, values,
                         function_environment(fun)));
      return is_return_value(result)
             ? return_value_content(result)
             : undefined;
   } else {
      error(fun, "Unknown function type in apply");
   }
}

</pre></div></div></td></tr></table>
    
    
    <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal"></span>    </td>
          <td></td>
          <td><span style="color:blue">
	The function <kbd>scan_out_declarations</kbd>
	collects the list of all names declared in the body statements. For a
	name to be included in the list, it needs to be declared outside of any
	other block or function.
	<div class='snippet' id='javascript_76_4_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKqY7bHlqdUAFMAbgEMANkQkURACnoVWFADSiSYgJSgA3tlBGmIikSYlQVegH16IqQRvjps6iQDmSlRW2GjAYEA-EbKqv6BgQBcVrYkEqyKYb4RkUYhUjQ0ANZEAA52AJ6sAEY0UjaSMknFZRU0TvGJ3qraGiJafmnRsTZkdMoSJBQ2ACYiZFISTHK0JC0p3QEhLhX9DBRDI+OT07N0C+2dqWkx1pXTVBIlUiJjE1MzQvPJXUugK1UXTFc3dzuPfYvHxHHQnSJnWwSej0KgeEiJYYLN5LT7SGzQ2HwxEUQ6aMHvUCQvp0UZUZ7okQADzyJhhc2R4OCoi+6zJFIq1NpInpB2SoJR3WJU1KowkjMJIVYEmydwElAZIpKYpseT2iXkTHoyLUTMJ7yVKrKo0KOr1+u6HQJ72J9gAjkQOmQkj5BWk0RV7Y7yEkRA6nXdBvIcdrXgLzUTejcaGRshL3h6bNHY3irW6Ib0TGYLPHUSz0VnzMDVOHCcSJHk8lIqGQgbnuiEK1XTas3Ip5c9nDS6bC+a6BbqLWlpXkFNMPKAALwAPnzMjkinHA9A49Dru06Z6IiYLCYeIARABVEjZEg0ADulnohWGEipVksrYXUX32gA3NgAL64DtzFeVqRTQEDRV10AwAioAhQAUc5aSoVhySoMQ5VIBUDgEDd9HBQsLH-ZtVR+BDqGQmxf3Q0gQKYDx6HfCJP1EKR7CsKCYNsfpWDyGhSFGUjUOeBQMLA8F1mUUBjUKKdCD4uYkxoE0BNIWi0hEihQEyWtGMk+haxIGwuO2B49mebVxKUyIVNAa9SnKRhJzwjpRgUwQZLVGYNW3bUMI0dTpBoj9lIGVTSExOESBEUZbNAEcFBsKdZ2C+l4XC7yY18szAgsqpHUipsHLHKj6A0BKsTCiL0oCCy6SIKRVLsp95AUcTByHd5qXkEgeKtKgWARDpcSsupCtALKeWalr3jI3Sup6nEnI3crjFMItMyWiwLmqBQqpqzd3VAHDdJGklhj6zaeWqxYLRibiRAIKhSv8ox6IcJjwMibddycjQjxPM9Lyk5zhAoQo8hEB88MA18HtAb9v34aThFWI72TmSlux5Xti3UfEhMCfbegoJhHQUerFDZLtaQI8KdWxnbljnNsFDJrkmCOtdWlLMt6YXRnSXJlnpH6-tsY-WHJrnOw-W9Z0FiGtMsMCSDoPOEQOKBiX-R9GXMNetI8eu277tSJ7GNBxXWJsKZlDsTZgxO5IaJx-U8ZJgTuqtoMVbtnwaLUNMoehhiXr1Czbq1EZknWx1JIjIwXdD92bc9pF7baP29TN859sj9s3fDnxs+1mO9tWyx47z1Rs-9wJjaDi1na+L0AwUIvcZ5POFxDLXfc6KuAm-auv1wCzitC8LJIUXQZ1AEhqqkD84YBx8vmTON+Wx+WKsCsS5IkuyV9k+TXn9iyfM0uztKGPSiAM3YnjmEyd-K4f4kS0rIui2Kp5HpLRhSjS-NSPXVw3MmotwCG1ByzgtDdToLNU+Q1v5vwFLRUW8Ml4FhLqmToG9FrZksNKWUNgs4jWbuNF2WdmbowZGGMBhI0woJ-Gg8WIVsRexLOvHWoBMquFBnVLK3MWG9WGNnamadAiCKKNZCoJDBE4kkXUamI0BT+zxiNEWjDF7i0kD8a4tx7i3zrGvOWnCJEDXKCI7Rvw9EAiMjJMxUgzRLBdpY3R-xDJ3zoCIsM2MxpvR7l+AIC80LoLWIFLY+jAT8SMdgkxr95HmJISpcJNiPG6XsY4y0-CGpJOESkoEXihZpl8YENOsN8CTUYAQFg7AoBwEQMgdAWAABMGjgm9HsI4ZwWS7peFeDg4ueDegz1KNuZERgAA+4yY7nGUD8TwYzQCTOmbYMo5QRBDDGUs-U5wZ5SAcUfQeQTnj4wkB4Dw4ULbWEFuwigAALO4mwPCO1wctWCEhupjIAGSfNAPciQjk+mTiBaAO5DzTnqKOX+HZCQXStH6Xjc4jzzk8WrMoA8TQRCQ0HmLexelGgwrGZwvGfzHKbCoPs9cEKxbnFkWw3wOCEW2CRRc1F1ysb7lpcMLF34xacvDrUcohKIjEvWaS95DiSUKDJRS1o811G8tfnIkhfSdYiv+VK8VGryXIg3FSph5wck30idQ10DKS4nLOSyq5B5DURNsXQblkLhC2ryZ2dJKrhXmsldKhQ3rNWvDldiphLr3H5OVaa1VXrRVaocT6gNDDqW2BcX8O1qShUBEZTYZlKLrVr33Mm6xobniOrFgWtxBi3UCplfSyNgy-XavrdW+aCamFltTWGnh6aXm4UbTGnVDC8BgAAGKQAABoAFkACiMQTBVgkM6UA+5Jr3ANohB1oBzzkluYuw0Eh9yDpXAQTUILbnWFiPQKOZ7blDFGLcUYUQD23IoBQPI9AoggA8FuogJQ0DsWAPQLiTBnQAFp53-JVoUYAAAregwH6BTE8MAawF6eTAAAGwAGYUBOssOcXdXaBmvKZac5Fly0V5uXeMVdxaW2aN3aqdUpgPIEbxtFXFDQbAYo0L2+N8qmH0fEixqN6qfVxvXAOxNRDMEeozeaxFJGrXkZBIurOHscQlqYRQtGvJMbPLVWK7VAa9WaINaSNd8ROTaYxkJwZ8nLU5qU+w2hi62TmdRtyHTGnNFM27JTAFEbPWDNZVJggeIMC0baT5imIkbPLWCyYULa8mkReOVF-mNVYu4XizdPEGGJP6tsI3TWMnu24eI-ZsjbKvpFedF5tpBDAySybinM1QXrX7hq5ijQKc+OaM69bDufU2Y1sCbJut0axOyt620suA3bbJ29np4T-nVAAJ5Zptuc2k4UGGzRVry1Js7ZS1C2wKs8hq061rfbuEdmzy1tN45eHoTt3m2yvbtaiOcbu4dh2xm2nnBXgRwjN3yukdZQeFedXjkNaTOpVeAWxtxfa5D7rroHt-n3oJkrpXfkTf9ZSw5kmmzVlrFEhHOO7Ng9zcpjlAEaxAih3+ZdlCdOZcsDxgn63NGrjZ7jkTmrDuBq520s8GICoKBoK+pbtm4h3cl2tnDhBc5i68PL6Xy1JVq-R8IOkIwedq+u5YH1WvDnlLQZU6pHA6ncEaWgDDrTHtMsJooKkzzgeWHvECuyBNHR-ehzKFCi8FCuRhZqIaTUOGAPNeD-c7FOLcV4ovfcxT9Qh-clqDQEfSmK9MxxLiHVE-BIEm7zN2bKsCS+nH-PPFJqM+EMutPTGtTF-hdHq5IWK+gHC9r0uaCD5ARL23q2CXO-JZ7-9YJUCxAwKEbiAgg+2vD5ywQDQeW-d-hh8Qzt6x2o1qj4v3E+4t-VGT1wugu-jvCEziXCxPCF+fbL+DpRKmb8jTr5YY-jojq74UCNe-Pa8dtU-98tNEnRMhYRPAp8Z9ZpjF98DtNVs8xZZsqkCVYDW5xt1VECmEwCaB7AkwgI3IRABR9BAg4DcI1QPkUDEhlFB4LJQVnBVZCgoCZo+pJJdk54HcN8A9SJCClAq0hoRp3syDLAKC9x7EBCeEFckDCD4lGIBJCCwJSD0CNdo0qCRBL9S4ZDBD5CYVFDRtEdcIfU1CQC2kIEC9ppYE7Z+CNAqhw9oQ7g0CDDLBbhPA7k+CpE9svc1IOgPA3DbDaZ0hQBRCFAYc1D3DBobC0pM97Cp8AjIwXDfDblwibJdAAAebw1wpI-wluFYHcGgPcfcAAFSyCiiGAknHCIBDEsnyCrCoHChiH3FAAAGpQBnNIhZkelIJTRxDdAWjT9GiWi2jAgOjPAujf80o4ijAYh3p8iFAiiSiCARBzwVwqJKihtqi6d6jF1mjWjxo0gRjP0CBuj+DejF0vodihiAgDixj-CTDjlMgch8hZCvEq1iDOExYrQLYshRxHC0gcUdJkjGJIjGI3clhM12DASaJLiVgtAvjJdSE9i0gcCICPBmDLCkR6FLiYh7EpxgVJUejLjAjJVsjESegL55g40TiNAfVbje5Hp04WIrRcTvd7kGDzsmCLDZ9QTLQ8ixDXjF1jwyhuJLIq0GiFo+5A5QZOElgQ5CDJJkDeCxEnZzVySdDEhZDPIFCU9SS1Ds5NTdDxT6SB5lDcJPiHifj-FUFuc4lcVlV+Sqg3jUgPjYTzTiYYk9R-iNlxDgShC645NZc9lITJjmQzTviETSTkSek0TZ83SdBgyAhsSq1mS+cAUTihiQh7ARhiTfJgT4yySATKSPC2gQVNVaS9R6IGToImSvD6Czs1ZOScRuSkTeTASvpBTq8RSpEwY+UXxDSA5nopSi5ZSYV5TlcwilTCQ8ZVTdTxC1T1DtTETdTtDjC+z+4+5hD8Q4SLSdAIUzdF4Lc2ArcuAGleBsMc9bA4IiIkJA8i8MJDcLUqc0VgJF1LzEJkJ38gjCI3y7h4Iqxts6w7yPsAD+dtVBIIULJXziIbzjJJJwcmQY8SVT8AgSUhw2h4L2tpUkKjBpVULtSY9RCsKgj3kmBcL0K0V9xWVCLWVSLugY9bs9lT96KpBCQ0LaL2syR6A51ChT8OKuKWK8L2sZimAsKhKLRWK0gY9pQ7kMQSh6Bk8pLbkZLGAlhxLIgY8mjCKAgFAqQNBChJ5Zx7wWiJJQBVLAgY9gNNKjBtLdL9LQB7xgNQBjLTKAgY8AAqSy6CHSxy2y+8VyxyowZyowGPYADy6y7yuKOy0AMAJygS8igAUlCq8r0oivvDiv8pMtisPy900rCuSqnk92BT0syrmIAEIgUcqkqfLQAyq7IiqyLD9UjEqbKUrQB0ijA6q2LyLUjJxLLcqqrur2rAq1J2tpwmrwr8rQBZxBrir9xpweqNBIg+qWq5rpr6rSqPLIrAgp4jASqAhXcmRaIIKvyoLC9K0PCpw9RooSUNBILrzTr75Dqt5bqSJl0aASgoMJgdsLqlhooBAIr8LjrrzT9e1BIhrIhnroKHr54jr4JvzWZNhhhIpwcY99Y7pwpT9UbSowbSTOrD9IASBqNuKFr8bCbsaca1L2sFKbBYBIAsKqaaaybyaXLKa5BFLJ1CKqbJ1GambhryKAA5CQPmjygWvmvMxEx6jYT82Gk621cQ767oX6iKyVefG6wGkiQ1ABGGq89WsJYRQQ+W4cCsASJWwAhxefYsiG+GrYABRXYnJgy2yaT6FY1E1lf-SwO2mwO6Gwa6JgQCKMqDCQSQbSH4c7cMocS23824HEACxSBcpYccSrd8SIQnJhTMp4hsk6N20QKkdqTqaBFgpEWhXKDqYPNWyGzxb03Ypmy22WqkouysPKB2vvN6j6ygIaQkowGu3WkYQQ7mgIWsxg6Mxs8CreegjwTIEoSkfO9E2qSyJaAoDOpEWiRXckq+I1e1BgIHDOQrJrYrdcfpDKLee2LSXe50LbTuA5ME-0tki7U+2FI7IuEIdgouGIYugFHSNe9tYyV2MOc+ulB2OOi0Ve-SL+++EI7gy7DulqXXP+xGrWQNauSUg+inNibu0BvsVoMBDIa1ENCtOxKtHVMBYkNtV1E1TBvY7BtFEhotfBqRQhvYmIdg-2GGXAYB6+dBze1yewOYiyT3LvN8bw1SXeUAJpN8V8d8IAA')">function scan_out_declarations(stmt) {
    if (is_sequence(stmt)) {
        const stmts = sequence_statements(stmt);
        return is_empty_sequence(stmts)
            ? null
            : append(scan_out_declarations(first_statement(stmts)),
                     scan_out_declarations(make_sequence(
                                   rest_statements(stmts))));
    } else {
       return is_constant_declaration(stmt)
              ? list(constant_declaration_symbol(stmt))
              : is_variable_declaration(stmt)
                ? list(variable_declaration_symbol(stmt))
                : null;
    }
}

</pre></div></div>

	
	In order to return a value, JavaScript functions need to evaluate a
	return statement. If a function terminates without return, the value 
	<kbd>undefined</kbd> is returned. Thus, if
	the evaluation of the function body yields a return value, the content
	of the return value is retrieved, and otherwise the value
	<kbd>undefined</kbd> is returned.
      </span></td></tr></table>
  </p></div>

  <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">

      
      <div class='permalink'>
        <a name='h3' class='permalink'></a><h2>
    
	Procedure	arguments
      </h2></div>

      <div class='permalink'>
<a name='p11' class='permalink'></a><p>
	When <kbd>eval</kbd> processes a procedure
	application, it uses <kbd>list-of-values</kbd>
	to produce the list of arguments to which the procedure is to be applied.
	<kbd>List-of-values</kbd> takes as an argument the
	operands of the combination. It evaluates each operand and returns a
	list of the corresponding values:<a class='superscript' id='footnote-link-2' href='#footnote-2'style="color:teal">[2]</a>
	<div class='snippet' id='javascript_76_5_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (list-of-values exps env)
  (if (no-operands? exps)
      \'()
      (cons (eval (first-operand exps) env)
            (list-of-values (rest-operands exps) env))))
</pre></div></div>
	
      </p></div>
    </span>    </td>
          <td></td>
          <td><span style="color:blue">
	
    </span></td></tr></table>
  
  
      <div class='permalink'>
        <a name='h4' class='permalink'></a><h2>
    
    
      
	<span style="color:teal">Conditionals</span>
	<span style="color:blue">Conditional expressions</span>
      
    
  </h2></div>

  <div class='permalink'>
<a name='p12' class='permalink'></a><p>
    
      <span style="color:teal"><kbd>Eval-if</kbd></span>
      <span style="color:blue">The function
      <kbd>eval_conditional_expression</kbd>
      </span>
    
    evaluates the predicate part of 
    
      <span style="color:teal">an <kbd>if</kbd> expression</span>
      <span style="color:blue">a conditional expression</span>
    
    in the given environment.  If the result is true, 
    
      <span style="color:teal"><kbd>eval-if</kbd>
      evaluates the consequent, otherwise it evaluates the alternative:
      </span>
      <span style="color:blue">
	the consequent is evaluated, otherwise the alternative:
      </span>
    
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_76_6_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (eval-if exp env)
  (if (true? (eval (if-predicate exp) env))
      (eval (if-consequent exp) env)
      (eval (if-alternative exp) env)))
</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_76_6_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKqY7bHlqdUAFMAbgEMANkQkURACnoVWFADSiSYgJSgA3tlBGmIikSYlQVegH16IqQRvjps6iQDmSlRW2GjAYEA-EbKqv6BgQBcVrYkEqyKYb4RkUYhUjQ0ANZEAA52AJ6sAEY0UjaSMknFZRU0TvGJ3qraGiJafmnRsTZkdMoSJBQ2ACYiZFISTHK0JC0p3QEhLhX9DBRDI+OT07N0C+2dqWkx1pXTVBIlUiJjE1MzQvPJXUugK1UXTFc3dzuPfYvHxHHQnSJnWwSej0KgeEiJYYLN5LT7SGzQ2HwxEUQ6aMHvUCQvp0UZUZ7okQADzyJhhc2R4OCoi+6zJFIq1NpInpB2SoJR3WJU1KowkjMJIVYEmydwElAZIpKYpseT2iXkTHoyLUTMJ7yVKrKo0KOr1+u6HQJ72J9gAjkQOmQkj5BWk0RV7Y7yEkRA6nXdBvIcdrXgLzUTejcaGRshL3h6bNHY3irW6Ib0TGYLPHUSz0VnzMDVOHCcSJHk8lIqGQgbnuiEK1XTas3Ip5c9nDS6bC+a6BbqLWlpXkFNMPKAALwAPnzMjkinHA9A49Dru06Z6IiYLCYeIARABVEjZEg0ADulnohWGEipVksrYXUX32gA3NgAL64DtzFeVqRTQEDRV10AwAioAhQAUc5aSoVhySoMQ5VIBUDgEDd9HBQsLH-ZtVR+BDqGQmxf3Q0gQKYDx6HfCJP1EKR7CsKCYNsfpWDyGhSFGUjUOeBQMLA8F1mUUBjUKKdCD4uYkxoE0BNIWi0hEihQEyWtGMk+haxIGwuO2B49mebVxKUyIVNAa9SnKRhJzwjpRgUwQZLVGYNW3bUMI0dTpBoj9lIGVTSExOESBEUZbNAEcFBsKdZ2C+l4XC7yY18szAgsqpHUipsHLHKj6A0BKsTCiL0oCCy6SIKRVLsp95AUcTByHd5qXkEgeKtKgWARDpcSsupCtALKeWalr3jI3Sup6nEnI3crjFMItMyWiwLmqBQqpqzd3VAHDdJGklhj6zaeWqxYLRibiRAIKhSv8ox6IcJjwMibddycjQjxPM9Lyk5zhAoQo8hEB88MA18HtAb9v34aThFWOw-W9Z0FiGtMsMCSDoPOEQOKBpH-R9NHMNetJ9tAa7bvu1InsY0HsdYmwpmUOxNmDE7khooSLQp+r2261mgzxzmfBotQ0yh6GGJevULNurURmSdbHUkiMjH5gTBaV9mRaRLm2klvVGfOfaVYFxW2dUc3SfVvbVssBWhZ8c2pcCOnZd5h250JlHFDtwI6R1hcQxJiXOjdgJv3dr9cAs4rQvCySFF0GdQBIaqpA-OGAavHS9KIAzdieOY11aTGIJY84vQDZEee6Cyua05GAzZkO+rL3xI8W7NLFx-HCl92uDbtkIM6kKQ7ZiXKOqUfP9PuYugU87W245-WxY3MbxoCbShgLovAWMhRpVlIfiYDnfyZ5YP14oTvuY3KWPdBsnA+984VK2Rej4ZV5L4yNYXEX9hg-yMjJAa5Q66X2JJIH41xbhgJLn2Vol90hqSAQoOBvxEEAnAXQIo1kpDQJ3jEceWdaaxxzmhR8Xxkxxn5PieuRgLLiUkvQ2S8lXhSwsj5TSdk966QXng5BDBGpyUKOVeO8REqlUitFWKacE5JVGClDSflUh8yygucRJpt4Wjag5ZwWhup0Fmnwoayi5EClorDSaPt9qpk6BXHuy1T53DNiNBQaDNZmy5D2P+-Y0GtU6LYn88NaHohCtiUWJYmEuNAJlVwoM6raIatE3qoCvFhiYVLDJhC6jmzHLInEBSoE5JGgKKWFMRofjsREn22CEH-EMqIpxOgEn5MgRULxTS-hIKBGU4hYY9Saz6bg1pgzsn9iYfogIRt6JGGoc8H2IDD74OLOoeJb8um1HKEUtZAzOzdLNEsTWhyRFTOSTqWZoyI5UPwJNRgBAWDsCgHARAyB0BYAAEzhNzr0ewjhnBpLul4V4CSKbnAzqUbcyIjAAB8EXq2rhQH4nh4WgCRSi2wZRygiCGPC7F+poWZ2RHU-5NDeibA8B4cKzNMGMIoAACzuDS5h9te69DVN1eFAAyPloBWUSEchCyc4rQAsrZRIDwFLll-mhQkF05c35QtsDSulPFqzKAPE0EQkNY72O6XpRoSr4Wqu9sKxymwqDDPXHK+x5wMmzQhWTNVNgNX0u1f1EEoB9zOr6ga789iA2gJOa6iIFMrUKBtcQ6Nsa65P0NQ00NIxpkqsjZagl1qJC2pjbmu1rQk31IBZ-QK39Ln8QjQEd1nqtWMt9fuC5kznhBvlcIZtS9jl7MLb4FxUbs35rzfGgtiawn2M7b-Ah6a+1uqzSKodxCE2vGLe2vuthxktK7YEjNNaP7qplZqhlOrGH7k3UcuYbb7HnsrRAnt5rM1cpHcOwdy71yruvZcZpF7p3XOra43Cz6l2jpXWEvAYAABikAAAaABZAAojEEwVYJDOj9ZNe41NEJ0H3KAc85JmV+sNBIfc4GVwEE1JK5l1hYj0FVjR5lQxRi3FGFEMjzKKAUDyPQKIIAPAEaICUNA7FgD0C4kwZ0ABaVDIq8aFGAAAK3oJJ+gUxPDAGsHRnkwAABsABmFAa7ejEYfXurl5w63Hp9XE-cGHxhYdbeOhpxHVTqlMB5UzAHLDRWNQ0GweqNBAcTRS+xLnxKec5ctILb6i1gcdbYRx-7Iu4Qs4er1DabNm2FjiK9DS-Hdh5L2TZzCB0Lpi74OLDSy0dWw-ETkBXeTFf7fuj1aX60nt9cEptpJauUga0V3LAK2RdlpARcKEWKbepsCYAgeIMBOaG6SEbTAjqdxK97KbM28Q-IW1S4b-iMQ1QmxtoB02bp4j05V0ttga7EyS7WtrVmDy3edINql7jz6owNs1rl3qFD7he-qjQBsQsNMB2vPW99zUBEfVF19IH7XJoBU7W+kOSY-bhwukHSOqVBwh6Hb7c6uXlY0cGqrtg8Z5AJoD9HRPlqkoniTUH13mbQlRy6zeGOUtxDJST1dRnzj0Ii8l9drXaXpY6zZ+hb2VkfaF-dk7Or9zS+B66ZnVKOHhaSyLoV8O80rodeTjEAEax1gV+Zg94v2vWa2f6k3tZHPq5WRh-xhWd2zth4BvXvaP0poKsdp93vF3BZxyss8GJ-c0G4+ti3-myVR9J0ZlHEevAJ5j5jxyaend-jx6uBQaeueWATVnh5YAnnMDYBwD53BvloD05SlZFmmCOgUFSDlFN7zirsmix0huAUfcmgoVySrNRDSatszRivcTdY4lxDqvFc77jmYSYf7ktQaHHwsgXbE2CcW4gvmhAl28tcs39ggX12J7-n5NGXf4MOr-c1qI-kKp9ndm+f0A83s-CAw+Fggx-ftTstsP8dtv9HYIljExBTFMlcR-8X9ADWZgCNBLs+93sZQPEHYDk6B2oPd34EDp9PFkkl9ElsC+pdtG8EtMDelkkAD6dLcj0-tKk-VCDqhb9hAWDHQjocCsEaD4CM9g8Rp+d7EnRMhYRPBIDoDZoMYLVidR0t97Fk8XkzVpDJ9A8F15CGkRCaB7AkwgI3IRABR9BAhVDloeU9wlDEgqlY4LIpVnAB4JCZo+pJJyFs57EB99ClAe0hoRoaI+DcIzDPCiFvDklE8FD9ChlPJ9CwJjC8D+CLCRByC79wifCBIoijCYdYjcIE14irsqVDF59pozFOYvCNAqgx9oQ7gVDMjLBbhPAWVAjBpU4JVaiPB6iyidplhQAAj3CzVulgjGI2gxIKjICOijAYgWj6i+jdAAAeNSDoVo5lHggYgOFYHcGgPcfcAAFSyCiiGAknHCIBDEsnyCrCoHChiFwwAGpQBglIhlB0V+MCBTQpjQBrjiCribir5Ah7iwVIJTR2jRiAgYh3p1j-ttiaBCARBzwVwqJDiO5jiTdzi-VXjPivjQg0VfiniGibJdA3ivoUTbjviMTPA-iljuZUCVlMgch8ghkilulDC35hCtBmYshRwqjugjUdJsTGJSi0oEklh3VyFuSaJCSPh8QWSo9vE0TAgtCxCPAHCiikQ0xASlgYhukpwJVo0pjRT0Fo12idTIxBFg8piNAE0ATu5oZjYWIrQNTu9WU7CqdB5CiYCOUzk1i9x6S-VjwyhuJLIe0LiFoo4ZZX47Z5Z9DJJFCPCjYvYuUjT4iIjUilU2gDSAh4yUicjAzHpKFqjxSqS2T7kS0qVdkiE6Se1eSpAGTUgmSxAJT8yOk35AhOTCU+jyzfCGzuhBSyVtSd4VhmS8ypS0TZSwUFSYCFBlTgk1Se1bTdcscvCVTdp7ARg9TfJyz5yMwjTl05zTTR1zS9R6IrToIbSu8qNKj7DnScRXTLR3TuSvpvS59Rg-SiEwZU0XxMzpZnoQyLQwylUIzV54ixz7kYzlo4zwi+jEzEhkzpTGzkiQjwKEi3zo4o4TDcIrRayAKdA5VHkIlnlXkq8uAvleBDNt8CJ4JEISJB8MJC9qVHsz8KI-U4IiIkJ9VEjhAGKyK7h4IqxIc6xKK6cvcytR1BI5ULI2LiIUJc5Io-smQ-t9wrViCAgrUhxIK0gZLY15KjBY0lLl8ZKzD1Kujc0mAtLpLMF9xvU9LvUjLugZKGcpBiCbLCRlLIgZKyR6AUNChiCXK3KHLtKTKQSmB1K-KLRHLAgZLpQWUMQSh6Al8wrmUIrGAlhgqAgZLLi9KAhW8NBJE4pQB7xriJJQBEqjAZLJNUqjB0rQBMq057xJNyqjACqMElcAAqEq6CKkDK1OWce8Bqmq-KnypXYAZqsqiqjq0AMAPKuqmSgAUgGtavKvauytAAmu6vGpMq71SsGrms7wlUkV6unwAEJxU1qZqhr5r9q7JtrjKldpjpq2qsr7xZijBzqrKTLpjJwSr1rbrQAXqHrlqldpxrrZqPrZxvqdr-tpxXqNBIh3rKrQAwbgaLq9rmr5rAg04jBdqAg28mRaIRLCJ2KD9u0gipw9RoorUNBRKmK8bS4sbAouicaxKKaCEaASgFMJh75CalhooBAsqdLaamLiCgtBI6rIgybyLsLaJsBsbSK6a1lJLMEZKqY7pwpiD5bSpBaoKQqTLIASAHN3KIbNbtbVa1bCqTKYqbBYBIB1KTazaDbDbQq5BYr4M9KTb4Nra1aZKAA5CQN25qj2t2tcr4qmjYGmyW8mw5Potm7oDmrK6Nf-UmnmkiaWgO0SYWu4Q5Hw8O4cCsASKOoPf-QY5O1bTYYYDRIzJsQCEixikW3OT6GE+U71Wg3CUuweO6Gwa6JgQCYchTCQSQbSH4KnAclqfOzi24HEHixSZfd4ccKzd8SIKhI1JaAoc8k6eux8KkdqTqExRwpENBGeRyfOjDFs1E6U-O0Orc7eysPKPeiAxm5mygIaFM4+8tLJEIl2gIWwynAmRe4YMDGw+0jwTIEoSkDexU2qSyeekc2aMW4Q1kHrDkZbN3FBLZdkrzalZvRQc5JbA7bkUVGZcc-UD0NsBQfbbsVbG5NMdWYEtJRQIh0baQG3QYrfcW6m1gQeahwyuyVyewf7HvUGEIDASMH5N8A1RGNkXrerbkRrE+FhjB7sU0+09+p0oBl0t8IAA')">function eval_conditional_expression(stmt, env) {
    return is_true(evaluate(cond_expr_pred(stmt), env))
           ? evaluate(cond_expr_cons(stmt), env)
           : evaluate(cond_expr_alt(stmt), env);
}

</pre></div></div></td></tr></table>
    
  </p></div>

  <div class='permalink'>
<a name='p13' class='permalink'></a><p>
    
    The use of 
    
      <span style="color:teal"><kbd>true?</kbd></span>
      <span style="color:blue"><kbd>is_true</kbd></span>
    
    in 
    
      <span style="color:teal"><kbd>eval-if</kbd></span>
      <span style="color:blue">
	<kbd>eval_conditional_expression</kbd>
      </span>
    
    highlights the issue of the connection between an implemented language and
    an implementation language.  The 
    
      <span style="color:teal"><kbd>if-predicate</kbd></span>
      <span style="color:blue">predicate</span>
    
    is evaluated in the language being implemented and thus yields a value in
    that language.  The interpreter predicate 
    
      <span style="color:teal"><kbd>true?</kbd></span>
      <span style="color:blue"><kbd>is_true</kbd></span>
     
    translates that value into a value that can be tested by the
    <span style="color:teal"><kbd>if</kbd></span>
    <span style="color:blue">conditional expression</span>
    in the implementation language: The metacircular representation of truth
    might not be the same as that of the underlying 
    <span style="color:teal">Scheme</span><span style="color:blue">JavaScript</span>.<a class='superscript' id='footnote-link-3' href='#footnote-3'>[3]</a>
  </p></div>

  
      <div class='permalink'>
        <a name='h5' class='permalink'></a><h2>
    
    Sequences
  </h2></div>

  <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">
      <div class='permalink'>
<a name='p14' class='permalink'></a><p>
	<kbd>Eval-sequence</kbd> is used by
	<kbd>apply</kbd> to evaluate the sequence of
	expressions in a procedure body and by <kbd>eval</kbd>
	to evaluate the sequence of expressions in a
	<kbd>begin</kbd> expression.  It takes as arguments a
	sequence of expressions and an environment, and evaluates the
	expressions in the order in which they occur.  The value returned is the
	value of the final expression.
	<div class='snippet' id='javascript_76_7_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (eval-sequence exps env)
  (cond ((last-exp? exps) (eval (first-exp exps) env))
        (else (eval (first-exp exps) env)
              (eval-sequence (rest-exps exps) env))))
</pre></div></div>
      </p></div>
    </span>    </td>
          <td></td>
          <td><span style="color:blue">
      <div class='permalink'>
<a name='p15' class='permalink'></a><p>
	The function <kbd>eval_sequence</kbd>
	is used by <kbd>eval</kbd>
	to evaluate a sequence of statements at the toplevel, in a function body
	or in a block. It takes as arguments a sequence of statements and an
	environment, and evaluates the statements in the order in which they
	occur. The value returned is the value of the final statement, except
	if the result of evaluating any statement in the sequence yields
	a return value, that value is returned and the subsequent statements are
	ignored.
	<div class='snippet' id='javascript_76_8_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKqY7bHlqdUAFMAbgEMANkQkURACnoVWFADSiSYgJSgA3tlBGmIikSYlQVegH16IqQRvjps6iQDmSlRW2GjAYEA-EbKqv6BgQBcVrYkEqyKYb4RkUYhUjQ0ANZEAA52AJ6sAEY0UjaSMknFZRU0TvGJ3qraGiJafmnRsTZkdMoSJBQ2ACYiZFISTHK0JC0p3QEhLhX9DBRDI+OT07N0C+2dqWkx1pXTVBIlUiJjE1MzQvPJXUugK1UXTFc3dzuPfYvHxHHQnSJnWwSej0KgeEiJYYLN5LT7SGzQ2HwxEUQ6aMHvUCQvp0UZUZ7okQADzyJhhc2R4OCoi+6zJFIq1NpInpB2SoJR3WJU1KowkjMJIVYEmydwElAZIpKYpseT2iXkTHoyLUTMJ7yVKrKo0KOr1+u6HQJ72J9gAjkQOmQkj5BWk0RV7Y7yEkRA6nXdBvIcdrXgLzUTejcaGRshL3h6bNHY3irW6Ib0TGYLPHUSz0VnzMDVOHCcSJHk8lIqGQgbnuiEK1XTas3Ip5c9nDS6bC+a6BbqLWlpXkFNMPKAALwAPnzMjkinHA9A49Dru06Z6IiYLCYeIARABVEjZEg0ADulnohWGEipVksrYXUX32gA3NgAL64DtzFeVqRTQEDRV10AwAioAhQAUc5aSoVhySoMQ5VIBUDgEDd9HBQsLH-ZtVR+BDqGQmxf3Q0gQKYDx6HfCJP1EKR7CsKCYNsfpWDyGhSFGUjUOeBQMLA8F1mUUBjUKKdCD4uYkxoE0BNIWi0hEihQEyWtGMk+haxIGwuO2B49mebVxKUyIVNAa9SnKRhJzwjpRgUwQZLVGYNW3bUMI0dTpBoj9lIGVTSExOESBEUZbNAEcFBsKdZ2C+l4XC7yY18szAgsqpHUipsHLHKj6A0BKsTCiL0oCCy6SIKRVLsp95AUcTByHd5qXkEgeKtKgWARDpcSsupCtALKeWalr3jI3Sup6nEnI3crjFMItMyWiwLmqBQqpqzd3VAHDdJGklhj6zaeWqxYLRibiRAIKhSv8ox6IcJjwMibddycjQjxPM9Lyk5zhAoQo8hEB88MA18HtAb9v34aThFWI72TmSlux5Xti3UfEhMCfbegoJhHQUerFDZLtaQI8KdWxnbljnNsFDJrkmCOtdWlLMt6YXRnSXJlnpH6-tsY-WGLOK0LwskhRdBnUASGqqQPzhgGrx0vSiAM3YnjmNnfCwwJIOg84vQDZEce6Czkkik2fTsTZgz63WFoCPHzhEDigbsP1vWdBYaIjdI5YVgPI1yjqlDV-T7i1oFPO65Q7YXWarY3MbxoCbShnVzXAWMhRpVlL3-R9BQQ-T7o6RGIN3cdv35vKp7GNB17IldtjAq2aPc4ZV4y4+NTrFxFTO4BIyZIG8ozb74lJB+a5bi7se+1aPvA+rZQFFn34F9H7W6CKaypCn9OYnlqRFdSGGf3hx8vmTON+Wx-WKsCsS5Ikuz79k+TXih0ALJ8ppOymddJR13rHRq79ypi3iIlUqkVoqxVluLJKowUoaT8qkPGJNIEmjThaNqDlnBaG6nQWagChooPgQKWisNJpzhsPtVMnRn6LWzJYAudx9rrSJqvHB3Dmbox7v2VerVOi0OvirBhIVsQnUfmmVh-9X4jUkjgmRvVhg8JdOzYWqR1EHzqFosccCcQGMnmGYargRACj-njEaItJFoVvuiLe89-iGT3pjAUij9ETwqCNTelw3GL08WYo+YY9Q4NcX8EJQIjEWLTPggIaYRYBGVk4hhw9NHgP4vIlhLcVxwLCUYrJOcl66T8WaJYODSmxM7AEhJnQklGBSV+XA+BJqMAICwdgUA4CIGQOgLAAAmRxzxej2EcM4LKsxPDIkUW3Gw8tSjbnmaAAAPusgOxsCZ3S8K8Iwmztm2DKOUEQQx5lHP1OcM+4TXQOPSeM84mwPAeHCjYdegsSygAoAACzuC882bDlqwQkN1eZAAyCFoB-kSEcgcyciKfn-JsC8h59CbkJG0XrApiyXlvJ4p8g8TQRCQzafQvxelGhYvmbi1alhYWOU2FQO5rQJGPL-OcdRydXSsLxRIV57yiWP33NyvqZLvz0LFZoypByW540ZQoZlR9FXKrNhuBxUqTF9Xiby+V9KYXnKZWCo+arXgaraRy4Q5xak5OEa0PlBrnkCoJR8weB5bUeKBBKq1lhPUx07LKvVEQFVGqVSahQqqI3motZKm+SiNgjy9fUqxtKQ0GqjSy8NWaY2avjecaJO9k32pxem9h+MXVCvdSKwt7iA1zB9fQ2tdTx61HMcGl2Gaw1qszay3w8081SObXa-eDSO3Atwr27NfaB2WvwAAMUgAADQALIAFEYgmCrBIZ0oB9yTXuLdEgiE6D7lAOeckvy92GgkPuPAYAJAEE1Mi6wsR6COliDCoYoxbijCiPemFFAKB5HoFEEAHhL1EBKGgdiwB6BcSYM6AAtDuuF7tCjAAAFb0CQ-QKYnhgDWHfTyYAAA2AAzCgX1vQb1ps7eW51grCXVpBHug94wj0npII2+NN7VTqlMB5OjE6OEViUG2+o1LEgaCnbm8lvGEjKgkN-U0cqy3LSnWa9c7KMW2CYWp+jILbD4qrRvEV3Dq44h41IgRaNeSYyBaGuF06zbovze3DqXHUbcns8JvaTrjOVuY2Z1joj9xsi85yOzGNrMZKZt2Sm8Lx3+fLZ8xhN08QYAkfQ+LFMRJ+bxmlkwBA8TDOy-G3L-MaoFYNUVjLj9yM6fc0XH22LHMBdRUFt1IXvn7hts6WL4zOEtdNinR1qX3V9e9gGfcGgU6Doyf1wM9sa7DCdvoNJhnJ3dujeuBb4zbpairitnlqgaLjY02G+b8mbM8mO0nWuY39Xlq02d8rUi3Ye0KCNkuT31O4RuQrOu+3OW2CmAnSzcifDnee0ZpZQPXsUBok1j7Jz1IP2SyluHJngtfKxvue+g2-zDfvjVibG8Cfo9m5Ze5N2Mlf3En5rH23nOI9jWM0HGIAI1jrAZkTFamPdbx19Js1ZazPCJ8IA9gjfN8+ZwynbOa9t0-GauMnl3WcRrZ+z+hZ4MQFQUDQED7WGNxCB0bzBcapGHYTuOQ3xuLss8chb97GTK76+ovbmH-3LBqpdw8jpN8uk9I4P07gQy0DkY59a4zhNFBUiBfL0A95EV2QJo6NzUjhuTQUK5LFmohpNSfnS8nuJwtsE4txXiKtZuiLz+5LUGgi+tKtxkm1FeuIdWr04gSif+WC6JQQL67FK9d8mpLywB76+Ca1L3hZtXB7pZK0P0AWWQdS5vipufJflp1eXxoMr6-J+b+mmQk6BA+8L4TsVgSGhGuZ4ycN7hAT1jtVLbjK-Zfn9WOp6-vqrunk9N6UjERpL9TdOsB93URovpv9qgJ95ctEjo39AlqgwCNdjUs1QCUcMknRMhYRPBiExBSENFcQFEd9cI1UW9qMbcRhukaUyCsEu1nMqD6FcCaB7AkwgI3JrFi9AhGDy01RwU6DpNdFvwLI-k7h3Y8hPZT8SDJJbklZ6Fs9uDxND4hoRpvcP8BCwU9w-F1CrFLdqDuCwlPJuCwI+CtD0CBIzCj9mAsUtFTCsVzDNsttfcI1hCRBsDxlCEu9ZDk4JN9DGIm9oRJD8l+Dd8OgPA-lVDBoZYkVbhPBoiqh-Z9QQhBC9xlCaU9CNBki2gxIQjCDaYjAYgEiojfkYibJdAAAeNSSIpItKMuFYHcGgPcfcAAFSyCiiGAknHCIBDEsnyCrCoHChiDPQAGpQBRFIhlAfhPBIJVMAjdAJjqdxjJjy5AgZi9l5iUDkcy4Yh3oWiFB2jOiCARBzwVwqI+jHYBjucRi91QAJipiNjdk5iCAFi1Cli90voHi1j1jQgXiIM3idj2dqNMgch8hikGkJNvEClWCtAPkshRwGClgKUdIKigjLFGJE8lhFlbl0SUj1iVh4SwTRwni3pyA8C9lCDiDZo0wiibRLIJMpwkVFU9D6TJRDVnNciyTijLI0SzVFiNA1VcjnZHo9RDZiYtBmS08UUpCZCSEZp-9FFqlmjdDoS91jwyhuJGTD5RjRToYGIXoQ4LIPDJIaDSIVDWkLQ8YQFrD7C9C7TEg2geTAgPCHDHTPD9TvxAhvTXD8QESjdJSdAH9VcilKUoTD4cjpAYTUg4SxAAykSwiUT41bTsjMTND9RcSgc2TREiT4ySTS4-jNBJh2CqS-CTo6TREYg-FpTOT4VFiniQh7ARhFVkioypB2TTg+SLkBSPihSI0RS-4fTfi0gJSrRayJDnAvtqTFThhsTLRVT0SvpNTO9RgdS6gwZpUKAXwvTDTm5jTX5TS7JzSPCgz9TLDcJbS3SHSPDnSizXTjCNCPSLUlhfSxSLzHxiTESzyA8wBOlmA2BQ8uBBleAqNqNYJCJEISIc8MJHdLBGNXVB8KI904IiIkJSUAC-xUKoK7h4IqxVt7YGRYLYcncXNBIHkLJsLiIUIVZIoiUmQiV9xGVqcAhGUhw7y0hGLlUWKjBlV2LmlGL0ieLQB0j+KGLJtPlhLPkxLuhGLAdz5qd5KpBCQOLIhGKyR6Bt1ChqcNKtKVKBLJsDimAeKjKLRVLAhGLpQ-kMQSh6BZsrLfkbLGAlhzKAhGKxjhKAgFAqQNBCgZZZx7wJiJJQBXKjBGKkNPKjBvLfL-Lk9QAkNQBgrQqB4KcAAqSK6CHyxK2K+8VKxKowZKxi4ADK6K7KuKOKsAJKgyinAAUhKqyr8vKvvBqvypCuqrL1T08tKsatlhTyRT8vaqOIAEJEUuqGqcrQARq7IBrxKKcqj6qYqmrQAaijAZrZLJsqjJxIruqJrNrVrCrJtpwFqyrerQBZx9rBr9xpwtqNBIgdqlrrqLrZqy8hqMq4rAhZYjAhqAgE8mRaJKLILqLu9A0Aipw9RopGUNAqL0LgadZ-rX5oboLN8aAShMMJgkcwalhooBByrBLAb0Lqcp1BJkrIhEaaKnFMFsAAb4IcLWZNg1tJIiVGLroj1wpqcWa7pwoSb7yLLJtIASBOMgYWL+bBa1qebCRLK5BHLYBIAeKHKbAZbubxaUqy95a11hK1albxbGKAA5CQHWjKvWnWzsv4+GjYES-GkiWpPQzG7obG8qxVC-KGy2u4UpTBamtCq2juTRDQ224cMTKCWWIm1OC2mmoGt22iajUXb7Mm2G8iEgSiDwIXNA3CaOmwO6Gwa6JgQCKkzDCQSQbSH4aQws8aWOvC24HEOsLyURccZOt8SIS1ClJaAocspEFOx8KkdqTqBUs-JEVeMORyWOg9NMl00Oz21272quQU-uysPKIe5G1G9GoaUe2O2pDQrWwIScuU77Vu3wCi1+ScjwTIEoSkHuuQ4BZumc3u3ESO1gr4JbP2GMg2FiT7aQ77B+lOec-nDm+6S+Pc5iI2MHaEe7B2JET+5UiuA1HBc0yHMB6HNoK0gIRuI0pYE0+OY7VQLRSSEOaB9BxOUBvHGiNQRB0cl+oA9hIxGBnwLRTCApHEg1KhzB+xPUZB-c60qB++6bEuURd3WBpHOuYhzoIcpBy+S1CyVgd+rh3dOyKdVyewI4jAeu9PEQeu8jN8V8C1RGB+iRn7Z0IU2U6c3e98IAA')">function eval_sequence(stmts, env) {
    if (is_empty_sequence(stmts)) {
        return undefined;
    } else if (is_last_statement(stmts)) {
            return evaluate(first_statement(stmts),env);
    } else {
        const first_stmt_value = 
            evaluate(first_statement(stmts),env);
        if (is_return_value(first_stmt_value)) {
            return first_stmt_value;
        } else {
            return eval_sequence(
                rest_statements(stmts),env);
        }
    }
}

</pre></div></div>
	
      </p></div>
    </span></td></tr></table>

  <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">
    </span>    </td>
          <td></td>
          <td><span style="color:blue">
      
      <div class='permalink'>
        <a name='h6' class='permalink'></a><h2>
    
	Blocks
      </h2></div>
      <div class='permalink'>
<a name='p16' class='permalink'></a><p>
	The function <kbd>eval_block</kbd> is used by  
	<kbd>evaluate</kbd>
	to evaluate block statements. The constants and variables
	declared in the block need to be local to the block. 
	The evaluation of block statements evaluates the body of the
	block with respect to an environment that extends the current
	environment with a binding of the local names of the block
	body to <kbd>unassigned</kbd>.
	<div class='snippet' id='javascript_76_9_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChsGMB7AOwGcAXUAVyIEMSSBLAcyIFMATUAXlAAoBKbgD5QRSgBtxAblwAzanjINioEnhpEA+gUplN7VnnE0ATjSXESvcgFsyggN7ZQL0A1l8GJTSVYBHSlYiPFZrMjt+R2dXGMJSClsyEm5Vf0Dg1h8yc1YbIKSwiJkYmJNWMkoTIjdvXIAHMgBPHzSgkMKk-miSkoB+UQlxbp7XAC5QGjq6oPZrdS0dPQMjU3NlUl5ZBhNyLJy8ojIOkkiAGmGRy5c1DW1dfUNjMwsNmxoAa0zfALbQi6uAYCyrtyPt8lZEidIvxiq4AL6gVjiXygJwjMoVKo1TRxUGHB4rZ7rDpdQGufriLxHXHZfHLJ5rYg+Ro2ABGBHEJNJZNA4y8mgAbqYGDRWeJMvTVi8Sf8ARSqbwhSYRWKJY8petmWyOVzZVdxmJJLCXHDsKbsCBQPJgi9krITAQbBAYPAkKhMDhsNbFOtEULxJQch1ToiiAKoq4MZVqvzfOJZJpWP7A0oiEwZXLruEyHqXHzvLQ8hmrhSCAR3pQ6lr2eJBTQA6ESCya9oE4XG9n+CGguHc7zsTSNEt1UTiMXLv0k-WcZZacPCYyiMHQ72Afm68rReKCQzpYluRO-dOlSrt5LR0vEt2wweRuu6IwWAcjvu+5P-ZoH8wiM-lz3bz065xOwDAvNOrAAB51MCjBjq+mZTrWwGges4FQTBxJXiuAElOuxhsuwNDjiM-RvJ8mjetK+GsoRmh1KseRkKwOwkucPI8tRtHsuwjSsX27EuP+fbrt86TtPBJZHrWom-NYrQZHsTHPhCnbXqu+rYmKBB4O8xE9O+05aTpf43sJ2JRlUel9FJmgWZe2ZqThMT3lMlLqHunZvhMrm8YhKahJRmqQdBrD0JhqnYWxAkuG8dS8KYTDCFJ-nxSYTCOSGCUqREkRmcxDomMuABEACqRDvEQBAAO7VE2hw0BBbjVH5OSjEVMJmnICgvN5dTiLx1qZWlJyot07ieN40EMDYKECpkgVjtakSjT0dm9f1dHKjNShzRR3XEoNEzDR18KIsirBuB4vD8oQNh1DoRDsHtNoHdQy1oiUNKgNxjQpAtWg-Zsb3Gq4X3iNp9bJDwNwLPc56LlYP0nZ9s6qM2HJQ71MxAy9TL0WYjHMVYS0huD6jIsjsSo9QX4sBwmOxbwmhJTTYV0+wpMQxTIMuF9yahSkkzTI9qVMCQIas4+bDsCcPOgF9wISBQPAtUxvA-VF0UlJBTGPYmYbbMQv5NtqyIhvz4v8ex-36wKhs-vkOPQnLa38nZdYNrwiviPYVugP07v8zOhyO97vs8uM1AGFs0vGgiSIoh9MT5QQhWHaV5WVTVVr7SoTTTE162NO1cedV6ufNR+yFgbWwUYXBDnYStkblNG2JkCYgS8KroTAYm6GbRwrHYU5MQGQGQZ93XwfZfYjn8eMPe8FPA-1i+EX-jI5r-TZMkZMcjnNy443XbUd1NC0Pz75C716mtUesDHHAg-H52XRNmjGCC2RKY7N8RkCVuWIl5bB2HoUEv9DjHC7JvYYr9E56i+qA7+dgPaBBSFbEB2xv5gigTfU4sDLgnzdkArQ-NNjYPAdmNBrBb5kjWsgqhqD+ZyxNGdBB9DSG73ku0P2LccGQIKPgwhIxTQxFNNvCuNk7ImXDEfUAa0yKZEDvWLufDkpBndnXUKsF7IRE1lrZON4OqSNxpXactMHZ4Mbv+eRfNVEXRVsmIMljnw0OHiIlwljqwcnca4-IPjOT7nNg4xyIM1osLLjvRCG5TxqgXB5Owh8k4TDZloE2LZyEni3PE3cmoMk6mCXqJe2TVQ7g1EychwTIrFJvFvVw5czE2UHHSEci5ZEAK8WkwJ7iWnzjyUyApQTVLFOcWrPp5SLzuOqf+AxRjwxb1wJaf6doHROigHARAyB0BYAAExdSabGJECZVYMDTCSeRrsCyUDZMxC5oAAA+Dz+Kxg7mc9M+4XBPJed4dkHJWAaAud8wE-JDTDKKFEqR-JshMCYBwT+CosJkAABaZBhZ0hRXD+T0W2BcgAZHi0AqKaCzE+VwcloAUVopoEwRZjSfQqFBTQIsnyUlXM0DCuFT1KTkGKu2EunUd5DNbJodsFy2VcOJbMbIDBwX2BMQchlMZvD+OsREI+7LOXwp5evJJoAiqqrIAK00O9DWBPFd0NaUreAys5Na21XJIiLNNWktxVTOwaslQC6VNBZU2t9XK52kLDneAmfDRJ9hPWYmVRymlXKEW8qwkVMNbSXjGvpT1FNCT8no0DVGtu9qA28ELX6-cQaTVSKzQMshDiLUt2jUS71-q-UOrLQqne-JSlnlTeFdVSdNVxu1YixuRUu25IqUQdNO8x2TMXOa1llqvUkubXaptrbOzlozb6Gd4bNTur7YuhtJbOTrpygqi0YAABikAAAaABZAAouMMofUaAhH1TbaOZyULECKqAKqoFkX6s4jQIqF6JiyCYiYSlyKvA1BIOguDyKNDsHFOwUY4HkVkDIHUEgowQBMEA5QVkaBbrABIDoEwIQAC0b6SW5EaMAAAViQajJBjBpmAF4BDoVgAADYADMKAt2Mu8CButLgB2wqHYmkdn7H7frTe2qRIG6IMXKETCTmKG2M2FQQNszLWAhmPY651KnmU0RoJoQGC760FrXUW098rz0du8DI2zkmsXeC1dy4deqiruwgbkfIU6pFaPQjo3tkb+1Lp9aWjddLXPBxAjXfuIUwoNwPXZrE0LB2+dk3q9R+rq6oVrhFjLk7lNNJXtBQepKPUxYbTq2yj9lwYCq0q+WxAnrT1xFptazWyiyGXLsjrmbutpZMJ+H2-WuGDda1hATLmoXeD3uJBrh6265ek-l3VZAQxFTW6wULTSlGXzEh2OwI1Gttx1bwQ7PDjshhvmZppR3FLBcOLPRwDTsvVBM2W17nXGEfeNtma7m2sTWpe4KsLoUqG4KEeDzpa0nOy1hyGxM59mhHegfmnL1zJDQKBz1fkX8EeCLxzdgnorBgrugctzHRldIec8w27b8a7tJuZydzrZ3mezaawqIqPPnudhJ76Zn1mCA8S09p+zy6nNOuDZ1-kQs3LtNZ1Jznfn9v6vVwwdy6xec9RttoirguFdxcDWN30WVLdQ4cy2otbaJcqEqp+YavACC4ZR152nROffo4rU0kHCVve+-x-9ptQfbcqGBHoe3seo+UqLbHulyyK6rMdM6TZbodloAE4q0n3nO6hAghitajVyU8A7oERLUizv-V4PjQzUHxbfRl40ZJwwBvC9uvdKOz0lVFTmYCVvhMdghg1thN3MaB8PSes32Qlf-c+YTUcWQB2F9D-+ib30NsJ8aZYivy5c2qQteG1v0A7W585zMdL2Xp+JVC92ENzYIZRt37NwbB0VjN+r6v56Dv7X5LYN6nYfDKKkK9LEC6zRa97n68oBbQH8yj5dYhyHBx4xoqKez8yAFbbeZ5Yb6KihL6o4GBD77x4oEOLBxwEkENj4GO6K5Fp4GM6dZtDgyMBpi2z2y-i2Iv5twOqwIh7A6UIUQEyhD8EIFHpNrCEibNTBCcGZCsgDQSHJIxDSFtw4ppxqGz6dRfRUpY4NDNA9i8H5ApBgoyDyGgBN4SHWC5od4WyMHVDaH2GmyOEOLB7WH2iGaBLEwSE-a-Z-aNrLo+F5BYFWgSE0L+GGaBEuCaFYgOphG0LgHsEQS6w9a-5Gx-wOEhJmzfR0CZBSGlBzZBBMAopuE1gjQ16gDihpgVH+gnD8T9CuG2GGaVEYx5EnDT6FG2yjxjC1FlEVFDIjQAA8gx9RyK9BTRPIk4JgBU92AAKmWDYRoL9AlDcuCKoJWH1AwBwOMH+gANSgBFYlDkDKhpjuC8QjGCDHFoFHEnGGKuDnHvJXHTG5QRyIjzGpxLErGyCsBVRHRMCbFfbbGuR7Hob6qgDHGnExAvGXGyDXEOG3H6oHbQmPFPGqBvIIm8SNHK6mKdbgzliVg9JVK5o94xDRJhifxlhxTFEjBCrzAdH5F4nyKXDspgrMkzGGKTjUlElxSwnayKEEBcFMA8F-58HGKCnjBDLcAUrQ7ImCkuD9DWp4lKn9gwz043EhgOp4mUwlBiIjAnw9hym16opGEXymESn5AYqXApyFRDIHZlTshRxoymwHH6niLsIXQpKXBIISF-RiHJHdx1JWxrSanJF+GbABFj6GKRkWzRmxGenwhwIJEKECg0k+4hkLIq49TeLCpkmmx5EUmuBUkZn8nZm2mllSKakjFdFVmrT+6ck3FFa8nlm0m8BKkcEinvLinZFQL-j9F3huk1imkhGkqKk8mpB6CqmQx5FDmXAylMmtrIk6ksGQzK6XAIh6jGlhhjmGH1CWlZH-4NnazfEOnkn6rOmL4jkciFyGptTJlsIJw+lWz+mGaBlgLiHtGeJXDhlMmRkjGJnhGxlazxmeHAW0JPmgCGkmhpkriZl0mhnmiZ5mLZ7rIuhbLuhYDCbWHYpbSzTzQVxOwp4c4yab7UAHZTTbQMBzSUEuEEU7SZDTR9SfY-yvREB+4yHMF+pLTnpfTUWEXD62gpB3ayh3ZFRSpoGuBSo8hdjiXC62rSUuC2pyWxkSXaHKWgDaFqUKVIE6paU6q6UjASWgqDBoFmWSAAjyUmXC4gQkCvrFwhj2WOXWXqXC72nKX2lkg2U9ASVvAoqfisgkCj4BXIpBXJCXC+UlASWHFaWuC8AQQhiNCCBcAiCNTHG-SgDRUxASXUbxUuCJXJWpXpWgDUagBZU5WuASUABUBVfASVFVJVoAjUNVFVLgVVLgElwA9VRVTVSUjUYAlV7lSBAApL1Y1SlQNaAKNe1dlSNUcEVDXvFX1VNWlS1WOSlQtfdgAITkorWTXNWNR7U8BbV6WLWjETXFXTXjEuBnW2VIGjFcAFWrVHWgBPV3WdW1HC5CBXX9XrWNQiCfXbVFRCDPUhglCvXTVg3A3nW7X1UbUxDrUuA7WuAV6ygdQCWMW0VEUP4jHcB6iMxSohiCVMXCXrDo5Y3TRCU2wECshMaGBJAE2XCMzWhJQaXY10XGZO6ch8VfUlCk043k2WAdT4CoyC27R9KYx3YSUPxPzsBoFy1nIcD82YkxXC6QBEAxygROUuCa3a1NCq1q3VXC5hWaCwCQDKVm0W1G3G3fVIFm0PpaWO223G0SUAByNA7t9Vnt7tC5atmN4tnNmQEy+NXAhNkwmwSU1qK+JNwdM8c4lNQd1NZNEyFszNIwrN0dPNmwZw2l8dUtotpqPkm0KdQty+lFQJG+zhRcmgZymgD8Jg-UvZTGNAQoagyoDQnZ0UEtzFd04oz47SJMRWCU1dUgJQuZvovgFQVYVp-ZRwNdOsMwfZ-+3d7EQs2Mvdwt6SuRGJmJW9odq56iG9IsW9tN9NjNHe6p+dZdkts4Q40RrtrgB52OK9z4-FqMhhTA4MrI4Ex5z4KQ09JJc9q9RdUiMSAuWE9JvMqMP0KQUuNm4uwwYMXMmMMMdw-SE6iMXe+pX0ks349MKQjMzM61+D7MnM5M6OJRDaS8GsRWS9esIDv4ZMc5VAtAaS9MjkH98QNhzQzOKQ+Mvg92DglKZe49Am49KAuy49cIAqEDZMukNgfDCjOp5ph5Jh-9NpUgQAA')">function eval_block(stmt, env) {
    const body = block_body(stmt);
    const locals = scan_out_declarations(body);
    const unassigneds = map(_ => unassigned, locals);
    return evaluate(body,
                extend_environment(locals, unassigneds, env));
}

</pre></div></div>

	
      </p></div>

      
      <div class='permalink'>
        <a name='h7' class='permalink'></a><h2>
    
	Return statements
      </h2></div>

      <div class='permalink'>
<a name='p17' class='permalink'></a><p>
	The function <kbd>eval_return</kbd>
	is used by  
	<kbd>evaluate</kbd>
	to evaluate return statements. As seen in the evaluation
	of sequences, the result of evaluation of return statements
	needs to be identifiable so that the evaluation of function
	bodies can return immediately, even if there are statements
	after the return statement. For this purpose,
	the evaluation of a return statement wraps the result of
	evaluating the return expression in a return value object.
	<div class='snippet' id='javascript_76_10_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKqY7bHlqdUAFMAbgEMANkQkURACnoVWFADSiSYgJSgA3tlBGmIikSYlQVegH16IqQRvjps6iQDmSlRW2GjAYEA-EbKqv6BgQBcVrYkEqyKYb4RkUYhUjQ0ANZEAA52AJ6sAEY0UjaSMknFZRU0TvGJ3qraGiJafmnRsTZkdMoSJBQ2ACYiZFISTHK0JC0p3QEhLhX9DBRDI+OT07N0C+2dqWkx1pXTVBIlUiJjE1MzQvPJXUugK1UXTFc3dzuPfYvHxHHQnSJnWwSej0KgeEiJYYLN5LT7SGzQ2HwxEUQ6aMHvUCQvp0UZUZ7okQADzyJhhc2R4OCoi+6zJFIq1NpInpB2SoJR3WJU1KowkjMJIVYEmydwElAZIpKYpseT2iXkTHoyLUTMJ7yVKrKo0KOr1+u6HQJ72J9gAjkQOmQkj5BWk0RV7Y7yEkRA6nXdBvIcdrXgLzUTejcaGRshL3h6bNHY3irW6Ib0TGYLPHUSz0VnzMDVOHCcSJHk8lIqGQgbnuiEK1XTas3Ip5c9nDS6bC+a6BbqLWlpXkFNMPKAALwAPnzMjkinHA9A49Dru06Z6IiYLCYeIARABVEjZEg0ADulnohWGEipVksrYXUX32gA3NgAL64DtzFeVqRTQEDRV10AwAioAhQAUc5aSoVhySoMQ5VIBUDgEDd9HBQsLH-ZtVR+BDqGQmxf3Q0gQKYDx6HfCJP1EKR7CsKCYNsfpWDyGhSFGUjUOeBQMLA8F1mUUBjUKKdCD4uYkxoE0BNIWi0hEihQEyWtGMk+haxIGwuO2B49mebVxKUyIVNAa9SnKRhJzwjpRgUwQZLVGYNW3bUMI0dTpBoj9lIGVTSExOESBEUZbNAEcFBsKdZ2C+l4XC7yY18szAgsqpHUipsHLHKj6A0BKsTCiL0oCCy6SIKRVLsp95AUcTByHd5qXkEgeKtKgWARDpcSsupCtALKeWalr3jI3Sup6nEnI3crjFMItMyWiwLmqBQqpqzd3VAHDdJGklhj6zaeWqxYLRibiRAIKhSv8ox6IcJjwMibddycjQjxPM9Lyk5zhAoQo8hEB88MA18HtAb9v34aThFWI72TmSlux5Xti3UfEhMCfbegoJhHQUerFDZLtaQI8KdWxnbljnNsFDJrkmCOtdWlLMt6YXRnSXJlnpH6-tsY-WHJrnOw-W9Z0FiGtMsMCSDoPOEQOKBiX-R9GXMNetI8eu277tSJ7GNBxXWJsKZlDsTZgxO5IaJx-U8ZJgTuqtoMVbtnwaLUNMoehhiXr1Czbq1EZknWx1JIjIwXdD92bc9pF7baP29TN859sj9s3fDnxs+1mO9tWyx47z1Rs-9wJjaDi1na+L0AwUIvcZ5POFxDLXfc6KuAm-auv1wCzitC8LJIUXQZ1AEhqqkD84YBq8dL0ogDN2J45jZ3x5YgljzkbzXXkdgKNks72tMlgNrY7vqt4WgI8eV1XCnVqWXVUGii5CGepCkIuYlyh1JQy99L3HXkCTyudr622Tt7DcY1xoBG0kMFea9ATGQUNKWUr8m4t0QbrNu0Ck4UC3g7Dc-sa6gx1q3bMlhzgqS2GA9BDJXh4IyNYXEDDhhMKMjJAa5RkS0wzOcSQPxri3B4RvPsrQ8HpDUhwhQojfgSIBLwugRRrJSEEbIyMP855G0HgvNCj4vjJjjPybGO8jAWXEpJMxsl5KvH9hZHymk7LIN0qA1RUiGCNTkoUcqw94iJVKpFaKsUp4jySqMFKGk-KpHrq4bmTUdFtQcs4LQ3U6CzVcUNKJoSBS0VFvDEx6IQrYi9iWSx1DMquFBnVLK3Nym9W4SNamadAjNI0XUbOY4Qk4m6QIsMw06kCn9njEaIsfwlPFko8R-xDI+NTJ0KxK4QmDIqG0uZfxJFAg2WaJYLttkqMWXstpwy0wIMCGneiRgjHPHFlwtBajMYClWV0-hmy6k8w2Iw7xezPkHMtI0hqTzdmdnOULS5eobm4HwJNRgBAWDsCgHARAyB0BYAAEzTMXr0ewjhnAgrul4V4qzH5xCIKUbcyIjAAB86Ux33gTEltLQAMqZbYMo5QRBDFpRy-U5w9HIimfcv85xNgeA8OFC2CiLEUAABZ3ElcfYutDehqm6rSgAZNq0ASqJCOTJZOE1oBFXKokB4UVYshUJHftvahFKbCSulTxasygDxNBEJDQeYtPl6UaHa2ljqS76t5Y5TYVAtFH2tTM84zTZpkp1k6l1Mr3WCyqfuBNfUfXfjFtm7hgKk0RDxgaiNEgo0KDLQoSN0b1zkN9TMgtIxIWtCsaW8NNaK1aNrYIopuLjG9DBf8-ixaH6holZa11sqPUWP3MO05zxc1iuEAu8BnYi2unbaG6tvbd3dr7f2sWa7mHqNbQ6ktO7O29t7UfI9cbbDHIWeulhW7k0TtsKmt1cqQSgH3E+8Fcxl1iwAyOvhtQhlvsveq-dlbYN1taPNKZIHLjzMA2e75Y7FowevQe299bRX4AAGKQAABoAFkACiMQTBVgkM6P9k17gG0QnQfcoBzzkgVX+w0Eh9x4DABIAgmozUKusLEegUdxMKqGKMW4owogCf1RQCgeR6BRBAB4LjRAShoHYsAegXEmDOgALT0cNSrQowAABW9ATP0CmJ4YA1hJM8mAAANgAMwoBXXQ2wvHg3QeWpOqVaaf2ZqY+MFjS7714t46qdUpgPKBfHeq6K-qGg2C9RoeDfbkMzPi+JFL2Hlq5fw4h-tvmVq0OK2q4Ln6p1hdnb+-cWcPY4mAzMrOzN0avrbe+nDhqu2VpjYYm1bFSSsfiJyNGvJMbHxTY179zWqk6PnZNjkfNetsdi4Opm3ZKZGqg6l5a6abAmAIHiDAu2Hn7YpiJWreMzsXbxFim7f47v8xqo90Nz2bp4k85V8bODD7HZK7hEL0700HgPs6TreKsGBkvqDj+C3fsKP3LD71GgU75bxVjohnck0BCC7hXLo280zLLoTypJC0eDaO6jvHg66TtxgSQrW271Xlbp8zh5T88hqyx5zgb9Wsuzy1nz8V-noRs+ISL0nfnxe-2GwhunQOH1JnUuYsH4OldfpnRmrG+4zHw8HYjrXMYdf9cV-Ij1Jvtf7hx66KXwh7FFaw3rsNQ2ecNuKXi+NAEax1k94t0Ly2jdfSbNWWsMXXelxKVtubP2Geq8EfHlcBUU+ldw5W33fuqtngxFnmgan6di+FaX+JlO8XU-HAoKv5eyedsbxn1nxfqIN7L1z5avbW+GPhSUxFyKOBou4JitAnmB388-YTRQVJVV43vCauyBNHSxoRzKFCi8FCuTtZqIaTVqkJPR-b9inFuK8UXk7nRe-3Jag0Ef2FwPz9cQ6lf4xAlF8fudUtw3AkvpX9L9JozcHkmM78kstQv9yVT8RgXsCANBrsM8mMisCBv91U-tLsEDQA3tkDE9ppskTo0CYCMCOFzt-tsDAcN9zct9yDaFel1h2oL0aFTsMcs4RondQBGC+p3thBM4S5ekRp0CxcDdocRovp2C6lQC-xJDqgjomDFE6lhDm8fcD0hCNc8UnRMhYRPAMkxAskWlcQ5YQ1ucD1n8qcoEkUg1jCT9U9zDNDyBtC7gSggI3IRA3k9BAhbDlpNU9wrDEgxlB4LJzVnBn49CDCcRJI9F54xYLd-CahNEhoRoaISCfCK09xPkki6lq8qt4iNlPI3CwIvCWCVDHJ4jeDS43Ds4Ci7UiiScSjLBe1yjqCHk0l38CDDClAINGINAqhD9oQ7gbCGi1IOgPBFUujEjJ5TVbhPBxi+ihEPhQBfDMFaD4iJjBpei0pH8Bi9CFiYgZixiFV1ibJdAAAeEY2Yo4+YluFYHcGgPcfcAAFSyCiiGAknHCpVvksnyCrCoHChiHYwAGpQAdFIhlAfhPBIJTRMjdBgTOCgSQT8FAhwSSUoTFDGINwW4Yh3p7iFAniXiCARBzxM8PBPjhhGBJMg9-i-1QBgTQTkSWVISCBoTuiUi4SvpaTESkTQhGStNmT0SHYWi-xMgch8gNlelPkPDUgxYrQLYshRwhjug-UdJjieiRkMTVklgnVhUYT6TFjZSRTRw9TrlHCaAdCPBwiZoTo0wFilgYhPkpxTVq1dTuS5Fq1rjXTIwPE08YSNBe15j75Hp04WIrRHTV8lVQjBcX4OicRVVDk7iMjuivpjwyhuJLJuiATAyA5noqEi4Q43DJJqc1iOknZQ1vS8jMiBJCirluS8jkiqzaisz+4+5vDcIDT5TiYe4xsm11l-Vzkkz1SpTAgZStA5TS9OydBNSAhlS+VMjNiNTqEtSf8dTWTbTmR2zxzjStCzSSVLTCCkQbSdF7TuiwzvcjVVz6SQh7ARh3TfJ5y1yMxvTb1Vy-S1C0omyuS0gzZQyV9RNBiwiYyeCpy0gcTEzNFkySBUyOp0zNEwZm0XwPyczgLzJApmA7VCzLC3CJyszhjyyqjKzyiaykS6zsiGzEgG0lhmygzhiNyFSuzYZB9F5h82BR8uAMVeAfMqtYJCJEISJJo5oe8IcGtw9-9gI-04IiIkJvUKilieLiI7h4IqxiE6wMJBLLBctBJRULIJLeLt9jFIpocmRod9wy1OCAgy0hw2gjKMda0zKjBa1LKiLjLfC7Klj0jHLrL7d01XL00PLuhjKhVZ5ODArf5CQrL-KMcyR6A6NChOCoqYqwqnKMdQK7LQKLRwq0hjLpRFUMQSh6AndsqFVcrGAlgMrIhjLATXKAgFAqQNAAk4pQB7xgSJJQAyrAhjKTMqqjAaq6rJ5Zx7wTNQAWq2qAhjKAAqLq6CWqoavqxq0AMaoaowEaowYy4ASanqmahq+8MAYapK+3AAUnWumvqqnnvH2sWtar2txH3BXyqo2pOv6tPICSurxIAEITU7rjrZr7x3q7JnrPLrrTijreqtrQBzijB-qIr7dTjJwur7rvqwa7IZqXr9xpxgbNrTrQBZwIblq7drrpxYaNBIh4bQaCacaUbXrJq5rAgp4jBXqAgF8mRaJtK5KpKP8N1WSpw9Rooy0NAdL5L2bN5mbUL+a2amMaAShrMJgSEualhooBAGrnLWbkJOCNLFJ4Ei5Ra+Kh9aJsAWb4JdLWZNhyTJJodjL9Y7pwpOCLbSpcbPTyqMdIASBotYqianaXa7b7bRqMdCqbBYBIA7Lfb-bPava8a8TfbKNXKI6Q6vbjKAA5CQOOyahOuOh8pE4W0+LWu4MFTI2W7oeWhq6tNAvm5W7OwKLYeJfWySkiMFZIvO4cCsASQu3PLRNAtoWSg2gWp5eJKraPF+LOwW8iEgSiC09NZQywPumwO6Gwa6JgQCXc6zCQSQbSH4QXZuRBAexS24HEFSxSIi94ccQ3d8SIbs-HJaAoQCpEce0QKkdqTqTJK0pEWRQBRyAepjOcz87kgenOl85+ysPKN+xPCWqWygIaY0owb+8u1pbImOwIEIlWKMvcwwyrYIiMjwTIEoSkB+-c2qSyc+pB2aXWmUr4faZZSckw5aC3WQomWRF2brWbDGIFe2m0rS1C1gfulgDwNySSVyewPEzwsWS7IovGDAN8AOIRsRz8H1F2dhgiGgLhhIP0tBjBrB-Qx+3wN8IAA')">function eval_return(stmt, env) {
    return make_return_value(
               evaluate(return_expression(stmt),
                        env));
}

</pre></div></div>
	
      </p></div>
    </span></td></tr></table>

  
      <div class='permalink'>
        <a name='h8' class='permalink'></a><h2>
    
    Assignments and
    
      <span style="color:teal">definitions</span>
      <span style="color:blue">declarations</span>
    
  </h2></div>

  <div class='permalink'>
<a name='p18' class='permalink'></a><p>
    The following
    <span style="color:teal">procedure</span>
    <span style="color:blue">function</span>
    
    handles assignments to variables.  It calls
    
      <span style="color:teal"><kbd>eval</kbd></span>
      <span style="color:blue"><kbd>evaluate</kbd></span>
    
    to find the value to be assigned and transmits the variable
    and the resulting value to 
    
      <span style="color:teal"><kbd>set-variable-value!</kbd></span>
      <span style="color:blue"><kbd>assign_symbol_to_value</kbd>
      </span>
    
    to be installed  in the designated environment.
    <table width="100%">
          <colgroup><col width="48%"><col width="52%"></colgroup>
          
          <tr>
            <td><div class='snippet' id='javascript_76_11_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (eval-assignment exp env)
  (set-variable-value! (assignment-variable exp)
                       (eval (assignment-value exp) env)
                       env)
  \'ok)
</pre></div></div>    </td>
            <td><div class='snippet' id='javascript_76_11_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKqY7bHlqdUAFMAbgEMANkQkURACnoVWFADSiSYgJSgA3tlBGmIikSYlQVegH16IqQRvjps6iQDmSlRW2GjAYEA-EbKqv6BgQBcVrYkEqyKYb4RkUYhUjQ0ANZEAA52AJ6sAEY0UjaSMknFZRU0TvGJ3qraGiJafmnRsTZkdMoSJBQ2ACYiZFISTHK0JC0p3QEhLhX9DBRDI+OT07N0C+2dqWkx1pXTVBIlUiJjE1MzQvPJXUugK1UXTFc3dzuPfYvHxHHQnSJnWwSej0KgeEiJYYLN5LT7SGzQ2HwxEUQ6aMHvUCQvp0UZUZ7okQADzyJhhc2R4OCoi+6zJFIq1NpInpB2SoJR3WJU1KowkjMJIVYEmydwElAZIpKYpseT2iXkTHoyLUTMJ7yVKrKo0KOr1+u6HQJ72J9gAjkQOmQkj5BWk0RV7Y7yEkRA6nXdBvIcdrXgLzUTejcaGRshL3h6bNHY3irW6Ib0TGYLPHUSz0VnzMDVOHCcSJHk8lIqGQgbnuiEK1XTas3Ip5c9nDS6bC+a6BbqLWlpXkFNMPKAALwAPnzMjkinHA9A49Dru06Z6IiYLCYeIARABVEjZEg0ADulnohWGEipVksrYXUX32gA3NgAL64DtzFeVqRTQEDRV10AwAioAhQAUc5aSoVhySoMQ5VIBUDgEDd9HBQsLH-ZtVR+BDqGQmxf3Q0gQKYDx6HfCJP1EKR7CsKCYNsfpWDyGhSFGUjUOeBQMLA8F1mUUBjUKKdCD4uYkxoE0BNIWi0hEihQEyWtGMk+haxIGwuO2B49mebVxKUyIVNAa9SnKRhJzwjpRgUwQZLVGYNW3bUMI0dTpBoj9lIGVTSExOESBEUZbNAEcFBsKdZ2C+l4XC7yY18szAgsqpHUipsHLHKj6A0BKsTCiL0oCCy6SIKRVLsp95AUcTByHd5qXkEgeKtKgWARDpcSsupCtALKeWalr3jI3Sup6nEnI3crjFMItMyWiwLmqBQqpqzd3VAHDdJGklhj6zaeWqxYLRibiRAIKhSv8ox6IcJjwMibddycjQjxPM9Lyk5zhAoQo8hEB88MA18HtAb9v34aThFWI72TmSlux5Xti3UfEhMCfbegoJhHQUerFDZLtaQI8KdWxnbljnNsFDJrkmCOtdWlLMt6YXRnSXJlnpH6-tsY-WHJrnOw-W9Z0FiGtMsMCSDoPOEQOKBiX-R9GXMNetI8eu277tSJ7GNBxXWJsKZlDsTZgxO5IaJx-U8ZJgTuqtoMVbtnwaLUNMoehhiXr1Czbq1EZknWx1JIjIwXdD92bc9pF7baP29TN859sj9s3fDnxs+1mO9tWyx47z1Rs-9wJjaDi1na+L0AwUIvcZ5POFxDLXfc6KuAm-auv1wCzitC8LJIUXQZ1AEhqqkD84YBq8dL0ogDN2J45jZ3x5YgljzkbzXXkdgKNks72tMlgNrY7vqt4WgI8eV1XCnVqWXVUGii5CGepCkIuYlyh1JQy99L3HXkCTyudr622Tt7DcY1xoBG0kMFea9ATGQUNKWUr8m4t0QbrNu0Ck4UC3g7Dc-sa6gx1q3bMlhzgqS2GA9BDJXh4IyNYXEDDhhMKMjJAa5RkS0wzOcSQPxri3B4RvPsrQ8HpDUhwhQojfgSIBLwugRRrJSEEbIyMP855G0HgvNCj4vjJjjPybGO8jAWXEpJMxsl5KvH9hZHymk7LIN0qA1RUiGCNTkoUcqw94iJVKpFaKsUp4jySqMFKGk-KpHrq4bmTUdFtQcs4LQ3U6CzVcUNKJoSBS0VFvDExBYS6pk6FY4utCooyjuFnEazdxouyzszdGLD+w6KWGmIpP4SniyUeI-4hkfEVJ0FUkK8INF1Gzooy4QzJFAmmQIsMeoXaDL+IszsjSwzYwQYENO9EjBGOeOLLhaC1GYwFBMkJyyKiNPOVsvhtQVmdO6VlbmjzvFLJ2ULNM+yAiHNwPgSajACAsHYFAOAiBkDoCwAAJj6YvXo9hHDOA+e4LwrwqmPziEQUo25kRGAAD7EpjvvAmd0sWuhJWS-U5wyjlBEEMIlpLyV4t-siEWSLjH4wkB4Dw4ULYKIsRQAAFncTYHhj7VOWrBCQ3UiUADIlWgAlRIRy2LJzatAOKyV-LuUnL-OcJo79t7UNxTYKVgqeLVmUAeU1kNB5i34fURoCQzUyrxuqxymwqBaKPoasW5xJm9Vga0KxlrrVCrtYLEsoB9yhpxE678Ysk19TuUSnW3rmW+oVVon1Cg-UBvXOQ51-T03cN+RG7NJc1W5qLfmxt-rBG9KNcIehgVGHfP4ti2tNTzjRttSKkECavkjKBCm9tlhx3gM7K6rNEQc0aubQWhtxbW29LFrO5h6jq3mqXXWwtG6N1Hy3f0kR8zNk9o6TWw9A7bBDuFfaix+4NkqInc8KdYt33DLnc8zRi6H5HvXU249Taz3nuRb+p5e7XCesjSBldJ6IOlsNfgAAYpAAAGgAWQAKIxBMFWCQzoE2TXuAbRCdB9ygHPOSMVCbDQSH3HgMAEgCCal1WK6wsR6BR142KoYoxbijCiGxtVFAKB5HoFEEAHgGNEBKGgdiwB6BcSYM6AAtKRjVKtCjAAAFb0C0-QKYnhgDWH4zyYAAA2AAzCgadvRmNAcWg+q1-KbXPrjVjfcFHxhUa-VB3lzHVTqlMB5NzsrcLRVdXpd1iQNDgZbWe7lYswviWi8uvNLbT1ocMcG2w+1st1sHV5mNI7437izh7ZNIXTmtLRryTGx8cursEUGi9bFSTUfiJyZrGNSseafbGvEOj9xsj66jbkLXv39KZt2SmmqaX9uWrGmwJgCB4gwA1v8i2KYiWG+tjhm2bp4nhXt4QB3+Y1WO7hDbW28T2bbUVnBh9Vv3rlY+irw6X2jv3AfZ083kVYMDJfD7H82t1rG4DiHwONAp3S-0oHgZE6dz7QEL7uEUsltaFd0uUC6teyh4hmphakfluRXSduMCSFazJ8tfLUPkfIqfnkNWqOGdrdwia2eWtWe8vOJbWnxDufY7oRyrRzOSFluKWz2wZjosxcl55gVlX-vVbMSD3lYOkzqXMZ94DNTYfa8R66QXpz7FZb7QkpDuW8e+Fe91jEAEax1lt8b77avvNjdfU2astZguW7-BRtpLX7uWFx51qnvLVyR-rchptMv5oh+EGeDEBUFA0Bk9Djzejs+57T4TsOmevA55ooznHDaK8E+LlbePteq+WA3bX9DYBQXMDYBwaF3A4VoHszy05g7CaKCpF6ut95tV2QJo6LroO6m8UXgoVyHrNRDSapYi1MOFGTbYJxbiS-jH7gBYSVf7ktQaE30Ct77ED8dSP-xAgE+Ru-Z8wJL6d+uIP8mjr05FHz9IstQBIX8TsrYnsCANBdti9-pjEHEgJQCHtTsICNBLsYCw9MkZoTpn8cUd9wDztIDQAXt59ddF8Gl4MeZjphhEDLBYdyDqgT9QB1h2pfAYDM4S5ZkRoaC+V1c-tcQRovp6DHQ-8-whC7hmCTouDcDydQMW0uDndkUnRMhYRPAMkxAskw1cQ5Zt8akN0b9+ky5SI3JFBtC7cZCV19DFDyBlC7gSggJjDrk9BAgzDlo1RFVwUPUBRuULI9VnBn41CNCcRJI9F54xY9cPDmhXUhoRpK8dDXCFU9woiNAYi68IjAwXlGIBJjCwJnCaFlpC00jUjjDs5PJsj9BcivdcIN1CiSDTk0kH9ppsk7YMjojfIr9oQ7hTC8iHsOgPBxUlAWjJ4dVbhPB+iqhP59QQg3C9xwjjCBjNFWjGI2gxIOi1ChFIwRi+ixV5jBpdAAAeNSXosYtKFuFYHcGgPcfcAAFSyFqRIAknHHxVvksnyCrCoHChiFowAGpQAulAhlAfhPBIJTQojdAfjGDvjfj8F-jKUgSCBTRxiNwW4Yh3oLiFBrjbiCARBzwVwqInjhhGB+M3cPiE1QAfi-ikFYSFN4SdibIwSE0voySoToTQgqTgS5kliFDQsshcgCh4sdkMjHDUgxYrQLYshRwujugXUdJaTGJki0oqklhLUC9QSKSVgtAxSc8mkWTAVrCaAVCPAAisCkQekKSYhXUpwdUKdBiKS5FC1ETbTIwPEOtQSNAN1ET75Hp04WIrRLSZ8JU-COcX5GjNCZVulzjEjBSE1jwyhuJLIMjPjPSA5noqEi4Q5jDJJDC0jiYe4i48ZnS0i7lSiPU2hHSAhCyYisiSykz+4+4XDcJRTMgtSgVnNQ07lZlXV5SpAhTAgRSNSmyJTKlqFeyUcZSkjhoFThzuhlT+dVTEF1SxBNTRxbSlD9SqUjSmiTTOh1iMwLTp9E9NUbToSQh7ARh7S2iJypAdzThLIZTT1Bi3Sm0PTe5HpmS0gzZfT9zfCVYgyNzQzFTLQIzZSvoYzv9Rh4zNEwZK0KAXwazA5UyLR0yPVMyoFsy046460CziioiqzEhSydTezijKzCiayDFujHx+zxScydB29YDjIu9IVOAYUeAsAnNnNYJCJEISJJo5pm8eDfcFFgIE04IiIkIRARDhARKuK7h4IqxiE6wMI+Lo9BJDULIpLiIUJF5IoxsmRYcfVGCAgfUhx8K0hYdi0DKjBi1jLT9YdpiLLQBpjrLdLd9Y17LY0nLuhYc+df5GDvKpBCQTLIhYcyR6ASNChGCQqwqAqbLd9USmALK4qLRArAhYdpRxUMQSh6AT80qxUMrGAlhkqAhYcvj7KAgFAqQNAAk4pQB7wfiJJQBCqjBYctNSqjByrKrJ5Zx7wtNQB6rGr5F7V9wAAqVq6CCq3qzqmq0AIa3qowfq2HYAUa9qia6q+8MAPqmKwagAUiWvGqqqnnvC2tmoas2txH3Gn1KuWv2q6r9ImtOvRIAEJtVLq9rJr7wnq7IAl7r9w9jdqOrVrQADijAvrnLBq9jJxWqrq3rAa7I7rQazrpw-qVqDrQBZxgb5rd9pwIaNBIgoaAasb0bvqHrRqprAgp4jAHqAhx8mRaI1LOKNLH8ANBopw9RoofUNB1KxLGaBhabAoHL6auaKMaAShDMJgSEWalhooBBqrbKBbkJGDlLFJ4Ei5ObuKSl4lsA6b4JpLWZNgCTJIxtYd9Y7pwpGDjbSp+qCKgrd9IASAgtwqcbbb7bLaraird8cqbBYBIALKPavaXbXaBqzqPb8N7Lg7-bXbYcAA5CQSO0a6OyO68lk3m0+VW8QrtbhKIiW7oKW6qgo5Y1O3WrYeJLW0SkiR5GIrO4cCsASXO2QrRZ-fOuWtOjYIu2iVsgCF+AunioS8cHzbggPF+O6Gwa6JgQCdcwzCQSQbSH4DnbUlqAu2S24HEBSxSU-d4Xu2Nd8SIQrFHJaAoEM2abg+ozqTAzc3EWRQBRyLukpIsjQMsgux5V0i+ysPKa+xePSEWsWoae+puwuqteDH2WRb8-wg+vqNtHwgMjwTIEoSkU+zQi+MwfeuBw+0I-pRGaCsZGVTKeDSSF2aCjsv5XMwINs-kig-BhdXZAQ4WesywEaVSvm1gTulgDwNySSVyewdEpw24VSKfUADAN8KauyeFARz8J1F2RhgiGgFhhIN0yB6B2B9Q401goAA')">function eval_assignment(stmt, env) {
    const value = evaluate(assignment_value(stmt), env);
    assign_symbol_value(assignment_symbol(stmt), value, env);
    return value;
}

</pre></div></div></td></tr></table>
    
  </p></div>

  <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">
      <div class='permalink'>
<a name='p19' class='permalink'></a><p>
	Definitions of variables are handled in a similar manner.<a class='superscript' id='footnote-link-4' href='#footnote-4'style="color:teal">[4]</a>
	<div class='snippet' id='javascript_76_12_div'><div class='pre-prettyprint'><pre class='prettyprint no-eval'>
(define (eval-definition exp env)
  (define-variable! (definition-variable exp)
                    (eval (definition-value exp) env)
                    env)
  \'ok)
</pre></div></div>
      </p></div>

      <div class='permalink'>
<a name='p20' class='permalink'></a><p>
	We have chosen here to return the symbol <kbd>ok</kbd>
	as the value of an assignment or a definition.<a class='superscript' id='footnote-link-5' href='#footnote-5'style="color:teal">[5]</a>
	
      </p></div>
    </span>    </td>
          <td></td>
          <td><span style="color:blue">
      <div class='permalink'>
<a name='p21' class='permalink'></a><p>
	Declarations of constants and variables are handled in a similar
	manner. Exercise <REF NAME="ex:mutable"><a class="superscript" id="4.1.1-ex-link-4.16" href="./4.1.3.html#ex_4.16">4.16</a></REF> explains how we
	distinguish variables from constants and how we prevent
	assignment to constants.
	<div class='snippet' id='javascript_76_13_div'><div class='pre-prettyprint'><pre class='prettyprint' title='Evaluate Javascript expression'onclick="window.open('http://source-academy.github.io/playground#chap=4&prgrm=PTAEGUEkGEAVQFLlAFgHQEZMChslAGYCuAdgMYAuAlgPYkDOhATjQLYQzxKqY7bHlqdUAFMAbgEMANkQkURACnoVWFADSiSYgJSgA3tlBGmIikSYlQVegH16IqQRvjps6iQDmSlRW2GjAYEA-EbKqv6BgQBcVrYkEqyKYb4RkUYhUjQ0ANZEAA52AJ6sAEY0UjaSMknFZRU0TvGJ3qraGiJafmnRsTZkdMoSJBQ2ACYiZFISTHK0JC0p3QEhLhX9DBRDI+OT07N0C+2dqWkx1pXTVBIlUiJjE1MzQvPJXUugK1UXTFc3dzuPfYvHxHHQnSJnWwSej0KgeEiJYYLN5LT7SGzQ2HwxEUQ6aMHvUCQvp0UZUZ7okQADzyJhhc2R4OCoi+6zJFIq1NpInpB2SoJR3WJU1KowkjMJIVYEmydwElAZIpKYpseT2iXkTHoyLUTMJ7yVKrKo0KOr1+u6HQJ72J9gAjkQOmQkj5BWk0RV7Y7yEkRA6nXdBvIcdrXgLzUTejcaGRshL3h6bNHY3irW6Ib0TGYLPHUSz0VnzMDVOHCcSJHk8lIqGQgbnuiEK1XTas3Ip5c9nDS6bC+a6BbqLWlpXkFNMPKAALwAPnzMjkinHA9A49Dru06Z6IiYLCYeIARABVEjZEg0ADulnohWGEipVksrYXUX32gA3NgAL64DtzFeVqRTQEDRV10AwAioAhQAUc5aSoVhySoMQ5VIBUDgEDd9HBQsLH-ZtVR+BDqGQmxf3Q0gQKYDx6HfCJP1EKR7CsKCYNsfpWDyGhSFGUjUOeBQMLA8F1mUUBjUKKdCD4uYkxoE0BNIWi0hEihQEyWtGMk+haxIGwuO2B49mebVxKUyIVNAa9SnKRhJzwjpRgUwQZLVGYNW3bUMI0dTpBoj9lIGVTSExOESBEUZbNAEcFBsKdZ2C+l4XC7yY18szAgsqpHUipsHLHKj6A0BKsTCiL0oCCy6SIKRVLsp95AUcTByHd5qXkEgeKtKgWARDpcSsupCtALKeWalr3jI3Sup6nEnI3crjFMItMyWiwLmqBQqpqzd3VAHDdJGklhj6zaeWqxYLRibiRAIKhSv8ox6IcJjwMibddycjQjxPM9Lyk5zhAoQo8hEB88MA18HtAb9v34aThFWI72TmSlux5Xti3UfEhMCfbegoJhHQUerFDZLtaQI8KdWxnbljnNsFDJrkmCOtdWlLMt6YXRnSXJlnpH6-tsY-WHJrnOw-W9Z0FiGtMsMCSDoPOEQOKBiX-R9GXMNetI8eu277tSJ7GNBxXWJsKZlDsTZgxO5IaJx-U8ZJgTuqtoMVbtnwaLUNMoehhiXr1Czbq1EZknWx1JIjIwXdD92bc9pF7baP29TN859sj9s3fDnxs+1mO9tWyx47z1Rs-9wJjaDi1na+L0AwUIvcZ5POFxDLXfc6KuAm-auv1wCzitC8LJIUXQZ1AEhqqkD84YBq8dL0ogDN2J45jZ3x5YgljzkbzXXkdgKNks72tMlgNrY7vqt4WgI8eV1XCnVqWXVUGii5CGepCkIuYlyh1JQy99L3HXkCTyudr622Tt7DcY1xoBG0kMFea9ATGQUNKWUr8m4t0QbrNu0Ck4UC3g7Dc-sa6gx1q3bMlhzgqS2GA9BDJXh4IyNYXEDDhhMKMjJAa5RkS0wzOcSQPxri3B4RvPsrQ8HpDUhwhQojfgSIBLwugRRrJSEEbIyMP855G0HgvNCj4vjJjjPybGO8jAWXEpJMxsl5KvH9hZHymk7LIN0qA1RUiGCNTkoUcqw94iJVKpFaKsUp4jySqMFKGk-KpHrq4bmTUdFtQcs4LQ3U6CzVcUNKJoSBS0VFvDExBYS6pk6FY4utCooyjuFnEazdxouyzszdGLD+w6KWGmIpP4SnixCtiL2JZLHUMyq4UGdUsrc0Gb1bhjSwzC1SLMjRdRs5jhCTiVZAjFkjQFP7PGI0Ra4HwJNRgBAWDsCgHARAyB0BYAAEx9MXr0ewjhnDTPcF4V4VTH5xCIKUbcyIjAAB8QUx33gTO63zXSgvBfqc4ZRygiCGMCsFEL-m-2RMcoxzx8YSA8B4cKFsFEWIoAACzuJsDwx9qnLVghIbqwKABkzLQCUokI5H5k4eWgApVSglOKxbnCaO-be1C-k2GpUSni1ZlAHlFZDQeYt+H1EaAkMVtK8YcscpsKgWij5Cv6ecWZs0fk60ldK4lcrBYjP3KavqSrvxiwddw1VwKLUl3ZSi3VjKtE6oUHqg165yHKv6a6kYCzYWepqQGoNga-WCN6biv89DAqMO8XWc1ERLUEplSS+VFj9xcLQWokgTqU3CBLZIoE2zg2tCsdqn1Cb9UKDjYmo+obnX9OrZmzsUaG0xuWu21t8bO3HOFbYJR4j-iGR8R6nNXrzhWtlaSkEoB9zTr+DW54FaxZbpUXO2t7rs0Py9SO-1zax0ht6fuy4M6d0yQHeKxdsar2Juva0LtJywAADFIAAA0ACyABRGIJgqwSGdBuya9wDaIToPuUA55yTko3YaCQ+48BgAkAQTUfLyXWFiPQKORHyVDFGLcUYURsPsooBQPI9AoggA8KhogJQ0DsWAPQLiTBnQAFooOcpVoUYAAAreg-H6BTE8MAawJGeTAAAGwAGYUCVrobYDDC6z01OXXm61a67WwfGPB3dt7+kYdVOqUwHkdOLRqdFVVel1WJA0BepNE7LMJGVBIBxppT0OeHe+0dHaQ1GpeZncpgW6W4X04Swzhb137izh7HEe7+mtLRryTGx8m2cpbfW3wybJ1IwQ-ETk2WMb2di5pqVBnV1JZGTo4tpJyuo25DljLLymbdkply6Nr7lo2psCYAgeIMAWZ67zZmrMat4xG2NvEDypvGNAL1imAt5tesWzdPEKmSvGtsAfaWMXc0Jca7arG+4TsiG62trBgZL6HzgY2nbCibvPedPuDQKcvMvNu0Qzu5qAhDdwh5w1YaXllyB8MkheXz3Nr+1DtbdJ24wJIVrN7NTP3w-+2tp+eQ1a3ax0OuLmKivxO7ZFrT0J0fENJ2DurejCta0OzTpM6lzGDZofS2wK6C1Xa+mY+7eLHuc5jNzwdTP5Hyv3CL37rp8d4vseJGrtXvUFdx9+jTvQmzVlrPxM7S7+cNcFwefXNYgSi7-LBtpOXttvq12Fr9yu-yrkd8F53oXW3jpR3is8GICoKBoIxhHemKch7D274QMPxxR5otjr3jlQ9U912joP1EE-h+WvG1PybTklPOZcjgNzuD3LQCp55BP+eE0UFSLVXr7w8rsgTR0EWHt1N4ovBQrkNWaiGk1UZCT3ty-Ypxbi3fjE-Z0X39yWoNBD7TtTmvJIOJcQ6lP-iBBG8R-qxd83BAvrj43zxSaNvY8lOs25WzWoBK7+Gxw0be2j+gEmzH0uV+1c79+aPkYS3X8VsP9-pjEMkxAsk5lcQf8JU-9n9xtX8DsO8xcu8GkJkeZjphgH9cIbUFAUsS5s4ft1s6B2pfBgCotaF1kRosC6sBccC9kN1UDqgL9LBGDHQjoSDFEJlqDNdfVW0qD2c1snRMhYRPAwCIDZo5YYCcdE1l9dcYcLkNViZKkpDk8lCdBgChCaB7AkwgIb8BR9BAgR8ak1QmUFC3MllvwLJ+VnBn4xCZo+pJI9F54xZxczCahNEhoRpE8VDcITC9xVVPCJk08xY3C61PIb8wJDDedwdm03DVs8VQivCBIIiDDQdojLB404ikC-w0lN9ppsk7ZagbINAqhB9oQ7hJCjDhsOgPAKUlAijGJJ5eVbhPA6jSihEPhQA-DMEu83D6iPCSi0pF9yiwCOiYgWjajyV+jBpdAAAeNSGototKFuFYHcGgPcfcAAFSyFqRIAknHABVvksnyCrCoHChiCQwAGpQAulAhlAfhPBIIAsGjE9rjCCribj8E7ioVHiCBTR2iOijAYh3p1jcDtiaBCARBzwVwqJDjhhGASMAIzjqMN1QBrjbikEfjWM-jpibJdA3ivo0TPivjQgsSnjODGiBC8VMgch8g611lVV9DqExYrQLYshRxKilgVUdJcTGJBjGiqklhJUWcAjASGx8Q2TQ8mkSSAhNCRCPA7CCikQekMSYhVUpxeUA1RSMS5EA12idTIwPFWdRSNB40ATe5Hp04WIrQNTW9KUbCicX58jIDaVuk1j-CGivpjwyhuJLIGiLj75HpA4qEi4Q4b9JJ5Cb81DAzIg8YjTQiAjkiNU2gDSAhEigikzEhQ0lh+4+4qjcJWSaSOSe5DEXUQl6SFlPThppAmTUgWStBJTiydBBS0z+kjSAj+TvCi5hTZ5eTP5EEVgGyizpSvi5ToVFTIDoyxSAg1SGjbSeC+zpzmR7ARg9TfJ+SlyZzLIeSx0Xi2g+VE1zS9R6IrToIbSW8CMKjbDnScRXTLR3TeSvSSAfSOo-TNEwYI0XwYzKEWyT5RI3CIyoE+i0464vV4yb8wjMyRAUyZTAh0zqhwjkzvyDF0iJThzZDaMzlmA2BS8uA7leB1NddYJCJEISJJo5ok9yd9980cDgIN04IiIkI7t4i-wGLSK7h4IqxiE6wMJKLLAPNBIcULI2LiIUJF5IocCmQcD9wdVCCAgdUhwYK0hpKg05KjAg1FKEEAhpK-C1KujGUmBNKpKPsbU9KbUjLuhpKRVZ5CDrLf5CQlLIhpKyR6BINChCCXK3KHKtKjBpKQSmA1L-KLRHLAhpLpQKUMQSh6AftwryVIrGAlgQrtKPtLi9KAgFAqQNAAk4pQB7xriJJQAkrfKPt+M0qjAMqsrJ5Zx7x+NQACqirZdcR9wAAqMq6CTKuqqq3K0AZquqowBq6S4ANqiqzqnK+8MAeqnyxq3AgAUmGo6uyqnnvBmr6sKqmukpbzSpGsWuqvnICXWo+wAEIeUtqFqur7xjq7J9rjK5dZj5rKqxrQB5ijBrrLKPtZjJwyrtrzqnq7JOqDq5dpx7rRqlrQBZwXqBqPtpxPqNBIhvrHroaIaAamrDq2rurAgp4jBDqAgG8mRaJhKSLRKt8+EXipw9RoodUNARKmLiaBh8bAoujCaabYMaASgxMJgSEyalhooBAcqdKmbkJCCBLFJ4Ei5qayKi9aJsACb4J2LWZNh4TJIcDpL9Y7pwpCDVbSoGrYKnKPtIASAzN3LYb9bDbtadbkq5dYqbBYBIA1Krabazbzbpr9wraQM9LXbHbzbpKAA5CQb2tq3272zcxBem0+cWu4atAIrm7oHmnKgNHfKmgWiO9NeE0O0ScO+WxhLw6O4cCsASOOkLLRHffcjOkteJXXfXF+DO8iui8cQXbgyumwO6Gwa6JgQCccsTCQSQbSH4InEcocDOzi24HEHixSKa94Oum1d8SIUstspaAoG8k6bg3IzqTJewpEWRQBRyauq-Ds4kmU0ulO8OPc8e7oLe3vJO2mzxNmjmoaVMw+jYLOoIz2wIawlWR0ic28oShm6wjwTIEoSkNepU2qSyeez+pe5w-pRGA9WdcBI3ddTkgIFZZzRpGBx9dRE9TpbpT5RQNBvtJ9NAxZNMce5fUHFk1kI+9BzGWswIZBho9ZXtI9TsTB9mPUF2RhuBghjaIhzoEhks2GCyVgKulgDwNySSVyewXAvQBY1SZvN-N8Ig0+CSOyB5BRvKuqhRz8JVF2IRgiGgURhIU0+0v+1mwB8A9e0goAA')">function eval_variable_declaration(stmt, env) {
    assign_symbol_value(variable_declaration_symbol(stmt),
        evaluate(variable_declaration_value(stmt), env),
        env);
}   
function eval_constant_declaration(stmt, env) {
    assign_symbol_value(constant_declaration_symbol(stmt),
        evaluate(constant_declaration_value(stmt), env),
        env);
}

</pre></div></div>
	
      </p></div>
      <div class='permalink'>
<a name='p22' class='permalink'></a><p>
	Note that the returned value of constant and variable declaration is the
	value <kbd>undefined</kbd>, as prescribed by
	the ECMAScript standard (<CITATION>Ecma 1997</CITATION>).
	
      </p></div>
    </span></td></tr></table>
  

  <table width="100%">
        <colgroup><col width="48%"><col width="1%"><col width="51%"></colgroup>
        <tr>
          <td class="meta" style = "color:grey; text-align: center">Original</td>
          <td></td>
          <td class="meta" style = "color:grey; text-align: center">JavaScript</td>
        </tr>
        <tr>
          <td><span style="color:teal">
      
    <div class="permalink">
    <a name="ex_4.1" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_4.1">Exercise 4.1 </a></b> 
  
	
	
	Notice that we cannot tell whether the metacircular evaluator
	evaluates operands from left to right or from right to left.  Its
	evaluation order is inherited from the underlying Lisp:	If the
	arguments to <kbd>cons</kbd> in
	<kbd>list-of-values</kbd> are evaluated from left to
	right, then <kbd>list-of-values</kbd>	will evaluate
	operands from left to right; and if the arguments to
	<kbd>cons</kbd> are evaluated from right to left, then
	<kbd>list-of-values</kbd> will evaluate operands
	from right to left.
	<p></p>
	Write a version of <kbd>list-of-values</kbd> that
	evaluates <span style="color:teal">operands</span> from left to right regardless of the
	order of evaluation in the underlying Lisp. Also write a version of
	<kbd>list-of-values</kbd> that evaluates
	operands from right to left.
	
      
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_76_1_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_76_1_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>

    </span>    </td>
          <td></td>
          <td><span style="color:blue">
      
    <div class="permalink">
    <a name="ex_4.2" class="permalink"></a><EXERCISE><b><a class="exercise-number permalink" id="ex_4.2">Exercise 4.2 </a></b> 
  
	
	
	Notice that we cannot tell whether the metacircular evaluator
	evaluates arguments from left to right or from right to left.  Its
	evaluation order is inherited from the function
	<kbd>map</kbd> of the underlying JavaScript
	environment: If the arguments to
	<kbd>pair</kbd> in
	<kbd>map</kbd> are evaluated from left to
	right, then <kbd>evaluate</kbd> will evaluate
	arguments from left to right; and if the arguments to
	<kbd>pair</kbd> are evaluated from right to
	left, then <kbd>evaluate</kbd> will evaluate
	arguments from right to left.
	<p></p>
	Write a version of <kbd>evaluate</kbd>
	that evaluates arguments from left to right regardless of the order of
	evaluation in the underlying JavaScript. Also write a version of
	<kbd>evaluate</kbd> that evaluates
	arguments from right to left.
	
      
      <div class="Solution">
      <div class="solution_btn"><button class="btn btn-secondary solution_btn" href="#no_solution_76_2_div" data-toggle="collapse">Add solution</button></div>
      <div class="solution_content collapse" id="no_solution_76_2_div">There is currently no solution available for this exercise. This textbook adaptation is a community effort. Do consider contributing by providing a solution for this exercise, using a Pull Request in <a address="https://github.com/source-academy/sicp" href="https://github.com/source-academy/sicp">Github</a>.</div>
      </div>
    
</EXERCISE></div>

    </span></td></tr></table>

  
  
  

  
  
  
<hr>

    <div class='footnote'><span style="color:blue">
      <a class='footnote-number' id='footnote-1' href='#footnote-link-1' style="color:blue">[1] </a>
    <FOOTNOTE>
    We see no
    need to distinguish between expressions and statements in our evaluator. For
    example, we do not need to differentiate between expressions and expression
    statements; we represent them identically and consequently they are handled
    in the same way by the <kbd>evaluate</kbd>
    function. JavaScript is syntactically restricted such that statements cannot
    appear inside of expressions except in function bodies, but our evaluator is
    going to ignore such restrictions. For example, JavaScript does not allow
    nesting of return statements inside of expressions, but our evaluator would
    happily accept programs in which such nesting occurs, provided that we
    represent them appropriately, according to
    section <REF NAME="sec:representing-expressions"><a class="superscript" id="4.1.1-sec-link-4.1.2" href="./4.1.2.html">4.1.2</a></REF>.
    </FOOTNOTE></span></div>
    
    
    <div class='footnote'><span style="color:teal">
      <a class='footnote-number' id='footnote-2' href='#footnote-link-2' style="color:teal">[2] </a>
    <FOOTNOTE>
    We could have simplified the 
	<kbd>application?</kbd> clause in
	<kbd>eval</kbd> by using
	<kbd>map</kbd> (and stipulating that
	<kbd>operands</kbd> returns a list) rather than writing
	an explicit <kbd>list-of-values</kbd> procedure. We
	chose not to use <kbd>map</kbd> here to emphasize the
	fact that the
	
	
	evaluator can be implemented without any use of higher-order
	procedures (and thus could be written in a language that doesn't
	have higher-order procedures), even though the language that it supports
	will include higher-order procedures.
	
    </FOOTNOTE></span></div>
    
    
    <div class='footnote'>
      <a class='footnote-number' id='footnote-3' href='#footnote-link-3' >[3] </a>
    <FOOTNOTE>
    In this case, the language being implemented and the
    implementation language are the same.  Contemplation of the meaning of
    
    <span style="color:teal"><kbd>true?</kbd></span>
    <span style="color:blue"><kbd>is_true</kbd></span>
    
    here yields expansion of consciousness without the abuse of
    substance.
    </FOOTNOTE></div>
    
    
    <div class='footnote'><span style="color:teal">
      <a class='footnote-number' id='footnote-4' href='#footnote-link-4' style="color:teal">[4] </a>
    <FOOTNOTE>
    This
	implementation of <kbd>define</kbd> ignores a subtle
	issue in the handling of internal definitions, although it works
	correctly in most cases.  We will see what the problem is and how to
	solve it in
	section <REF NAME="sec:internal-definitions"><a class="superscript" id="4.1.1-sec-link-4.1.6" href="./4.1.6.html">4.1.6</a></REF>.
    </FOOTNOTE></span></div>
    
    
    <div class='footnote'><span style="color:teal">
      <a class='footnote-number' id='footnote-5' href='#footnote-link-5' style="color:teal">[5] </a>
    <FOOTNOTE>
    As we said when
	we introduced <kbd>define</kbd> and 
        <kbd>set!</kbd>, these values
        are implementation-dependent in Scheme—that is, the implementor
        can choose what value to return.
    </FOOTNOTE></span></div>
    
    
</SUBSECTION></div></div>

    <div class='nav'>
  
        <a class='btn btn-secondary btn-nav' href='./4.1.html'>&lt; Previous</a>
    
    <div style='flex-grow: 1;'></div>
  
        <a class='btn btn-secondary btn-nav' id='78' href='./4.1.2.html'>Next &gt;</a>
      </div>
    <div class='chapter_sign'>
      4.1.1  The Core of the Evaluator
    </div>
    <script> var chapter_id = 77; </script>
    <script> var chapter_path = "chapters/4.1.1.html"; </script>
    <div class='next-page'></div>
    </div>
    </div> <!-- /.container -->
    </body></html>